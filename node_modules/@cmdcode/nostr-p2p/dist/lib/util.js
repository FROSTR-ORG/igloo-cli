import { Buff } from '@cmdcode/buff';
export function gen_message_id() {
    return Buff.random(16).hex;
}
export function get_event_id(template) {
    const preimg = JSON.stringify([
        0,
        template.pubkey,
        template.created_at,
        template.kind,
        template.tags,
        template.content,
    ]);
    return Buff.str(preimg).digest.hex;
}
export function get_tags(event, tag) {
    return event.tags.filter(e => e.at(0) === tag);
}
export function is_recipient(event, pubkey) {
    const peers = get_tags(event, 'p');
    return peers.some(e => e[1] === pubkey);
}
export function get_unique_items(arr) {
    const ret = new Set();
    for (const row of arr) {
        for (const item of row) {
            ret.add(item);
        }
    }
    return [...ret];
}
