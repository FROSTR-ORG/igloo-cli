var nostr_p2p=function(e){"use strict";var t=Object.freeze({__proto__:null,DEBUG:!1,REQ_TIMEOUT:5e3});function n(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function r(e,...t){if(!((n=e)instanceof Uint8Array||ArrayBuffer.isView(n)&&"Uint8Array"===n.constructor.name))throw new Error("Uint8Array expected");var n;if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function i(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}const s="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,o=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),a=(e,t)=>e<<32-t|e>>>t;
/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function c(e){return"string"==typeof e&&(e=function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(e)),r(e),e}let u=class{clone(){return this._cloneInto()}};function d(e){const t=t=>e().update(c(t)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function l(e=32){if(s&&"function"==typeof s.getRandomValues)return s.getRandomValues(new Uint8Array(e));if(s&&"function"==typeof s.randomBytes)return s.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")}const f=(e,t,n)=>e&t^e&n^t&n;class h extends u{constructor(e,t,n,r){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=o(this.buffer)}update(e){i(this);const{view:t,buffer:n,blockLen:r}=this,s=(e=c(e)).length;for(let i=0;i<s;){const a=Math.min(r-this.pos,s-i);if(a!==r)n.set(e.subarray(i,i+a),this.pos),this.pos+=a,i+=a,this.pos===r&&(this.process(t,0),this.pos=0);else{const t=o(e);for(;r<=s-i;i+=r)this.process(t,i)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){i(this),function(e,t){r(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:s,isLE:a}=this;let{pos:c}=this;t[c++]=128,this.buffer.subarray(c).fill(0),this.padOffset>s-c&&(this.process(n,0),c=0);for(let e=c;e<s;e++)t[e]=0;!function(e,t,n,r){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),c=r?4:0,u=r?0:4;e.setUint32(t+c,o,r),e.setUint32(t+u,a,r)}(n,s-8,BigInt(8*this.length),a),this.process(n,0);const u=o(e),d=this.outputLen;if(d%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=d/4,f=this.get();if(l>f.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<l;e++)u.setUint32(4*e,f[e],a)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:r,finished:i,destroyed:s,pos:o}=this;return e.length=r,e.pos=o,e.finished=i,e.destroyed=s,r%t&&e.buffer.set(n),e}}const p=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),g=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),y=new Uint32Array(64);let m=class extends h{constructor(){super(64,32,8,!1),this.A=0|g[0],this.B=0|g[1],this.C=0|g[2],this.D=0|g[3],this.E=0|g[4],this.F=0|g[5],this.G=0|g[6],this.H=0|g[7]}get(){const{A:e,B:t,C:n,D:r,E:i,F:s,G:o,H:a}=this;return[e,t,n,r,i,s,o,a]}set(e,t,n,r,i,s,o,a){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|r,this.E=0|i,this.F=0|s,this.G=0|o,this.H=0|a}process(e,t){for(let n=0;n<16;n++,t+=4)y[n]=e.getUint32(t,!1);for(let e=16;e<64;e++){const t=y[e-15],n=y[e-2],r=a(t,7)^a(t,18)^t>>>3,i=a(n,17)^a(n,19)^n>>>10;y[e]=i+y[e-7]+r+y[e-16]|0}let{A:n,B:r,C:i,D:s,E:o,F:c,G:u,H:d}=this;for(let e=0;e<64;e++){const t=d+(a(o,6)^a(o,11)^a(o,25))+((l=o)&c^~l&u)+p[e]+y[e]|0,h=(a(n,2)^a(n,13)^a(n,22))+f(n,r,i)|0;d=u,u=c,c=o,o=s+t|0,s=i,i=r,r=n,n=t+h|0}var l;n=n+this.A|0,r=r+this.B|0,i=i+this.C|0,s=s+this.D|0,o=o+this.E|0,c=c+this.F|0,u=u+this.G|0,d=d+this.H|0,this.set(n,r,i,s,o,c,u,d)}roundClean(){y.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const w=d((()=>new m));function v(e){if(e>Number.MAX_SAFE_INTEGER)throw new TypeError("Number exceeds safe bounds!")}function b(e,t){if(e!==t)throw new TypeError(`Bech32 prefix does not match: ${e} !== ${t}`)}const E=new TextEncoder,_=new TextDecoder;function x(e){return E.encode(e)}function k(e){return _.decode(e)}function A(e,t){!function(e){if(null!==e.match(/[^a-fA-f0-9]/))throw new TypeError("Invalid characters in hex string: "+e);if(e.length%2!=0)throw new Error(`Length of hex string is invalid: ${e.length}`)}(e);const n=e.length/2;if(void 0===t&&(t=n),n>t)throw new TypeError(`Hex string is larger than array size: ${n} > ${t}`);return t}
/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */
function S(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function B(e,t){return!!Array.isArray(t)&&(0===t.length||(e?t.every((e=>"string"==typeof e)):t.every((e=>Number.isSafeInteger(e)))))}function I(e){if("function"!=typeof e)throw new Error("function expected");return!0}function T(e,t){if("string"!=typeof t)throw new Error(`${e}: string expected`);return!0}function O(e){if(!Number.isSafeInteger(e))throw new Error(`invalid integer: ${e}`)}function N(e){if(!Array.isArray(e))throw new Error("array expected")}function U(e,t){if(!B(!0,t))throw new Error(`${e}: array of strings expected`)}function R(e,t){if(!B(!1,t))throw new Error(`${e}: array of numbers expected`)}function L(...e){const t=e=>e,n=(e,t)=>n=>e(t(n));return{encode:e.map((e=>e.encode)).reduceRight(n,t),decode:e.map((e=>e.decode)).reduce(n,t)}}function C(e){const t="string"==typeof e?e.split(""):e,n=t.length;U("alphabet",t);const r=new Map(t.map(((e,t)=>[e,t])));return{encode:r=>(N(r),r.map((r=>{if(!Number.isSafeInteger(r)||r<0||r>=n)throw new Error(`alphabet.encode: digit index outside alphabet "${r}". Allowed: ${e}`);return t[r]}))),decode:t=>(N(t),t.map((t=>{T("alphabet.decode",t);const n=r.get(t);if(void 0===n)throw new Error(`Unknown letter: "${t}". Allowed: ${e}`);return n})))}}function Z(e=""){return T("join",e),{encode:t=>(U("join.decode",t),t.join(e)),decode:t=>(T("join.decode",t),t.split(e))}}function $(e,t,n){if(t<2)throw new Error(`convertRadix: invalid from=${t}, base cannot be less than 2`);if(n<2)throw new Error(`convertRadix: invalid to=${n}, base cannot be less than 2`);if(N(e),!e.length)return[];let r=0;const i=[],s=Array.from(e,(e=>{if(O(e),e<0||e>=t)throw new Error(`invalid integer: ${e}`);return e})),o=s.length;for(;;){let e=0,a=!0;for(let i=r;i<o;i++){const o=s[i],c=t*e,u=c+o;if(!Number.isSafeInteger(u)||c/t!==e||u-o!==c)throw new Error("convertRadix: carry overflow");const d=u/n;e=u%n;const l=Math.floor(d);if(s[i]=l,!Number.isSafeInteger(l)||l*n+e!==u)throw new Error("convertRadix: carry overflow");a&&(l?a=!1:r=i)}if(i.push(e),a)break}for(let t=0;t<e.length-1&&0===e[t];t++)i.push(0);return i.reverse()}const P=(e,t)=>0===t?e:P(t,e%t),j=(e,t)=>e+(t-P(e,t)),M=(()=>{let e=[];for(let t=0;t<40;t++)e.push(2**t);return e})();function z(e,t,n,r){if(N(e),t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(j(t,n)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${n} carryBits=${j(t,n)}`);let i=0,s=0;const o=M[t],a=M[n]-1,c=[];for(const r of e){if(O(r),r>=o)throw new Error(`convertRadix2: invalid data word=${r} from=${t}`);if(i=i<<t|r,s+t>32)throw new Error(`convertRadix2: carry overflow pos=${s} from=${t}`);for(s+=t;s>=n;s-=n)c.push((i>>s-n&a)>>>0);const e=M[s];if(void 0===e)throw new Error("invalid carry");i&=e-1}if(i=i<<n-s&a,!r&&s>=t)throw new Error("Excess padding");if(!r&&i>0)throw new Error(`Non-zero padding: ${i}`);return r&&s>0&&c.push(i>>>0),c}function q(e,t=!1){if(O(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(j(8,e)>32||j(e,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!S(n))throw new Error("radix2.encode input should be Uint8Array");return z(Array.from(n),8,e,!t)},decode:n=>(R("radix2.decode",n),Uint8Array.from(z(n,e,8,t)))}}function H(e){return I(e),function(...t){try{return e.apply(null,t)}catch(e){}}}const F=L(q(6),C("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),function(e,t="="){return O(e),T("padding",t),{encode(n){for(U("padding.encode",n);n.length*e%8;)n.push(t);return n},decode(n){U("padding.decode",n);let r=n.length;if(r*e%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;r>0&&n[r-1]===t;r--){if((r-1)*e%8==0)throw new Error("padding: invalid, string has too much padding")}return n.slice(0,r)}}}(6),Z("")),D=L(q(6),C("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),Z("")),V=(K="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",L(function(e){return O(e),{encode:t=>{if(!S(t))throw new Error("radix.encode input should be Uint8Array");return $(Array.from(t),256,e)},decode:t=>(R("radix.decode",t),Uint8Array.from($(t,e,256)))}}(58),C(K),Z("")));var K;const W=e=>{return L((n=t=>e(e(t)),O(t=4),I(n),{encode(e){if(!S(e))throw new Error("checksum.encode: input should be Uint8Array");const r=n(e).slice(0,t),i=new Uint8Array(e.length+t);return i.set(e),i.set(r,e.length),i},decode(e){if(!S(e))throw new Error("checksum.decode: input should be Uint8Array");const r=e.slice(0,-t),i=e.slice(-t),s=n(r).slice(0,t);for(let e=0;e<t;e++)if(s[e]!==i[e])throw new Error("Invalid checksum");return r}}),V);var t,n},G=L(C("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),Z("")),J=[996825010,642813549,513874426,1027748829,705979059];function Y(e){const t=e>>25;let n=(33554431&e)<<5;for(let e=0;e<J.length;e++)1==(t>>e&1)&&(n^=J[e]);return n}function Q(e,t,n=1){const r=e.length;let i=1;for(let t=0;t<r;t++){const n=e.charCodeAt(t);if(n<33||n>126)throw new Error(`Invalid prefix (${e})`);i=Y(i)^n>>5}i=Y(i);for(let t=0;t<r;t++)i=Y(i)^31&e.charCodeAt(t);for(let e of t)i=Y(i)^e;for(let e=0;e<6;e++)i=Y(i);return i^=n,G.encode(z([i%M[30]],30,5,!1))}function X(e){const t="bech32"===e?1:734539939,n=q(5),r=n.decode,i=n.encode,s=H(r);function o(e,n,r=90){T("bech32.encode prefix",e),S(n)&&(n=Array.from(n)),R("bech32.encode",n);const i=e.length;if(0===i)throw new TypeError(`Invalid prefix length ${i}`);const s=i+7+n.length;if(!1!==r&&s>r)throw new TypeError(`Length ${s} exceeds limit ${r}`);const o=e.toLowerCase(),a=Q(o,n,t);return`${o}1${G.encode(n)}${a}`}function a(e,n=90){T("bech32.decode input",e);const r=e.length;if(r<8||!1!==n&&r>n)throw new TypeError(`invalid string length: ${r} (${e}). Expected (8..${n})`);const i=e.toLowerCase();if(e!==i&&e!==e.toUpperCase())throw new Error("String must be lowercase or uppercase");const s=i.lastIndexOf("1");if(0===s||-1===s)throw new Error('Letter "1" must be present between prefix and data only');const o=i.slice(0,s),a=i.slice(s+1);if(a.length<6)throw new Error("Data must be at least 6 characters long");const c=G.decode(a).slice(0,-6),u=Q(o,c,t);if(!a.endsWith(u))throw new Error(`Invalid checksum in ${e}: expected "${u}"`);return{prefix:o,words:c}}return{encode:o,decode:a,encodeFromBytes:function(e,t){return o(e,i(t))},decodeToBytes:function(e){const{prefix:t,words:n}=a(e,!1);return{prefix:t,words:n,bytes:r(n)}},decodeUnsafe:H(a),fromWords:r,fromWordsUnsafe:s,toWords:i}}const ee=X("bech32"),te=X("bech32m"),ne=e=>W(w).encode(e),re=e=>W(w).decode(e),ie=e=>F.encode(e),se=e=>F.decode(e),oe=e=>D.encode(e),ae=e=>D.decode(e),ce={to_words:ee.toWords,to_bytes:ee.fromWords,encode:(e,t,n=!1)=>ee.encode(e,t,n),decode:(e,t=!1)=>{const{prefix:n,words:r}=ee.decode(e,t);return{prefix:n,words:r}}},ue={to_words:te.toWords,to_bytes:te.fromWords,encode:(e,t,n=!1)=>te.encode(e,t,n),decode:(e,t=!1)=>{const{prefix:n,words:r}=te.decode(e,t);return{prefix:n,words:r}}},de=BigInt(0),le=BigInt(255),fe=BigInt(256);function he(e,t,n="be"){void 0===t&&(t=function(e){if(e<=0xffn)return 1;if(e<=0xffffn)return 2;if(e<=0xffffffffn)return 4;if(e<=0xffffffffffffffffn)return 8;if(e<=0xffffffffffffffffffffffffffffffffn)return 16;if(e<=0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffn)return 32;throw new TypeError("Must specify a fixed buffer size for bigints greater than 32 bytes.")}(e));const r="le"===n,i=new ArrayBuffer(t),s=new DataView(i);let o=r?0:t-1;for(;e>de;){const t=e&le,n=Number(t);r?s.setUint8(o++,n):s.setUint8(o--,n),e=(e-t)/fe}return new Uint8Array(i)}function pe(e,t,n="be"){void 0===t&&(t=function(e){if(e<=255)return 1;if(e<=65535)return 2;if(e<=4294967295)return 4;throw new TypeError("Numbers larger than 4 bytes must specify a fixed size!")}(e));const r="le"===n,i=new ArrayBuffer(t),s=new DataView(i);let o=r?0:t-1;for(;e>0;){const t=255&e;r?s.setUint8(o++,e):s.setUint8(o--,e),e=(e-t)/256}return new Uint8Array(i)}function ge(e){return null===e.match(/[^a-fA-F0-9]/)&&e.length%2==0}function ye(e){return!("string"!=typeof e||!ge(e))||("number"==typeof e||"bigint"==typeof e||e instanceof Uint8Array||!(!Array.isArray(e)||!e.every((e=>"number"==typeof e))))}function me(e,t,n="be"){void 0===t&&(t=e.length),function(e,t){if(e.length>t)throw new TypeError(`Data is larger than array size: ${e.length} > ${t}`)}(e,t);const r=new Uint8Array(t).fill(0),i="be"===n?0:t-e.length;return r.set(e,i),r}function we(e){let t,n=0;const r=e.reduce(((e,t)=>e+t.length),0),i=new Uint8Array(r);for(t=0;t<e.length;t++){const r=e[t];i.set(r,n),n+=r.length}return i}function ve(e,t){return"bigint"==typeof t?`${t}n`:t}function be(e,t){return"string"==typeof t&&/^[0-9]+n$/.test(t)?BigInt(t.slice(0,-1)):t}function Ee(e,t,n){if(e instanceof ArrayBuffer)return new Uint8Array(e);if(e instanceof Uint8Array)return me(e,t,n);if(Array.isArray(e)){return we(e.map((e=>Ee(e,t,n))))}if("string"==typeof e)return function(e,t,n="le"){t=A(e,t);const r="le"===n,i=new ArrayBuffer(t),s=new DataView(i);let o=r?0:t-1;for(let t=0;t<e.length;t+=2){const n=e.substring(t,t+2),i=parseInt(n,16);r?s.setUint8(o++,i):s.setUint8(o--,i)}return new Uint8Array(i)}(e,t,n);if("bigint"==typeof e)return he(e,t,n);if("number"==typeof e)return pe(e,t,n);if("boolean"==typeof e)return Uint8Array.of(e?1:0);throw new TypeError("Unsupported format:"+String(typeof e))}class _e extends Uint8Array{static{this.num=xe}static{this.big=Ae}static{this.bin=ke}static{this.raw=Se}static{this.str=Be}static{this.hex=Ie}static{this.bytes=$e}static{this.json=Te}static{this.base64=Oe}static{this.b64url=Ne}static{this.bech32=Ue}static{this.bech32m=Re}static{this.b58chk=Le}static{this.encode=x}static{this.decode=k}static{this.parse=Ce}static{this.is_bytes=ye}static{this.is_hex=ge}static{this.is_equal=Ze}static random(e=32){const t=l(e);return new _e(t,e)}static now(e=4){const t=Math.floor(Date.now()/1e3);return new _e(t,e)}constructor(e,t,n){if(e instanceof _e&&void 0===t)return e;super(Ee(e,t,n))}get arr(){return[...this]}get num(){return this.to_num()}get big(){return this.to_big()}get str(){return this.to_str()}get hex(){return this.to_hex()}get raw(){return new Uint8Array(this)}get bin(){return this.to_bin()}get b58chk(){return this.to_b58chk()}get base64(){return this.to_base64()}get b64url(){return this.to_b64url()}get digest(){return this.to_hash()}get id(){return this.to_hash().hex}get stream(){return new Pe(this)}to_num(e="be"){return function(e){let t=0;for(let n=e.length-1;n>=0;n--)t=256*t+e[n],v(t);return t}("be"===e?this.reverse():this)}to_big(e="be"){return function(e){let t=BigInt(0);for(let n=e.length-1;n>=0;n--)t=t*fe+BigInt(e[n]);return BigInt(t)}("be"===e?this.reverse():this)}to_bin(){return function(e){const t=new Array(8*e.length);let n=0;for(const r of e){if(r>255)throw new Error(`Invalid byte value: ${r}. Byte values must be between 0 and 255.`);for(let e=7;e>=0;e--,n++)t[n]=r>>e&1}return t.join("")}(this)}to_hash(){const e=w(this);return new _e(e)}to_json(e){void 0===e&&(e=be);const t=k(this);return JSON.parse(t,e)}to_bech32(e,t){const{encode:n,to_words:r}=ce;return n(e,r(this),t)}to_bech32m(e,t){const{encode:n,to_words:r}=ue;return n(e,r(this),t)}to_str(){return k(this)}to_hex(){return function(e){let t="";for(let n=0;n<e.length;n++)t+=e[n].toString(16).padStart(2,"0");return t}(this)}to_bytes(){return new Uint8Array(this)}to_b58chk(){return ne(this)}to_base64(){return ie(this)}to_b64url(){return oe(this)}append(e){return _e.join([this,_e.bytes(e)])}equals(e){return $e(e).hex===this.hex}prepend(e){return _e.join([_e.bytes(e),this])}reverse(){const e=new Uint8Array(this).reverse();return new _e(e)}slice(e,t){const n=new Uint8Array(this).slice(e,t);return new _e(n)}set(e,t){this.set(e,t)}subarray(e,t){const n=new Uint8Array(this).subarray(e,t);return new _e(n)}write(e,t){const n=_e.bytes(e);this.set(n,t)}add_varint(e){const t=_e.calc_varint(this.length,e);return _e.join([t,this])}toJSON(){return this.hex}toString(){return this.hex}static from(e){return new _e(Uint8Array.from(e))}static of(...e){return new _e(Uint8Array.of(...e))}static join(e){const t=we(e.map((e=>_e.bytes(e))));return new _e(t)}static sort(e,t){const n=e.map((e=>$e(e,t).hex));return n.sort(),n.map((e=>_e.hex(e,t)))}static calc_varint(e,t){if(e<253)return _e.num(e,1);if(e<65536)return _e.of(253,..._e.num(e,2,t));if(e<4294967296)return _e.of(254,..._e.num(e,4,t));if(BigInt(e)<0x10000000000000000n)return _e.of(255,..._e.num(e,8,t));throw new Error(`Value is too large: ${e}`)}}function xe(e,t,n){return new _e(e,t,n)}function ke(e,t,n){return new _e(function(e){const t=e.split("").map(Number);if(t.length%8!=0)throw new Error(`Binary array is invalid length: ${e.length}`);const n=new Uint8Array(t.length/8);for(let e=0,r=0;e<t.length;e+=8,r++){let i=0;for(let n=0;n<8;n++)i|=t[e+n]<<7-n;n[r]=i}return n}(e),t,n)}function Ae(e,t,n){return new _e(e,t,n)}function Se(e,t,n){return new _e(e,t,n)}function Be(e,t,n){return new _e(x(e),t,n)}function Ie(e,t,n){return new _e(e,t,n)}function Te(e,t){void 0===t&&(t=ve);const n=JSON.stringify(e,t);return new _e(x(n))}function Oe(e){return new _e(se(e))}function Ne(e){return new _e(ae(e))}function Ue(e,t,n){const{decode:r,to_bytes:i}=ce,{prefix:s,words:o}=r(e,t),a=i(o);return"string"==typeof n&&b(s,n),new _e(a)}function Re(e,t,n){const{decode:r,to_bytes:i}=ue,{prefix:s,words:o}=r(e,t),a=i(o);return"string"==typeof n&&b(s,n),new _e(a)}function Le(e){return new _e(re(e))}function Ce(e,t,n){const r=function(e,t,n){const r=e.length,i=n/t;if(n%t!=0)throw new TypeError(`Invalid parameters: ${n} % ${t} !== 0`);if(r!==n)throw new TypeError(`Invalid data stream: ${r} !== ${n}`);if(r%t!=0)throw new TypeError(`Invalid data stream: ${r} % ${t} !== 0`);const s=new Array(i);for(let n=0;n<i;n++){const r=n*t;s[n]=e.subarray(r,r+t)}return s}(Ee(e),t,n);return r.map((e=>_e.bytes(e)))}function Ze(e,t){return new _e(e).hex===new _e(t).hex}function $e(e,t,n){return new _e(e,t,n)}class Pe{constructor(e){this.data=_e.bytes(e),this.size=this.data.length}peek(e){if(e>this.size)throw new Error(`Size greater than stream: ${e} > ${this.size}`);return new _e(this.data.slice(0,e))}read(e){const t=this.peek(e);return this.data=this.data.slice(e),this.size=this.data.length,t}read_varint(e){const t=this.read(1).num;switch(!0){case t>=0&&t<253:return t;case 253===t:return this.read(2).to_num(e);case 254===t:return this.read(4).to_num(e);case 255===t:return this.read(8).to_num(e);default:throw new Error(`Varint is out of range: ${t}`)}}}let je=class extends u{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,function(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");n(e.outputLen),n(e.blockLen)}(e);const r=c(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?e.create().update(r).digest():r);for(let e=0;e<s.length;e++)s[e]^=54;this.iHash.update(s),this.oHash=e.create();for(let e=0;e<s.length;e++)s[e]^=106;this.oHash.update(s),s.fill(0)}update(e){return i(this),this.iHash.update(e),this}digestInto(e){i(this),r(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:r,destroyed:i,blockLen:s,outputLen:o}=this;return e.finished=r,e.destroyed=i,e.blockLen=s,e.outputLen=o,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const Me=(e,t,n)=>new je(e,t).update(n).digest();Me.create=(e,t)=>new je(e,t)
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */;const ze=BigInt(0),qe=BigInt(1),He=BigInt(2);function Fe(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function De(e){if(!Fe(e))throw new Error("Uint8Array expected")}function Ve(e,t){if("boolean"!=typeof t)throw new Error(e+" boolean expected, got "+t)}const Ke=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function We(e){De(e);let t="";for(let n=0;n<e.length;n++)t+=Ke[e[n]];return t}function Ge(e){const t=e.toString(16);return 1&t.length?"0"+t:t}function Je(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return""===e?ze:BigInt("0x"+e)}const Ye=48,Qe=57,Xe=65,et=70,tt=97,nt=102;function rt(e){return e>=Ye&&e<=Qe?e-Ye:e>=Xe&&e<=et?e-(Xe-10):e>=tt&&e<=nt?e-(tt-10):void 0}function it(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let t=0,i=0;t<n;t++,i+=2){const n=rt(e.charCodeAt(i)),s=rt(e.charCodeAt(i+1));if(void 0===n||void 0===s){const t=e[i]+e[i+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+i)}r[t]=16*n+s}return r}function st(e){return Je(We(e))}function ot(e){return De(e),Je(We(Uint8Array.from(e).reverse()))}function at(e,t){return it(e.toString(16).padStart(2*t,"0"))}function ct(e,t){return at(e,t).reverse()}function ut(e,t,n){let r;if("string"==typeof t)try{r=it(t)}catch(t){throw new Error(e+" must be hex string or Uint8Array, cause: "+t)}else{if(!Fe(t))throw new Error(e+" must be hex string or Uint8Array");r=Uint8Array.from(t)}const i=r.length;if("number"==typeof n&&i!==n)throw new Error(e+" of length "+n+" expected, got "+i);return r}function dt(...e){let t=0;for(let n=0;n<e.length;n++){const r=e[n];De(r),t+=r.length}const n=new Uint8Array(t);for(let t=0,r=0;t<e.length;t++){const i=e[t];n.set(i,r),r+=i.length}return n}const lt=e=>"bigint"==typeof e&&ze<=e;function ft(e,t,n){return lt(e)&&lt(t)&&lt(n)&&t<=e&&e<n}function ht(e,t,n,r){if(!ft(t,n,r))throw new Error("expected valid "+e+": "+n+" <= n < "+r+", got "+t)}function pt(e){let t;for(t=0;e>ze;e>>=qe,t+=1);return t}const gt=e=>(He<<BigInt(e-1))-qe,yt=e=>new Uint8Array(e),mt=e=>Uint8Array.from(e);function wt(e,t,n){if("number"!=typeof e||e<2)throw new Error("hashLen must be a number");if("number"!=typeof t||t<2)throw new Error("qByteLen must be a number");if("function"!=typeof n)throw new Error("hmacFn must be a function");let r=yt(e),i=yt(e),s=0;const o=()=>{r.fill(1),i.fill(0),s=0},a=(...e)=>n(i,r,...e),c=(e=yt())=>{i=a(mt([0]),e),r=a(),0!==e.length&&(i=a(mt([1]),e),r=a())},u=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let e=0;const n=[];for(;e<t;){r=a();const t=r.slice();n.push(t),e+=r.length}return dt(...n)};return(e,t)=>{let n;for(o(),c(e);!(n=t(u()));)c();return o(),n}}const vt={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||Fe(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function bt(e,t,n={}){const r=(t,n,r)=>{const i=vt[n];if("function"!=typeof i)throw new Error("invalid validator function");const s=e[t];if(!(r&&void 0===s||i(s,e)))throw new Error("param "+String(t)+" is invalid. Expected "+n+", got "+s)};for(const[e,n]of Object.entries(t))r(e,n,!1);for(const[e,t]of Object.entries(n))r(e,t,!0);return e}function Et(e){const t=new WeakMap;return(n,...r)=>{const i=t.get(n);if(void 0!==i)return i;const s=e(n,...r);return t.set(n,s),s}}var _t=Object.freeze({__proto__:null,aInRange:ht,abool:Ve,abytes:De,bitGet:function(e,t){return e>>BigInt(t)&qe},bitLen:pt,bitMask:gt,bitSet:function(e,t,n){return e|(n?qe:ze)<<BigInt(t)},bytesToHex:We,bytesToNumberBE:st,bytesToNumberLE:ot,concatBytes:dt,createHmacDrbg:wt,ensureBytes:ut,equalBytes:function(e,t){if(e.length!==t.length)return!1;let n=0;for(let r=0;r<e.length;r++)n|=e[r]^t[r];return 0===n},hexToBytes:it,hexToNumber:Je,inRange:ft,isBytes:Fe,memoized:Et,notImplemented:()=>{throw new Error("not implemented")},numberToBytesBE:at,numberToBytesLE:ct,numberToHexUnpadded:Ge,numberToVarBytesBE:function(e){return it(Ge(e))},utf8ToBytes:function(e){if("string"!=typeof e)throw new Error("string expected");return new Uint8Array((new TextEncoder).encode(e))},validateObject:bt});
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const xt=BigInt(0),kt=BigInt(1),At=BigInt(2),St=BigInt(3),Bt=BigInt(4),It=BigInt(5),Tt=BigInt(8);function Ot(e,t){const n=e%t;return n>=xt?n:t+n}function Nt(e,t,n){if(t<xt)throw new Error("invalid exponent, negatives unsupported");if(n<=xt)throw new Error("invalid modulus");if(n===kt)return xt;let r=kt;for(;t>xt;)t&kt&&(r=r*e%n),e=e*e%n,t>>=kt;return r}function Ut(e,t,n){let r=e;for(;t-- >xt;)r*=r,r%=n;return r}function Rt(e,t){if(e===xt)throw new Error("invert: expected non-zero number");if(t<=xt)throw new Error("invert: expected positive modulus, got "+t);let n=Ot(e,t),r=t,i=xt,s=kt;for(;n!==xt;){const e=r%n,t=i-s*(r/n);r=n,n=e,i=s,s=t}if(r!==kt)throw new Error("invert: does not exist");return Ot(i,t)}function Lt(e){if(e%Bt===St){const t=(e+kt)/Bt;return function(e,n){const r=e.pow(n,t);if(!e.eql(e.sqr(r),n))throw new Error("Cannot find square root");return r}}if(e%Tt===It){const t=(e-It)/Tt;return function(e,n){const r=e.mul(n,At),i=e.pow(r,t),s=e.mul(n,i),o=e.mul(e.mul(s,At),i),a=e.mul(s,e.sub(o,e.ONE));if(!e.eql(e.sqr(a),n))throw new Error("Cannot find square root");return a}}return function(e){const t=(e-kt)/At;let n,r,i;for(n=e-kt,r=0;n%At===xt;n/=At,r++);for(i=At;i<e&&Nt(i,t,e)!==e-kt;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(1===r){const t=(e+kt)/Bt;return function(e,n){const r=e.pow(n,t);if(!e.eql(e.sqr(r),n))throw new Error("Cannot find square root");return r}}const s=(n+kt)/At;return function(e,o){if(e.pow(o,t)===e.neg(e.ONE))throw new Error("Cannot find square root");let a=r,c=e.pow(e.mul(e.ONE,i),n),u=e.pow(o,s),d=e.pow(o,n);for(;!e.eql(d,e.ONE);){if(e.eql(d,e.ZERO))return e.ZERO;let t=1;for(let n=e.sqr(d);t<a&&!e.eql(n,e.ONE);t++)n=e.sqr(n);const n=e.pow(c,kt<<BigInt(a-t-1));c=e.sqr(n),u=e.mul(u,n),d=e.mul(d,c),a=t}return u}}(e)}const Ct=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Zt(e,t){const n=void 0!==t?t:e.toString(2).length;return{nBitLength:n,nByteLength:Math.ceil(n/8)}}function $t(e,t,n=!1,r={}){if(e<=xt)throw new Error("invalid field: expected ORDER > 0, got "+e);const{nBitLength:i,nByteLength:s}=Zt(e,t);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:e,isLE:n,BITS:i,BYTES:s,MASK:gt(i),ZERO:xt,ONE:kt,create:t=>Ot(t,e),isValid:t=>{if("bigint"!=typeof t)throw new Error("invalid field element: expected bigint, got "+typeof t);return xt<=t&&t<e},is0:e=>e===xt,isOdd:e=>(e&kt)===kt,neg:t=>Ot(-t,e),eql:(e,t)=>e===t,sqr:t=>Ot(t*t,e),add:(t,n)=>Ot(t+n,e),sub:(t,n)=>Ot(t-n,e),mul:(t,n)=>Ot(t*n,e),pow:(e,t)=>function(e,t,n){if(n<xt)throw new Error("invalid exponent, negatives unsupported");if(n===xt)return e.ONE;if(n===kt)return t;let r=e.ONE,i=t;for(;n>xt;)n&kt&&(r=e.mul(r,i)),i=e.sqr(i),n>>=kt;return r}(a,e,t),div:(t,n)=>Ot(t*Rt(n,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>Rt(t,e),sqrt:r.sqrt||(t=>(o||(o=Lt(e)),o(a,t))),invertBatch:e=>function(e,t){const n=new Array(t.length),r=t.reduce(((t,r,i)=>e.is0(r)?t:(n[i]=t,e.mul(t,r))),e.ONE),i=e.inv(r);return t.reduceRight(((t,r,i)=>e.is0(r)?t:(n[i]=e.mul(t,n[i]),e.mul(t,r))),i),n}(a,e),cmov:(e,t,n)=>n?t:e,toBytes:e=>n?ct(e,s):at(e,s),fromBytes:e=>{if(e.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+e.length);return n?ot(e):st(e)}});return Object.freeze(a)}function Pt(e){if("bigint"!=typeof e)throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function jt(e){const t=Pt(e);return t+Math.ceil(t/2)}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const Mt=BigInt(0),zt=BigInt(1);function qt(e,t){const n=t.negate();return e?n:t}function Ht(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function Ft(e,t){Ht(e,t);return{windows:Math.ceil(t/e)+1,windowSize:2**(e-1)}}const Dt=new WeakMap,Vt=new WeakMap;function Kt(e){return Vt.get(e)||1}function Wt(e,t,n,r){if(function(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach(((e,n)=>{if(!(e instanceof t))throw new Error("invalid point at index "+n)}))}(n,e),function(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach(((e,n)=>{if(!t.isValid(e))throw new Error("invalid scalar at index "+n)}))}(r,t),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const i=e.ZERO,s=pt(BigInt(n.length)),o=s>12?s-3:s>4?s-2:s?2:1,a=(1<<o)-1,c=new Array(a+1).fill(i);let u=i;for(let e=Math.floor((t.BITS-1)/o)*o;e>=0;e-=o){c.fill(i);for(let t=0;t<r.length;t++){const i=r[t],s=Number(i>>BigInt(e)&BigInt(a));c[s]=c[s].add(n[t])}let t=i;for(let e=c.length-1,n=i;e>0;e--)n=n.add(c[e]),t=t.add(n);if(u=u.add(t),0!==e)for(let e=0;e<o;e++)u=u.double()}return u}function Gt(e){return bt(e.Fp,Ct.reduce(((e,t)=>(e[t]="function",e)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"})),bt(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Zt(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Jt(e){void 0!==e.lowS&&Ve("lowS",e.lowS),void 0!==e.prehash&&Ve("prehash",e.prehash)}const{bytesToNumberBE:Yt,hexToBytes:Qt}=_t;class Xt extends Error{constructor(e=""){super(e)}}const en={Err:Xt,_tlv:{encode:(e,t)=>{const{Err:n}=en;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(1&t.length)throw new n("tlv.encode: unpadded data");const r=t.length/2,i=Ge(r);if(i.length/2&128)throw new n("tlv.encode: long form length too big");const s=r>127?Ge(i.length/2|128):"";return Ge(e)+s+i+t},decode(e,t){const{Err:n}=en;let r=0;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length<2||t[r++]!==e)throw new n("tlv.decode: wrong tlv");const i=t[r++];let s=0;if(!!(128&i)){const e=127&i;if(!e)throw new n("tlv.decode(long): indefinite length not supported");if(e>4)throw new n("tlv.decode(long): byte length is too big");const o=t.subarray(r,r+e);if(o.length!==e)throw new n("tlv.decode: length bytes not complete");if(0===o[0])throw new n("tlv.decode(long): zero leftmost byte");for(const e of o)s=s<<8|e;if(r+=e,s<128)throw new n("tlv.decode(long): not minimal encoding")}else s=i;const o=t.subarray(r,r+s);if(o.length!==s)throw new n("tlv.decode: wrong value length");return{v:o,l:t.subarray(r+s)}}},_int:{encode(e){const{Err:t}=en;if(e<tn)throw new t("integer: negative integers are not allowed");let n=Ge(e);if(8&Number.parseInt(n[0],16)&&(n="00"+n),1&n.length)throw new t("unexpected DER parsing assertion: unpadded hex");return n},decode(e){const{Err:t}=en;if(128&e[0])throw new t("invalid signature integer: negative");if(0===e[0]&&!(128&e[1]))throw new t("invalid signature integer: unnecessary leading zero");return Yt(e)}},toSig(e){const{Err:t,_int:n,_tlv:r}=en,i="string"==typeof e?Qt(e):e;De(i);const{v:s,l:o}=r.decode(48,i);if(o.length)throw new t("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,s),{v:u,l:d}=r.decode(2,c);if(d.length)throw new t("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(u)}},hexFromSig(e){const{_tlv:t,_int:n}=en,r=t.encode(2,n.encode(e.r))+t.encode(2,n.encode(e.s));return t.encode(48,r)}},tn=BigInt(0),nn=BigInt(1);BigInt(2);const rn=BigInt(3);function sn(e){const t=function(e){const t=Gt(e);bt(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:i}=t;if(n){if(!r.eql(i,r.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if("object"!=typeof n||"bigint"!=typeof n.beta||"function"!=typeof n.splitScalar)throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:n}=t,r=$t(t.n,t.nBitLength),i=t.toBytes||((e,t,r)=>{const i=t.toAffine();return dt(Uint8Array.from([4]),n.toBytes(i.x),n.toBytes(i.y))}),s=t.fromBytes||(e=>{const t=e.subarray(1);return{x:n.fromBytes(t.subarray(0,n.BYTES)),y:n.fromBytes(t.subarray(n.BYTES,2*n.BYTES))}});function o(e){const{a:r,b:i}=t,s=n.sqr(e),o=n.mul(s,e);return n.add(n.add(o,n.mul(e,r)),i)}if(!n.eql(n.sqr(t.Gy),o(t.Gx)))throw new Error("bad generator point: equation left != right");function a(e){const{allowedPrivateKeyLengths:n,nByteLength:r,wrapPrivateKey:i,n:s}=t;if(n&&"bigint"!=typeof e){if(Fe(e)&&(e=We(e)),"string"!=typeof e||!n.includes(e.length))throw new Error("invalid private key");e=e.padStart(2*r,"0")}let o;try{o="bigint"==typeof e?e:st(ut("private key",e,r))}catch(t){throw new Error("invalid private key, expected hex or "+r+" bytes, got "+typeof e)}return i&&(o=Ot(o,s)),ht("private key",o,nn,s),o}function c(e){if(!(e instanceof l))throw new Error("ProjectivePoint expected")}const u=Et(((e,t)=>{const{px:r,py:i,pz:s}=e;if(n.eql(s,n.ONE))return{x:r,y:i};const o=e.is0();null==t&&(t=o?n.ONE:n.inv(s));const a=n.mul(r,t),c=n.mul(i,t),u=n.mul(s,t);if(o)return{x:n.ZERO,y:n.ZERO};if(!n.eql(u,n.ONE))throw new Error("invZ was invalid");return{x:a,y:c}})),d=Et((e=>{if(e.is0()){if(t.allowInfinityPoint&&!n.is0(e.py))return;throw new Error("bad point: ZERO")}const{x:r,y:i}=e.toAffine();if(!n.isValid(r)||!n.isValid(i))throw new Error("bad point: x or y not FE");const s=n.sqr(i),a=o(r);if(!n.eql(s,a))throw new Error("bad point: equation left != right");if(!e.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0}));class l{constructor(e,t,r){if(this.px=e,this.py=t,this.pz=r,null==e||!n.isValid(e))throw new Error("x required");if(null==t||!n.isValid(t))throw new Error("y required");if(null==r||!n.isValid(r))throw new Error("z required");Object.freeze(this)}static fromAffine(e){const{x:t,y:r}=e||{};if(!e||!n.isValid(t)||!n.isValid(r))throw new Error("invalid affine point");if(e instanceof l)throw new Error("projective point not allowed");const i=e=>n.eql(e,n.ZERO);return i(t)&&i(r)?l.ZERO:new l(t,r,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){const t=n.invertBatch(e.map((e=>e.pz)));return e.map(((e,n)=>e.toAffine(t[n]))).map(l.fromAffine)}static fromHex(e){const t=l.fromAffine(s(ut("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return l.BASE.multiply(a(e))}static msm(e,t){return Wt(l,r,e,t)}_setWindowSize(e){h.setWindowSize(this,e)}assertValidity(){d(this)}hasEvenY(){const{y:e}=this.toAffine();if(n.isOdd)return!n.isOdd(e);throw new Error("Field doesn't support isOdd")}equals(e){c(e);const{px:t,py:r,pz:i}=this,{px:s,py:o,pz:a}=e,u=n.eql(n.mul(t,a),n.mul(s,i)),d=n.eql(n.mul(r,a),n.mul(o,i));return u&&d}negate(){return new l(this.px,n.neg(this.py),this.pz)}double(){const{a:e,b:r}=t,i=n.mul(r,rn),{px:s,py:o,pz:a}=this;let c=n.ZERO,u=n.ZERO,d=n.ZERO,f=n.mul(s,s),h=n.mul(o,o),p=n.mul(a,a),g=n.mul(s,o);return g=n.add(g,g),d=n.mul(s,a),d=n.add(d,d),c=n.mul(e,d),u=n.mul(i,p),u=n.add(c,u),c=n.sub(h,u),u=n.add(h,u),u=n.mul(c,u),c=n.mul(g,c),d=n.mul(i,d),p=n.mul(e,p),g=n.sub(f,p),g=n.mul(e,g),g=n.add(g,d),d=n.add(f,f),f=n.add(d,f),f=n.add(f,p),f=n.mul(f,g),u=n.add(u,f),p=n.mul(o,a),p=n.add(p,p),f=n.mul(p,g),c=n.sub(c,f),d=n.mul(p,h),d=n.add(d,d),d=n.add(d,d),new l(c,u,d)}add(e){c(e);const{px:r,py:i,pz:s}=this,{px:o,py:a,pz:u}=e;let d=n.ZERO,f=n.ZERO,h=n.ZERO;const p=t.a,g=n.mul(t.b,rn);let y=n.mul(r,o),m=n.mul(i,a),w=n.mul(s,u),v=n.add(r,i),b=n.add(o,a);v=n.mul(v,b),b=n.add(y,m),v=n.sub(v,b),b=n.add(r,s);let E=n.add(o,u);return b=n.mul(b,E),E=n.add(y,w),b=n.sub(b,E),E=n.add(i,s),d=n.add(a,u),E=n.mul(E,d),d=n.add(m,w),E=n.sub(E,d),h=n.mul(p,b),d=n.mul(g,w),h=n.add(d,h),d=n.sub(m,h),h=n.add(m,h),f=n.mul(d,h),m=n.add(y,y),m=n.add(m,y),w=n.mul(p,w),b=n.mul(g,b),m=n.add(m,w),w=n.sub(y,w),w=n.mul(p,w),b=n.add(b,w),y=n.mul(m,b),f=n.add(f,y),y=n.mul(E,b),d=n.mul(v,d),d=n.sub(d,y),y=n.mul(v,m),h=n.mul(E,h),h=n.add(h,y),new l(d,f,h)}subtract(e){return this.add(e.negate())}is0(){return this.equals(l.ZERO)}wNAF(e){return h.wNAFCached(this,e,l.normalizeZ)}multiplyUnsafe(e){const{endo:r,n:i}=t;ht("scalar",e,tn,i);const s=l.ZERO;if(e===tn)return s;if(this.is0()||e===nn)return this;if(!r||h.hasPrecomputes(this))return h.wNAFCachedUnsafe(this,e,l.normalizeZ);let{k1neg:o,k1:a,k2neg:c,k2:u}=r.splitScalar(e),d=s,f=s,p=this;for(;a>tn||u>tn;)a&nn&&(d=d.add(p)),u&nn&&(f=f.add(p)),p=p.double(),a>>=nn,u>>=nn;return o&&(d=d.negate()),c&&(f=f.negate()),f=new l(n.mul(f.px,r.beta),f.py,f.pz),d.add(f)}multiply(e){const{endo:r,n:i}=t;let s,o;if(ht("scalar",e,nn,i),r){const{k1neg:t,k1:i,k2neg:a,k2:c}=r.splitScalar(e);let{p:u,f:d}=this.wNAF(i),{p:f,f:p}=this.wNAF(c);u=h.constTimeNegate(t,u),f=h.constTimeNegate(a,f),f=new l(n.mul(f.px,r.beta),f.py,f.pz),s=u.add(f),o=d.add(p)}else{const{p:t,f:n}=this.wNAF(e);s=t,o=n}return l.normalizeZ([s,o])[0]}multiplyAndAddUnsafe(e,t,n){const r=l.BASE,i=(e,t)=>t!==tn&&t!==nn&&e.equals(r)?e.multiply(t):e.multiplyUnsafe(t),s=i(this,t).add(i(e,n));return s.is0()?void 0:s}toAffine(e){return u(this,e)}isTorsionFree(){const{h:e,isTorsionFree:n}=t;if(e===nn)return!0;if(n)return n(l,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:e,clearCofactor:n}=t;return e===nn?this:n?n(l,this):this.multiplyUnsafe(t.h)}toRawBytes(e=!0){return Ve("isCompressed",e),this.assertValidity(),i(l,this,e)}toHex(e=!0){return Ve("isCompressed",e),We(this.toRawBytes(e))}}l.BASE=new l(t.Gx,t.Gy,n.ONE),l.ZERO=new l(n.ZERO,n.ONE,n.ZERO);const f=t.nBitLength,h=(p=l,g=t.endo?Math.ceil(f/2):f,{constTimeNegate:qt,hasPrecomputes:e=>1!==Kt(e),unsafeLadder(e,t,n=p.ZERO){let r=e;for(;t>Mt;)t&zt&&(n=n.add(r)),r=r.double(),t>>=zt;return n},precomputeWindow(e,t){const{windows:n,windowSize:r}=Ft(t,g),i=[];let s=e,o=s;for(let e=0;e<n;e++){o=s,i.push(o);for(let e=1;e<r;e++)o=o.add(s),i.push(o);s=o.double()}return i},wNAF(e,t,n){const{windows:r,windowSize:i}=Ft(e,g);let s=p.ZERO,o=p.BASE;const a=BigInt(2**e-1),c=2**e,u=BigInt(e);for(let e=0;e<r;e++){const r=e*i;let d=Number(n&a);n>>=u,d>i&&(d-=c,n+=zt);const l=r,f=r+Math.abs(d)-1,h=e%2!=0,p=d<0;0===d?o=o.add(qt(h,t[l])):s=s.add(qt(p,t[f]))}return{p:s,f:o}},wNAFUnsafe(e,t,n,r=p.ZERO){const{windows:i,windowSize:s}=Ft(e,g),o=BigInt(2**e-1),a=2**e,c=BigInt(e);for(let e=0;e<i;e++){const i=e*s;if(n===Mt)break;let u=Number(n&o);if(n>>=c,u>s&&(u-=a,n+=zt),0===u)continue;let d=t[i+Math.abs(u)-1];u<0&&(d=d.negate()),r=r.add(d)}return r},getPrecomputes(e,t,n){let r=Dt.get(t);return r||(r=this.precomputeWindow(t,e),1!==e&&Dt.set(t,n(r))),r},wNAFCached(e,t,n){const r=Kt(e);return this.wNAF(r,this.getPrecomputes(r,e,n),t)},wNAFCachedUnsafe(e,t,n,r){const i=Kt(e);return 1===i?this.unsafeLadder(e,t,r):this.wNAFUnsafe(i,this.getPrecomputes(i,e,n),t,r)},setWindowSize(e,t){Ht(t,g),Vt.set(e,t),Dt.delete(e)}});var p,g;return{CURVE:t,ProjectivePoint:l,normPrivateKeyToScalar:a,weierstrassEquation:o,isWithinCurveOrder:function(e){return ft(e,nn,t.n)}}}function on(e){const t=function(e){const t=Gt(e);return bt(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:n,n:r}=t,i=n.BYTES+1,s=2*n.BYTES+1;function o(e){return Ot(e,r)}function a(e){return Rt(e,r)}const{ProjectivePoint:c,normPrivateKeyToScalar:u,weierstrassEquation:d,isWithinCurveOrder:l}=sn({...t,toBytes(e,t,r){const i=t.toAffine(),s=n.toBytes(i.x),o=dt;return Ve("isCompressed",r),r?o(Uint8Array.from([t.hasEvenY()?2:3]),s):o(Uint8Array.from([4]),s,n.toBytes(i.y))},fromBytes(e){const t=e.length,r=e[0],o=e.subarray(1);if(t!==i||2!==r&&3!==r){if(t===s&&4===r){return{x:n.fromBytes(o.subarray(0,n.BYTES)),y:n.fromBytes(o.subarray(n.BYTES,2*n.BYTES))}}throw new Error("invalid Point, expected length of "+i+", or uncompressed "+s+", got "+t)}{const e=st(o);if(!ft(e,nn,n.ORDER))throw new Error("Point is not on curve");const t=d(e);let i;try{i=n.sqrt(t)}catch(e){const t=e instanceof Error?": "+e.message:"";throw new Error("Point is not on curve"+t)}return!(1&~r)!==((i&nn)===nn)&&(i=n.neg(i)),{x:e,y:i}}}}),f=e=>We(at(e,t.nByteLength));function h(e){return e>r>>nn}const p=(e,t,n)=>st(e.slice(t,n));class g{constructor(e,t,n){this.r=e,this.s=t,this.recovery=n,this.assertValidity()}static fromCompact(e){const n=t.nByteLength;return e=ut("compactSignature",e,2*n),new g(p(e,0,n),p(e,n,2*n))}static fromDER(e){const{r:t,s:n}=en.toSig(ut("DER",e));return new g(t,n)}assertValidity(){ht("r",this.r,nn,r),ht("s",this.s,nn,r)}addRecoveryBit(e){return new g(this.r,this.s,e)}recoverPublicKey(e){const{r:r,s:i,recovery:s}=this,u=v(ut("msgHash",e));if(null==s||![0,1,2,3].includes(s))throw new Error("recovery id invalid");const d=2===s||3===s?r+t.n:r;if(d>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const l=1&s?"03":"02",h=c.fromHex(l+f(d)),p=a(d),g=o(-u*p),y=o(i*p),m=c.BASE.multiplyAndAddUnsafe(h,g,y);if(!m)throw new Error("point at infinify");return m.assertValidity(),m}hasHighS(){return h(this.s)}normalizeS(){return this.hasHighS()?new g(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return it(this.toDERHex())}toDERHex(){return en.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return it(this.toCompactHex())}toCompactHex(){return f(this.r)+f(this.s)}}const y={isValidPrivateKey(e){try{return u(e),!0}catch(e){return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const e=jt(t.n);return function(e,t,n=!1){const r=e.length,i=Pt(t),s=jt(t);if(r<16||r<s||r>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+r);const o=Ot(n?ot(e):st(e),t-kt)+kt;return n?ct(o,i):at(o,i)}(t.randomBytes(e),t.n)},precompute:(e=8,t=c.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)};function m(e){const t=Fe(e),n="string"==typeof e,r=(t||n)&&e.length;return t?r===i||r===s:n?r===2*i||r===2*s:e instanceof c}const w=t.bits2int||function(e){if(e.length>8192)throw new Error("input is too large");const n=st(e),r=8*e.length-t.nBitLength;return r>0?n>>BigInt(r):n},v=t.bits2int_modN||function(e){return o(w(e))},b=gt(t.nBitLength);function E(e){return ht("num < 2^"+t.nBitLength,e,tn,b),at(e,t.nByteLength)}function _(e,r,i=x){if(["recovered","canonical"].some((e=>e in i)))throw new Error("sign() legacy options not supported");const{hash:s,randomBytes:d}=t;let{lowS:f,prehash:p,extraEntropy:y}=i;null==f&&(f=!0),e=ut("msgHash",e),Jt(i),p&&(e=ut("prehashed msgHash",s(e)));const m=v(e),b=u(r),_=[E(b),E(m)];if(null!=y&&!1!==y){const e=!0===y?d(n.BYTES):y;_.push(ut("extraEntropy",e))}const k=dt(..._),A=m;return{seed:k,k2sig:function(e){const t=w(e);if(!l(t))return;const n=a(t),r=c.BASE.multiply(t).toAffine(),i=o(r.x);if(i===tn)return;const s=o(n*o(A+i*b));if(s===tn)return;let u=(r.x===i?0:2)|Number(r.y&nn),d=s;return f&&h(s)&&(d=function(e){return h(e)?o(-e):e}(s),u^=1),new g(i,d,u)}}}const x={lowS:t.lowS,prehash:!1},k={lowS:t.lowS,prehash:!1};return c.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function(e,t=!0){return c.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t,n=!0){if(m(e))throw new Error("first arg must be private key");if(!m(t))throw new Error("second arg must be public key");return c.fromHex(t).multiply(u(e)).toRawBytes(n)},sign:function(e,n,r=x){const{seed:i,k2sig:s}=_(e,n,r),o=t;return wt(o.hash.outputLen,o.nByteLength,o.hmac)(i,s)},verify:function(e,n,r,i=k){const s=e;n=ut("msgHash",n),r=ut("publicKey",r);const{lowS:u,prehash:d,format:l}=i;if(Jt(i),"strict"in i)throw new Error("options.strict was renamed to lowS");if(void 0!==l&&"compact"!==l&&"der"!==l)throw new Error("format must be compact or der");const f="string"==typeof s||Fe(s),h=!f&&!l&&"object"==typeof s&&null!==s&&"bigint"==typeof s.r&&"bigint"==typeof s.s;if(!f&&!h)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let p,y;try{if(h&&(p=new g(s.r,s.s)),f){try{"compact"!==l&&(p=g.fromDER(s))}catch(e){if(!(e instanceof en.Err))throw e}p||"der"===l||(p=g.fromCompact(s))}y=c.fromHex(r)}catch(e){return!1}if(!p)return!1;if(u&&p.hasHighS())return!1;d&&(n=t.hash(n));const{r:m,s:w}=p,b=v(n),E=a(w),_=o(b*E),x=o(m*E),A=c.BASE.multiplyAndAddUnsafe(y,_,x)?.toAffine();return!!A&&o(A.x)===m},ProjectivePoint:c,Signature:g,utils:y}}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function an(e){return{hash:e,hmac:(t,...n)=>Me(e,t,function(...e){let t=0;for(let n=0;n<e.length;n++){const i=e[n];r(i),t+=i.length}const n=new Uint8Array(t);for(let t=0,r=0;t<e.length;t++){const i=e[t];n.set(i,r),r+=i.length}return n}(...n)),randomBytes:l}}BigInt(4);
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const cn=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),un=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),dn=BigInt(1),ln=BigInt(2),fn=(e,t)=>(e+t/ln)/t;function hn(e){const t=cn,n=BigInt(3),r=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),u=e*e*e%t,d=u*u*e%t,l=Ut(d,n,t)*d%t,f=Ut(l,n,t)*d%t,h=Ut(f,ln,t)*u%t,p=Ut(h,i,t)*h%t,g=Ut(p,s,t)*p%t,y=Ut(g,a,t)*g%t,m=Ut(y,c,t)*y%t,w=Ut(m,a,t)*g%t,v=Ut(w,n,t)*d%t,b=Ut(v,o,t)*p%t,E=Ut(b,r,t)*u%t,_=Ut(E,ln,t);if(!pn.eql(pn.sqr(_),e))throw new Error("Cannot find square root");return _}const pn=$t(cn,void 0,void 0,{sqrt:hn}),gn=function(e,t){const n=t=>on({...e,...an(t)});return{...n(t),create:n}}({a:BigInt(0),b:BigInt(7),Fp:pn,n:un,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=un,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-dn*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=n,o=BigInt("0x100000000000000000000000000000000"),a=fn(s*e,t),c=fn(-r*e,t);let u=Ot(e-a*n-c*i,t),d=Ot(-a*r-c*s,t);const l=u>o,f=d>o;if(l&&(u=t-u),f&&(d=t-d),u>o||d>o)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:l,k1:u,k2neg:f,k2:d}}}},w),yn=BigInt(0),mn={};function wn(e,...t){let n=mn[e];if(void 0===n){const t=w(Uint8Array.from(e,(e=>e.charCodeAt(0))));n=dt(t,t),mn[e]=n}return w(dt(n,...t))}const vn=e=>e.toRawBytes(!0).slice(1),bn=e=>at(e,32),En=e=>Ot(e,cn),_n=e=>Ot(e,un),xn=gn.ProjectivePoint;function kn(e){let t=gn.utils.normPrivateKeyToScalar(e),n=xn.fromPrivateKey(t);return{scalar:n.hasEvenY()?t:_n(-t),bytes:vn(n)}}function An(e){ht("x",e,dn,cn);const t=En(e*e);let n=hn(En(t*e+BigInt(7)));n%ln!==yn&&(n=En(-n));const r=new xn(e,n,dn);return r.assertValidity(),r}const Sn=st;function Bn(...e){return _n(Sn(wn("BIP0340/challenge",...e)))}function In(e){return kn(e).bytes}function Tn(e,t,n=l(32)){const r=ut("message",e),{bytes:i,scalar:s}=kn(t),o=ut("auxRand",n,32),a=bn(s^Sn(wn("BIP0340/aux",o))),c=wn("BIP0340/nonce",a,i,r),u=_n(Sn(c));if(u===yn)throw new Error("sign failed: k is zero");const{bytes:d,scalar:f}=kn(u),h=Bn(d,i,r),p=new Uint8Array(64);if(p.set(d,0),p.set(bn(_n(f+h*s)),32),!On(p,r,i))throw new Error("sign: Invalid signature produced");return p}function On(e,t,n){const r=ut("signature",e,64),i=ut("message",t),s=ut("publicKey",n,32);try{const e=An(Sn(s)),t=Sn(r.subarray(0,32));if(!ft(t,dn,cn))return!1;const n=Sn(r.subarray(32,64));if(!ft(n,dn,un))return!1;const u=Bn(bn(t),vn(e),i),d=(o=e,a=n,c=_n(-u),xn.BASE.multiplyAndAddUnsafe(o,a,c));return!(!d||!d.hasEvenY()||d.toAffine().x!==t)}catch(e){return!1}var o,a,c}const Nn=(()=>({getPublicKey:In,sign:Tn,verify:On,utils:{randomPrivateKey:gn.utils.randomPrivateKey,lift_x:An,pointToBytes:vn,numberToBytesBE:at,bytesToNumberBE:st,taggedHash:wn,mod:Ot}}))();function Un(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function Rn(e,...t){if(!Un(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function Ln(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Cn(e,t){Rn(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}
/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */const Zn=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),$n=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);if(!(68===new Uint8Array(new Uint32Array([287454020]).buffer)[0]))throw new Error("Non little-endian hardware is not supported");function Pn(e){if("string"==typeof e)e=function(e){if("string"!=typeof e)throw new Error("string expected");return new Uint8Array((new TextEncoder).encode(e))}(e);else{if(!Un(e))throw new Error("Uint8Array expected, got "+typeof e);e=qn(e)}return e}const jn=(e,t)=>{function n(n,...r){if(Rn(n),void 0!==e.nonceLength){const t=r[0];if(!t)throw new Error("nonce / iv required");e.varSizeNonce?Rn(t):Rn(t,e.nonceLength)}const i=e.tagLength;i&&void 0!==r[1]&&Rn(r[1]);const s=t(n,...r),o=(e,t)=>{if(void 0!==t){if(2!==e)throw new Error("cipher output not supported");Rn(t)}};let a=!1;const c={encrypt(e,t){if(a)throw new Error("cannot encrypt() twice with same key + nonce");return a=!0,Rn(e),o(s.encrypt.length,t),s.encrypt(e,t)},decrypt(e,t){if(Rn(e),i&&e.length<i)throw new Error("invalid ciphertext length: smaller than tagLength="+i);return o(s.decrypt.length,t),s.decrypt(e,t)}};return c}return Object.assign(n,e),n};function Mn(e,t,n,r){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s);e.setUint32(t+0,o,r),e.setUint32(t+4,a,r)}function zn(e){return e.byteOffset%4==0}function qn(e){return Uint8Array.from(e)}function Hn(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}const Fn=16,Dn=new Uint8Array(16),Vn=Zn(Dn),Kn=e=>(e>>>0&255)<<24|(e>>>8&255)<<16|(e>>>16&255)<<8|e>>>24&255;class Wn{constructor(e,t){this.blockLen=Fn,this.outputLen=Fn,this.s0=0,this.s1=0,this.s2=0,this.s3=0,this.finished=!1,Rn(e=Pn(e),16);const n=$n(e);let r=n.getUint32(0,!1),i=n.getUint32(4,!1),s=n.getUint32(8,!1),o=n.getUint32(12,!1);const a=[];for(let e=0;e<128;e++)a.push({s0:Kn(r),s1:Kn(i),s2:Kn(s),s3:Kn(o)}),({s0:r,s1:i,s2:s,s3:o}={s3:(d=s)<<31|(l=o)>>>1,s2:(u=i)<<31|d>>>1,s1:(c=r)<<31|u>>>1,s0:c>>>1^225<<24&-(1&l)});var c,u,d,l;const f=(e=>e>65536?8:e>1024?4:2)(t||1024);if(![1,2,4,8].includes(f))throw new Error("ghash: invalid window size, expected 2, 4 or 8");this.W=f;const h=128/f,p=this.windowSize=2**f,g=[];for(let e=0;e<h;e++)for(let t=0;t<p;t++){let n=0,r=0,i=0,s=0;for(let o=0;o<f;o++){if(!(t>>>f-o-1&1))continue;const{s0:c,s1:u,s2:d,s3:l}=a[f*e+o];n^=c,r^=u,i^=d,s^=l}g.push({s0:n,s1:r,s2:i,s3:s})}this.t=g}_updateBlock(e,t,n,r){e^=this.s0,t^=this.s1,n^=this.s2,r^=this.s3;const{W:i,t:s,windowSize:o}=this;let a=0,c=0,u=0,d=0;const l=(1<<i)-1;let f=0;for(const h of[e,t,n,r])for(let e=0;e<4;e++){const t=h>>>8*e&255;for(let e=8/i-1;e>=0;e--){const n=t>>>i*e&l,{s0:r,s1:h,s2:p,s3:g}=s[f*o+n];a^=r,c^=h,u^=p,d^=g,f+=1}}this.s0=a,this.s1=c,this.s2=u,this.s3=d}update(e){e=Pn(e),Ln(this);const t=Zn(e),n=Math.floor(e.length/Fn),r=e.length%Fn;for(let e=0;e<n;e++)this._updateBlock(t[4*e+0],t[4*e+1],t[4*e+2],t[4*e+3]);return r&&(Dn.set(e.subarray(n*Fn)),this._updateBlock(Vn[0],Vn[1],Vn[2],Vn[3]),Hn(Vn)),this}destroy(){const{t:e}=this;for(const t of e)t.s0=0,t.s1=0,t.s2=0,t.s3=0}digestInto(e){Ln(this),Cn(e,this),this.finished=!0;const{s0:t,s1:n,s2:r,s3:i}=this,s=Zn(e);return s[0]=t,s[1]=n,s[2]=r,s[3]=i,e}digest(){const e=new Uint8Array(Fn);return this.digestInto(e),this.destroy(),e}}class Gn extends Wn{constructor(e,t){const n=function(e){e.reverse();const t=1&e[15];let n=0;for(let t=0;t<e.length;t++){const r=e[t];e[t]=r>>>1|n,n=(1&r)<<7}return e[0]^=225&-t,e}(qn(e=Pn(e)));super(n,t),Hn(n)}update(e){e=Pn(e),Ln(this);const t=Zn(e),n=e.length%Fn,r=Math.floor(e.length/Fn);for(let e=0;e<r;e++)this._updateBlock(Kn(t[4*e+3]),Kn(t[4*e+2]),Kn(t[4*e+1]),Kn(t[4*e+0]));return n&&(Dn.set(e.subarray(r*Fn)),this._updateBlock(Kn(Vn[3]),Kn(Vn[2]),Kn(Vn[1]),Kn(Vn[0])),Hn(Vn)),this}digestInto(e){Ln(this),Cn(e,this),this.finished=!0;const{s0:t,s1:n,s2:r,s3:i}=this,s=Zn(e);return s[0]=t,s[1]=n,s[2]=r,s[3]=i,e.reverse()}}function Jn(e){const t=(t,n)=>e(n,t.length).update(Pn(t)).digest(),n=e(new Uint8Array(16),0);return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=(t,n)=>e(t,n),t}const Yn=Jn(((e,t)=>new Wn(e,t)));Jn(((e,t)=>new Gn(e,t)));const Qn=new Uint8Array(16);function Xn(e){return e<<1^283&-(e>>7)}function er(e,t){let n=0;for(;t>0;t>>=1)n^=e&-(1&t),e=Xn(e);return n}const tr=(()=>{const e=new Uint8Array(256);for(let t=0,n=1;t<256;t++,n^=Xn(n))e[t]=n;const t=new Uint8Array(256);t[0]=99;for(let n=0;n<255;n++){let r=e[255-n];r|=r<<8,t[e[n]]=255&(r^r>>4^r>>5^r>>6^r>>7^99)}return Hn(e),t})(),nr=e=>e<<8|e>>>24;function rr(e,t){if(256!==e.length)throw new Error("Wrong sbox length");const n=new Uint32Array(256).map(((n,r)=>t(e[r]))),r=n.map(nr),i=r.map(nr),s=i.map(nr),o=new Uint32Array(65536),a=new Uint32Array(65536),c=new Uint16Array(65536);for(let t=0;t<256;t++)for(let u=0;u<256;u++){const d=256*t+u;o[d]=n[t]^r[u],a[d]=i[t]^s[u],c[d]=e[t]<<8|e[u]}return{sbox:e,sbox2:c,T0:n,T1:r,T2:i,T3:s,T01:o,T23:a}}const ir=rr(tr,(e=>er(e,3)<<24|e<<16|e<<8|er(e,2))),sr=(()=>{const e=new Uint8Array(16);for(let t=0,n=1;t<16;t++,n=Xn(n))e[t]=n;return e})();function or(e,t,n,r,i,s){return e[n<<8&65280|r>>>8&255]^t[i>>>8&65280|s>>>24&255]}function ar(e,t,n,r,i){return e[255&t|65280&n]|e[r>>>16&255|i>>>16&65280]<<16}function cr(e,t,n,r,i){const{sbox2:s,T01:o,T23:a}=ir;let c=0;t^=e[c++],n^=e[c++],r^=e[c++],i^=e[c++];const u=e.length/4-2;for(let s=0;s<u;s++){const s=e[c++]^or(o,a,t,n,r,i),u=e[c++]^or(o,a,n,r,i,t),d=e[c++]^or(o,a,r,i,t,n),l=e[c++]^or(o,a,i,t,n,r);t=s,n=u,r=d,i=l}return{s0:e[c++]^ar(s,t,n,r,i),s1:e[c++]^ar(s,n,r,i,t),s2:e[c++]^ar(s,r,i,t,n),s3:e[c++]^ar(s,i,t,n,r)}}function ur(e,t,n,r,i){Rn(n,16),Rn(r),i=function(e,t,n=!0){if(void 0===t)return new Uint8Array(e);if(t.length!==e)throw new Error("invalid output length, expected "+e+", got: "+t.length);if(n&&!zn(t))throw new Error("invalid output, must be aligned");return t}(r.length,i);const s=n,o=Zn(s),a=$n(s),c=Zn(r),u=Zn(i),d=t?0:12,l=r.length;let f=a.getUint32(d,t),{s0:h,s1:p,s2:g,s3:y}=cr(e,o[0],o[1],o[2],o[3]);for(let n=0;n+4<=c.length;n+=4)u[n+0]=c[n+0]^h,u[n+1]=c[n+1]^p,u[n+2]=c[n+2]^g,u[n+3]=c[n+3]^y,f=f+1>>>0,a.setUint32(d,f,t),({s0:h,s1:p,s2:g,s3:y}=cr(e,o[0],o[1],o[2],o[3]));const m=16*Math.floor(c.length/4);if(m<l){const e=new Uint32Array([h,p,g,y]),t=(w=e,new Uint8Array(w.buffer,w.byteOffset,w.byteLength));for(let e=m,n=0;e<l;e++,n++)i[e]=r[e]^t[n];Hn(e)}var w;return i}const dr=jn({blockSize:16,nonceLength:12,tagLength:16,varSizeNonce:!0},(function(e,t,n){if(t.length<8)throw new Error("aes/gcm: invalid nonce length");function r(e,t,r){const i=function(e,t,n,r,i){const s=null==i?0:i.length,o=e.create(n,r.length+s);i&&o.update(i),o.update(r);const a=new Uint8Array(16),c=$n(a);i&&Mn(c,0,BigInt(8*s),t),Mn(c,8,BigInt(8*r.length),t),o.update(a);const u=o.digest();return Hn(a),u}(Yn,!1,e,r,n);for(let e=0;e<t.length;e++)i[e]^=t[e];return i}function i(){const n=function(e){Rn(e);const t=e.length;if(![16,24,32].includes(t))throw new Error("aes: invalid key size, should be 16, 24 or 32, got "+t);const{sbox2:n}=ir,r=[];zn(e)||r.push(e=qn(e));const i=Zn(e),s=i.length,o=e=>ar(n,e,e,e,e),a=new Uint32Array(t+28);a.set(i);for(let e=s;e<a.length;e++){let t=a[e-1];e%s==0?t=o((c=t)<<24|c>>>8)^sr[e/s-1]:s>6&&e%s==4&&(t=o(t)),a[e]=a[e-s]^t}var c;return Hn(...r),a}(e),r=Qn.slice(),i=Qn.slice();if(ur(n,!1,i,i,r),12===t.length)i.set(t);else{const e=Qn.slice();Mn($n(e),8,BigInt(8*t.length),!1);const n=Yn.create(r).update(t).update(e);n.digestInto(i),n.destroy()}return{xk:n,authKey:r,counter:i,tagMask:ur(n,!1,i,Qn)}}return{encrypt(e){const{xk:t,authKey:n,counter:s,tagMask:o}=i(),a=new Uint8Array(e.length+16),c=[t,n,s,o];zn(e)||c.push(e=qn(e)),ur(t,!1,s,e,a.subarray(0,e.length));const u=r(n,o,a.subarray(0,a.length-16));return c.push(u),a.set(u,e.length),Hn(...c),a},decrypt(e){const{xk:t,authKey:n,counter:s,tagMask:o}=i(),a=[t,n,o,s];zn(e)||a.push(e=qn(e));const c=e.subarray(0,-16),u=e.subarray(-16),d=r(n,o,c);if(a.push(d),!function(e,t){if(e.length!==t.length)return!1;let n=0;for(let r=0;r<e.length;r++)n|=e[r]^t[r];return 0===n}(d,u))throw new Error("aes/gcm: invalid ghash tag");const l=ur(t,!1,s,c);return Hn(...a),l}}}));function lr(e){const t=Nn.getPublicKey(e);return new _e(t).hex}function fr(e,t){const n=66===t.length?t:"02"+t,r=gn.getSharedSecret(e,n,!0);return new _e(r).slice(1).hex}function hr(e,t){const n=Nn.sign(t,e);return new _e(n).hex}function pr(e,t,n){return Nn.verify(n,e,t)}function gr(e,t,n){const r=_e.str(t),i=_e.hex(e),s=void 0!==n?_e.hex(n,24):_e.random(24),o=dr(i,s).encrypt(r);return new _e(o).b64url+"?iv="+s.b64url}function yr(e,t){const[n,r]=t.split("?iv="),i=_e.b64url(n),s=_e.hex(e),o=_e.b64url(r),a=dr(s,o).decrypt(i);return new _e(a).str}function mr(){return _e.random(16).hex}function wr(e){const t=JSON.stringify([0,e.pubkey,e.created_at,e.kind,e.tags,e.content]);return _e.str(t).digest.hex}function vr(e,t){return e.tags.filter((e=>e.at(0)===t))}function br(e,t){return vr(e,"p").some((e=>e[1]===t))}var Er,_r;!function(e){e.assertEqual=e=>e,e.assertIs=function(e){},e.assertNever=function(e){throw new Error},e.arrayToEnum=e=>{const t={};for(const n of e)t[n]=n;return t},e.getValidEnumValues=t=>{const n=e.objectKeys(t).filter((e=>"number"!=typeof t[t[e]])),r={};for(const e of n)r[e]=t[e];return e.objectValues(r)},e.objectValues=t=>e.objectKeys(t).map((function(e){return t[e]})),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{const t=[];for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t},e.find=(e,t)=>{for(const n of e)if(t(n))return n},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,t=" | "){return e.map((e=>"string"==typeof e?`'${e}'`:e)).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t}(Er||(Er={})),function(e){e.mergeShapes=(e,t)=>({...e,...t})}(_r||(_r={}));const xr=Er.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),kr=e=>{switch(typeof e){case"undefined":return xr.undefined;case"string":return xr.string;case"number":return isNaN(e)?xr.nan:xr.number;case"boolean":return xr.boolean;case"function":return xr.function;case"bigint":return xr.bigint;case"symbol":return xr.symbol;case"object":return Array.isArray(e)?xr.array:null===e?xr.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?xr.promise:"undefined"!=typeof Map&&e instanceof Map?xr.map:"undefined"!=typeof Set&&e instanceof Set?xr.set:"undefined"!=typeof Date&&e instanceof Date?xr.date:xr.object;default:return xr.unknown}},Ar=Er.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Sr extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(e){return e.message},n={_errors:[]},r=e=>{for(const i of e.issues)if("invalid_union"===i.code)i.unionErrors.map(r);else if("invalid_return_type"===i.code)r(i.returnTypeError);else if("invalid_arguments"===i.code)r(i.argumentsError);else if(0===i.path.length)n._errors.push(t(i));else{let e=n,r=0;for(;r<i.path.length;){const n=i.path[r];r===i.path.length-1?(e[n]=e[n]||{_errors:[]},e[n]._errors.push(t(i))):e[n]=e[n]||{_errors:[]},e=e[n],r++}}};return r(this),n}static assert(e){if(!(e instanceof Sr))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Er.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){const t={},n=[];for(const r of this.issues)r.path.length>0?(t[r.path[0]]=t[r.path[0]]||[],t[r.path[0]].push(e(r))):n.push(e(r));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}}Sr.create=e=>new Sr(e);const Br=(e,t)=>{let n;switch(e.code){case Ar.invalid_type:n=e.received===xr.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case Ar.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,Er.jsonStringifyReplacer)}`;break;case Ar.unrecognized_keys:n=`Unrecognized key(s) in object: ${Er.joinValues(e.keys,", ")}`;break;case Ar.invalid_union:n="Invalid input";break;case Ar.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Er.joinValues(e.options)}`;break;case Ar.invalid_enum_value:n=`Invalid enum value. Expected ${Er.joinValues(e.options)}, received '${e.received}'`;break;case Ar.invalid_arguments:n="Invalid function arguments";break;case Ar.invalid_return_type:n="Invalid function return type";break;case Ar.invalid_date:n="Invalid date";break;case Ar.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:Er.assertNever(e.validation):n="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case Ar.too_small:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case Ar.too_big:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case Ar.custom:n="Invalid input";break;case Ar.invalid_intersection_types:n="Intersection results could not be merged";break;case Ar.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case Ar.not_finite:n="Number must be finite";break;default:n=t.defaultError,Er.assertNever(e)}return{message:n}};let Ir=Br;function Tr(){return Ir}const Or=e=>{const{data:t,path:n,errorMaps:r,issueData:i}=e,s=[...n,...i.path||[]],o={...i,path:s};if(void 0!==i.message)return{...i,path:s,message:i.message};let a="";const c=r.filter((e=>!!e)).slice().reverse();for(const e of c)a=e(o,{data:t,defaultError:a}).message;return{...i,path:s,message:a}};function Nr(e,t){const n=Tr(),r=Or({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===Br?void 0:Br].filter((e=>!!e))});e.common.issues.push(r)}class Ur{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){const n=[];for(const r of t){if("aborted"===r.status)return Rr;"dirty"===r.status&&e.dirty(),n.push(r.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){const n=[];for(const e of t){const t=await e.key,r=await e.value;n.push({key:t,value:r})}return Ur.mergeObjectSync(e,n)}static mergeObjectSync(e,t){const n={};for(const r of t){const{key:t,value:i}=r;if("aborted"===t.status)return Rr;if("aborted"===i.status)return Rr;"dirty"===t.status&&e.dirty(),"dirty"===i.status&&e.dirty(),"__proto__"===t.value||void 0===i.value&&!r.alwaysSet||(n[t.value]=i.value)}return{status:e.value,value:n}}}const Rr=Object.freeze({status:"aborted"}),Lr=e=>({status:"dirty",value:e}),Cr=e=>({status:"valid",value:e}),Zr=e=>"aborted"===e.status,$r=e=>"dirty"===e.status,Pr=e=>"valid"===e.status,jr=e=>"undefined"!=typeof Promise&&e instanceof Promise;function Mr(e,t,n,r){if("function"==typeof t||!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t.get(e)}function zr(e,t,n,r,i){if("function"==typeof t||!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(e,n),n}var qr,Hr,Fr;"function"==typeof SuppressedError&&SuppressedError,function(e){e.errToObj=e=>"string"==typeof e?{message:e}:e||{},e.toString=e=>"string"==typeof e?e:null==e?void 0:e.message}(qr||(qr={}));class Dr{constructor(e,t,n,r){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=r}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Vr=(e,t)=>{if(Pr(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new Sr(e.common.issues);return this._error=t,this._error}}};function Kr(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:r,description:i}=e;if(t&&(n||r))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');if(t)return{errorMap:t,description:i};return{errorMap:(t,i)=>{var s,o;const{message:a}=e;return"invalid_enum_value"===t.code?{message:null!=a?a:i.defaultError}:void 0===i.data?{message:null!==(s=null!=a?a:r)&&void 0!==s?s:i.defaultError}:"invalid_type"!==t.code?{message:i.defaultError}:{message:null!==(o=null!=a?a:n)&&void 0!==o?o:i.defaultError}},description:i}}class Wr{get description(){return this._def.description}_getType(e){return kr(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:kr(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Ur,ctx:{common:e.parent.common,data:e.data,parsedType:kr(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(jr(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){var n;const r={common:{issues:[],async:null!==(n=null==t?void 0:t.async)&&void 0!==n&&n,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:kr(e)},i=this._parseSync({data:e,path:r.path,parent:r});return Vr(r,i)}"~validate"(e){var t,n;const r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:kr(e)};if(!this["~standard"].async)try{const t=this._parseSync({data:e,path:[],parent:r});return Pr(t)?{value:t.value}:{issues:r.common.issues}}catch(e){(null===(n=null===(t=null==e?void 0:e.message)||void 0===t?void 0:t.toLowerCase())||void 0===n?void 0:n.includes("encountered"))&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:r}).then((e=>Pr(e)?{value:e.value}:{issues:r.common.issues}))}async parseAsync(e,t){const n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){const n={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:kr(e)},r=this._parse({data:e,path:n.path,parent:n}),i=await(jr(r)?r:Promise.resolve(r));return Vr(n,i)}refine(e,t){const n=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement(((t,r)=>{const i=e(t),s=()=>r.addIssue({code:Ar.custom,...n(t)});return"undefined"!=typeof Promise&&i instanceof Promise?i.then((e=>!!e||(s(),!1))):!!i||(s(),!1)}))}refinement(e,t){return this._refinement(((n,r)=>!!e(n)||(r.addIssue("function"==typeof t?t(n,r):t),!1)))}_refinement(e){return new Wi({schema:this,typeName:os.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return Gi.create(this,this._def)}nullable(){return Ji.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ti.create(this)}promise(){return Ki.create(this,this._def)}or(e){return Ui.create([this,e],this._def)}and(e){return Zi.create(this,e,this._def)}transform(e){return new Wi({...Kr(this._def),schema:this,typeName:os.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t="function"==typeof e?e:()=>e;return new Yi({...Kr(this._def),innerType:this,defaultValue:t,typeName:os.ZodDefault})}brand(){return new ts({typeName:os.ZodBranded,type:this,...Kr(this._def)})}catch(e){const t="function"==typeof e?e:()=>e;return new Qi({...Kr(this._def),innerType:this,catchValue:t,typeName:os.ZodCatch})}describe(e){return new(0,this.constructor)({...this._def,description:e})}pipe(e){return ns.create(this,e)}readonly(){return rs.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Gr=/^c[^\s-]{8,}$/i,Jr=/^[0-9a-z]+$/,Yr=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Qr=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Xr=/^[a-z0-9_-]{21}$/i,ei=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,ti=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,ni=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i;let ri;const ii=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,si=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,oi=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,ai=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,ci=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,ui=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,di="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",li=new RegExp(`^${di}$`);function fi(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`),t}function hi(e){let t=`${di}T${fi(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}function pi(e,t){if(!ei.test(e))return!1;try{const[n]=e.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),i=JSON.parse(atob(r));return"object"==typeof i&&null!==i&&(!(!i.typ||!i.alg)&&(!t||i.alg===t))}catch(e){return!1}}function gi(e,t){return!("v4"!==t&&t||!si.test(e))||!("v6"!==t&&t||!ai.test(e))}class yi extends Wr{_parse(e){this._def.coerce&&(e.data=String(e.data));if(this._getType(e)!==xr.string){const t=this._getOrReturnCtx(e);return Nr(t,{code:Ar.invalid_type,expected:xr.string,received:t.parsedType}),Rr}const t=new Ur;let n;for(const s of this._def.checks)if("min"===s.kind)e.data.length<s.value&&(n=this._getOrReturnCtx(e,n),Nr(n,{code:Ar.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),t.dirty());else if("max"===s.kind)e.data.length>s.value&&(n=this._getOrReturnCtx(e,n),Nr(n,{code:Ar.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),t.dirty());else if("length"===s.kind){const r=e.data.length>s.value,i=e.data.length<s.value;(r||i)&&(n=this._getOrReturnCtx(e,n),r?Nr(n,{code:Ar.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):i&&Nr(n,{code:Ar.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),t.dirty())}else if("email"===s.kind)ni.test(e.data)||(n=this._getOrReturnCtx(e,n),Nr(n,{validation:"email",code:Ar.invalid_string,message:s.message}),t.dirty());else if("emoji"===s.kind)ri||(ri=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),ri.test(e.data)||(n=this._getOrReturnCtx(e,n),Nr(n,{validation:"emoji",code:Ar.invalid_string,message:s.message}),t.dirty());else if("uuid"===s.kind)Qr.test(e.data)||(n=this._getOrReturnCtx(e,n),Nr(n,{validation:"uuid",code:Ar.invalid_string,message:s.message}),t.dirty());else if("nanoid"===s.kind)Xr.test(e.data)||(n=this._getOrReturnCtx(e,n),Nr(n,{validation:"nanoid",code:Ar.invalid_string,message:s.message}),t.dirty());else if("cuid"===s.kind)Gr.test(e.data)||(n=this._getOrReturnCtx(e,n),Nr(n,{validation:"cuid",code:Ar.invalid_string,message:s.message}),t.dirty());else if("cuid2"===s.kind)Jr.test(e.data)||(n=this._getOrReturnCtx(e,n),Nr(n,{validation:"cuid2",code:Ar.invalid_string,message:s.message}),t.dirty());else if("ulid"===s.kind)Yr.test(e.data)||(n=this._getOrReturnCtx(e,n),Nr(n,{validation:"ulid",code:Ar.invalid_string,message:s.message}),t.dirty());else if("url"===s.kind)try{new URL(e.data)}catch(r){n=this._getOrReturnCtx(e,n),Nr(n,{validation:"url",code:Ar.invalid_string,message:s.message}),t.dirty()}else if("regex"===s.kind){s.regex.lastIndex=0;s.regex.test(e.data)||(n=this._getOrReturnCtx(e,n),Nr(n,{validation:"regex",code:Ar.invalid_string,message:s.message}),t.dirty())}else if("trim"===s.kind)e.data=e.data.trim();else if("includes"===s.kind)e.data.includes(s.value,s.position)||(n=this._getOrReturnCtx(e,n),Nr(n,{code:Ar.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),t.dirty());else if("toLowerCase"===s.kind)e.data=e.data.toLowerCase();else if("toUpperCase"===s.kind)e.data=e.data.toUpperCase();else if("startsWith"===s.kind)e.data.startsWith(s.value)||(n=this._getOrReturnCtx(e,n),Nr(n,{code:Ar.invalid_string,validation:{startsWith:s.value},message:s.message}),t.dirty());else if("endsWith"===s.kind)e.data.endsWith(s.value)||(n=this._getOrReturnCtx(e,n),Nr(n,{code:Ar.invalid_string,validation:{endsWith:s.value},message:s.message}),t.dirty());else if("datetime"===s.kind){hi(s).test(e.data)||(n=this._getOrReturnCtx(e,n),Nr(n,{code:Ar.invalid_string,validation:"datetime",message:s.message}),t.dirty())}else if("date"===s.kind){li.test(e.data)||(n=this._getOrReturnCtx(e,n),Nr(n,{code:Ar.invalid_string,validation:"date",message:s.message}),t.dirty())}else if("time"===s.kind){new RegExp(`^${fi(s)}$`).test(e.data)||(n=this._getOrReturnCtx(e,n),Nr(n,{code:Ar.invalid_string,validation:"time",message:s.message}),t.dirty())}else"duration"===s.kind?ti.test(e.data)||(n=this._getOrReturnCtx(e,n),Nr(n,{validation:"duration",code:Ar.invalid_string,message:s.message}),t.dirty()):"ip"===s.kind?(r=e.data,("v4"!==(i=s.version)&&i||!ii.test(r))&&("v6"!==i&&i||!oi.test(r))&&(n=this._getOrReturnCtx(e,n),Nr(n,{validation:"ip",code:Ar.invalid_string,message:s.message}),t.dirty())):"jwt"===s.kind?pi(e.data,s.alg)||(n=this._getOrReturnCtx(e,n),Nr(n,{validation:"jwt",code:Ar.invalid_string,message:s.message}),t.dirty()):"cidr"===s.kind?gi(e.data,s.version)||(n=this._getOrReturnCtx(e,n),Nr(n,{validation:"cidr",code:Ar.invalid_string,message:s.message}),t.dirty()):"base64"===s.kind?ci.test(e.data)||(n=this._getOrReturnCtx(e,n),Nr(n,{validation:"base64",code:Ar.invalid_string,message:s.message}),t.dirty()):"base64url"===s.kind?ui.test(e.data)||(n=this._getOrReturnCtx(e,n),Nr(n,{validation:"base64url",code:Ar.invalid_string,message:s.message}),t.dirty()):Er.assertNever(s);var r,i;return{status:t.value,value:e.data}}_regex(e,t,n){return this.refinement((t=>e.test(t)),{validation:t,code:Ar.invalid_string,...qr.errToObj(n)})}_addCheck(e){return new yi({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...qr.errToObj(e)})}url(e){return this._addCheck({kind:"url",...qr.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...qr.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...qr.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...qr.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...qr.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...qr.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...qr.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...qr.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...qr.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...qr.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...qr.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...qr.errToObj(e)})}datetime(e){var t,n;return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:null!==(t=null==e?void 0:e.offset)&&void 0!==t&&t,local:null!==(n=null==e?void 0:e.local)&&void 0!==n&&n,...qr.errToObj(null==e?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,...qr.errToObj(null==e?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...qr.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...qr.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:null==t?void 0:t.position,...qr.errToObj(null==t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...qr.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...qr.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...qr.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...qr.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...qr.errToObj(t)})}nonempty(e){return this.min(1,qr.errToObj(e))}trim(){return new yi({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new yi({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new yi({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find((e=>"datetime"===e.kind))}get isDate(){return!!this._def.checks.find((e=>"date"===e.kind))}get isTime(){return!!this._def.checks.find((e=>"time"===e.kind))}get isDuration(){return!!this._def.checks.find((e=>"duration"===e.kind))}get isEmail(){return!!this._def.checks.find((e=>"email"===e.kind))}get isURL(){return!!this._def.checks.find((e=>"url"===e.kind))}get isEmoji(){return!!this._def.checks.find((e=>"emoji"===e.kind))}get isUUID(){return!!this._def.checks.find((e=>"uuid"===e.kind))}get isNANOID(){return!!this._def.checks.find((e=>"nanoid"===e.kind))}get isCUID(){return!!this._def.checks.find((e=>"cuid"===e.kind))}get isCUID2(){return!!this._def.checks.find((e=>"cuid2"===e.kind))}get isULID(){return!!this._def.checks.find((e=>"ulid"===e.kind))}get isIP(){return!!this._def.checks.find((e=>"ip"===e.kind))}get isCIDR(){return!!this._def.checks.find((e=>"cidr"===e.kind))}get isBase64(){return!!this._def.checks.find((e=>"base64"===e.kind))}get isBase64url(){return!!this._def.checks.find((e=>"base64url"===e.kind))}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}function mi(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,i=n>r?n:r;return parseInt(e.toFixed(i).replace(".",""))%parseInt(t.toFixed(i).replace(".",""))/Math.pow(10,i)}yi.create=e=>{var t;return new yi({checks:[],typeName:os.ZodString,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...Kr(e)})};class wi extends Wr{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){this._def.coerce&&(e.data=Number(e.data));if(this._getType(e)!==xr.number){const t=this._getOrReturnCtx(e);return Nr(t,{code:Ar.invalid_type,expected:xr.number,received:t.parsedType}),Rr}let t;const n=new Ur;for(const r of this._def.checks)if("int"===r.kind)Er.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),Nr(t,{code:Ar.invalid_type,expected:"integer",received:"float",message:r.message}),n.dirty());else if("min"===r.kind){(r.inclusive?e.data<r.value:e.data<=r.value)&&(t=this._getOrReturnCtx(e,t),Nr(t,{code:Ar.too_small,minimum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),n.dirty())}else if("max"===r.kind){(r.inclusive?e.data>r.value:e.data>=r.value)&&(t=this._getOrReturnCtx(e,t),Nr(t,{code:Ar.too_big,maximum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),n.dirty())}else"multipleOf"===r.kind?0!==mi(e.data,r.value)&&(t=this._getOrReturnCtx(e,t),Nr(t,{code:Ar.not_multiple_of,multipleOf:r.value,message:r.message}),n.dirty()):"finite"===r.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),Nr(t,{code:Ar.not_finite,message:r.message}),n.dirty()):Er.assertNever(r);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,qr.toString(t))}gt(e,t){return this.setLimit("min",e,!1,qr.toString(t))}lte(e,t){return this.setLimit("max",e,!0,qr.toString(t))}lt(e,t){return this.setLimit("max",e,!1,qr.toString(t))}setLimit(e,t,n,r){return new wi({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:qr.toString(r)}]})}_addCheck(e){return new wi({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:qr.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:qr.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:qr.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:qr.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:qr.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:qr.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:qr.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:qr.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:qr.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find((e=>"int"===e.kind||"multipleOf"===e.kind&&Er.isInteger(e.value)))}get isFinite(){let e=null,t=null;for(const n of this._def.checks){if("finite"===n.kind||"int"===n.kind||"multipleOf"===n.kind)return!0;"min"===n.kind?(null===t||n.value>t)&&(t=n.value):"max"===n.kind&&(null===e||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}}wi.create=e=>new wi({checks:[],typeName:os.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1,...Kr(e)});class vi extends Wr{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch(t){return this._getInvalidInput(e)}if(this._getType(e)!==xr.bigint)return this._getInvalidInput(e);let t;const n=new Ur;for(const r of this._def.checks)if("min"===r.kind){(r.inclusive?e.data<r.value:e.data<=r.value)&&(t=this._getOrReturnCtx(e,t),Nr(t,{code:Ar.too_small,type:"bigint",minimum:r.value,inclusive:r.inclusive,message:r.message}),n.dirty())}else if("max"===r.kind){(r.inclusive?e.data>r.value:e.data>=r.value)&&(t=this._getOrReturnCtx(e,t),Nr(t,{code:Ar.too_big,type:"bigint",maximum:r.value,inclusive:r.inclusive,message:r.message}),n.dirty())}else"multipleOf"===r.kind?e.data%r.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),Nr(t,{code:Ar.not_multiple_of,multipleOf:r.value,message:r.message}),n.dirty()):Er.assertNever(r);return{status:n.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return Nr(t,{code:Ar.invalid_type,expected:xr.bigint,received:t.parsedType}),Rr}gte(e,t){return this.setLimit("min",e,!0,qr.toString(t))}gt(e,t){return this.setLimit("min",e,!1,qr.toString(t))}lte(e,t){return this.setLimit("max",e,!0,qr.toString(t))}lt(e,t){return this.setLimit("max",e,!1,qr.toString(t))}setLimit(e,t,n,r){return new vi({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:qr.toString(r)}]})}_addCheck(e){return new vi({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:qr.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:qr.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:qr.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:qr.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:qr.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}vi.create=e=>{var t;return new vi({checks:[],typeName:os.ZodBigInt,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...Kr(e)})};class bi extends Wr{_parse(e){this._def.coerce&&(e.data=Boolean(e.data));if(this._getType(e)!==xr.boolean){const t=this._getOrReturnCtx(e);return Nr(t,{code:Ar.invalid_type,expected:xr.boolean,received:t.parsedType}),Rr}return Cr(e.data)}}bi.create=e=>new bi({typeName:os.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1,...Kr(e)});class Ei extends Wr{_parse(e){this._def.coerce&&(e.data=new Date(e.data));if(this._getType(e)!==xr.date){const t=this._getOrReturnCtx(e);return Nr(t,{code:Ar.invalid_type,expected:xr.date,received:t.parsedType}),Rr}if(isNaN(e.data.getTime())){return Nr(this._getOrReturnCtx(e),{code:Ar.invalid_date}),Rr}const t=new Ur;let n;for(const r of this._def.checks)"min"===r.kind?e.data.getTime()<r.value&&(n=this._getOrReturnCtx(e,n),Nr(n,{code:Ar.too_small,message:r.message,inclusive:!0,exact:!1,minimum:r.value,type:"date"}),t.dirty()):"max"===r.kind?e.data.getTime()>r.value&&(n=this._getOrReturnCtx(e,n),Nr(n,{code:Ar.too_big,message:r.message,inclusive:!0,exact:!1,maximum:r.value,type:"date"}),t.dirty()):Er.assertNever(r);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Ei({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:qr.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:qr.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}Ei.create=e=>new Ei({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:os.ZodDate,...Kr(e)});class _i extends Wr{_parse(e){if(this._getType(e)!==xr.symbol){const t=this._getOrReturnCtx(e);return Nr(t,{code:Ar.invalid_type,expected:xr.symbol,received:t.parsedType}),Rr}return Cr(e.data)}}_i.create=e=>new _i({typeName:os.ZodSymbol,...Kr(e)});class xi extends Wr{_parse(e){if(this._getType(e)!==xr.undefined){const t=this._getOrReturnCtx(e);return Nr(t,{code:Ar.invalid_type,expected:xr.undefined,received:t.parsedType}),Rr}return Cr(e.data)}}xi.create=e=>new xi({typeName:os.ZodUndefined,...Kr(e)});class ki extends Wr{_parse(e){if(this._getType(e)!==xr.null){const t=this._getOrReturnCtx(e);return Nr(t,{code:Ar.invalid_type,expected:xr.null,received:t.parsedType}),Rr}return Cr(e.data)}}ki.create=e=>new ki({typeName:os.ZodNull,...Kr(e)});class Ai extends Wr{constructor(){super(...arguments),this._any=!0}_parse(e){return Cr(e.data)}}Ai.create=e=>new Ai({typeName:os.ZodAny,...Kr(e)});class Si extends Wr{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Cr(e.data)}}Si.create=e=>new Si({typeName:os.ZodUnknown,...Kr(e)});class Bi extends Wr{_parse(e){const t=this._getOrReturnCtx(e);return Nr(t,{code:Ar.invalid_type,expected:xr.never,received:t.parsedType}),Rr}}Bi.create=e=>new Bi({typeName:os.ZodNever,...Kr(e)});class Ii extends Wr{_parse(e){if(this._getType(e)!==xr.undefined){const t=this._getOrReturnCtx(e);return Nr(t,{code:Ar.invalid_type,expected:xr.void,received:t.parsedType}),Rr}return Cr(e.data)}}Ii.create=e=>new Ii({typeName:os.ZodVoid,...Kr(e)});class Ti extends Wr{_parse(e){const{ctx:t,status:n}=this._processInputParams(e),r=this._def;if(t.parsedType!==xr.array)return Nr(t,{code:Ar.invalid_type,expected:xr.array,received:t.parsedType}),Rr;if(null!==r.exactLength){const e=t.data.length>r.exactLength.value,i=t.data.length<r.exactLength.value;(e||i)&&(Nr(t,{code:e?Ar.too_big:Ar.too_small,minimum:i?r.exactLength.value:void 0,maximum:e?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),n.dirty())}if(null!==r.minLength&&t.data.length<r.minLength.value&&(Nr(t,{code:Ar.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),n.dirty()),null!==r.maxLength&&t.data.length>r.maxLength.value&&(Nr(t,{code:Ar.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map(((e,n)=>r.type._parseAsync(new Dr(t,e,t.path,n))))).then((e=>Ur.mergeArray(n,e)));const i=[...t.data].map(((e,n)=>r.type._parseSync(new Dr(t,e,t.path,n))));return Ur.mergeArray(n,i)}get element(){return this._def.type}min(e,t){return new Ti({...this._def,minLength:{value:e,message:qr.toString(t)}})}max(e,t){return new Ti({...this._def,maxLength:{value:e,message:qr.toString(t)}})}length(e,t){return new Ti({...this._def,exactLength:{value:e,message:qr.toString(t)}})}nonempty(e){return this.min(1,e)}}function Oi(e){if(e instanceof Ni){const t={};for(const n in e.shape){const r=e.shape[n];t[n]=Gi.create(Oi(r))}return new Ni({...e._def,shape:()=>t})}return e instanceof Ti?new Ti({...e._def,type:Oi(e.element)}):e instanceof Gi?Gi.create(Oi(e.unwrap())):e instanceof Ji?Ji.create(Oi(e.unwrap())):e instanceof $i?$i.create(e.items.map((e=>Oi(e)))):e}Ti.create=(e,t)=>new Ti({type:e,minLength:null,maxLength:null,exactLength:null,typeName:os.ZodArray,...Kr(t)});class Ni extends Wr{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),t=Er.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==xr.object){const t=this._getOrReturnCtx(e);return Nr(t,{code:Ar.invalid_type,expected:xr.object,received:t.parsedType}),Rr}const{status:t,ctx:n}=this._processInputParams(e),{shape:r,keys:i}=this._getCached(),s=[];if(!(this._def.catchall instanceof Bi&&"strip"===this._def.unknownKeys))for(const e in n.data)i.includes(e)||s.push(e);const o=[];for(const e of i){const t=r[e],i=n.data[e];o.push({key:{status:"valid",value:e},value:t._parse(new Dr(n,i,n.path,e)),alwaysSet:e in n.data})}if(this._def.catchall instanceof Bi){const e=this._def.unknownKeys;if("passthrough"===e)for(const e of s)o.push({key:{status:"valid",value:e},value:{status:"valid",value:n.data[e]}});else if("strict"===e)s.length>0&&(Nr(n,{code:Ar.unrecognized_keys,keys:s}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const t of s){const r=n.data[t];o.push({key:{status:"valid",value:t},value:e._parse(new Dr(n,r,n.path,t)),alwaysSet:t in n.data})}}return n.common.async?Promise.resolve().then((async()=>{const e=[];for(const t of o){const n=await t.key,r=await t.value;e.push({key:n,value:r,alwaysSet:t.alwaysSet})}return e})).then((e=>Ur.mergeObjectSync(t,e))):Ur.mergeObjectSync(t,o)}get shape(){return this._def.shape()}strict(e){return new Ni({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,n)=>{var r,i,s,o;const a=null!==(s=null===(i=(r=this._def).errorMap)||void 0===i?void 0:i.call(r,t,n).message)&&void 0!==s?s:n.defaultError;return"unrecognized_keys"===t.code?{message:null!==(o=qr.errToObj(e).message)&&void 0!==o?o:a}:{message:a}}}:{}})}strip(){return new Ni({...this._def,unknownKeys:"strip"})}passthrough(){return new Ni({...this._def,unknownKeys:"passthrough"})}extend(e){return new Ni({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Ni({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:os.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new Ni({...this._def,catchall:e})}pick(e){const t={};return Er.objectKeys(e).forEach((n=>{e[n]&&this.shape[n]&&(t[n]=this.shape[n])})),new Ni({...this._def,shape:()=>t})}omit(e){const t={};return Er.objectKeys(this.shape).forEach((n=>{e[n]||(t[n]=this.shape[n])})),new Ni({...this._def,shape:()=>t})}deepPartial(){return Oi(this)}partial(e){const t={};return Er.objectKeys(this.shape).forEach((n=>{const r=this.shape[n];e&&!e[n]?t[n]=r:t[n]=r.optional()})),new Ni({...this._def,shape:()=>t})}required(e){const t={};return Er.objectKeys(this.shape).forEach((n=>{if(e&&!e[n])t[n]=this.shape[n];else{let e=this.shape[n];for(;e instanceof Gi;)e=e._def.innerType;t[n]=e}})),new Ni({...this._def,shape:()=>t})}keyof(){return Fi(Er.objectKeys(this.shape))}}Ni.create=(e,t)=>new Ni({shape:()=>e,unknownKeys:"strip",catchall:Bi.create(),typeName:os.ZodObject,...Kr(t)}),Ni.strictCreate=(e,t)=>new Ni({shape:()=>e,unknownKeys:"strict",catchall:Bi.create(),typeName:os.ZodObject,...Kr(t)}),Ni.lazycreate=(e,t)=>new Ni({shape:e,unknownKeys:"strip",catchall:Bi.create(),typeName:os.ZodObject,...Kr(t)});class Ui extends Wr{_parse(e){const{ctx:t}=this._processInputParams(e),n=this._def.options;if(t.common.async)return Promise.all(n.map((async e=>{const n={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:n}),ctx:n}}))).then((function(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const n of e)if("dirty"===n.result.status)return t.common.issues.push(...n.ctx.common.issues),n.result;const n=e.map((e=>new Sr(e.ctx.common.issues)));return Nr(t,{code:Ar.invalid_union,unionErrors:n}),Rr}));{let e;const r=[];for(const i of n){const n={...t,common:{...t.common,issues:[]},parent:null},s=i._parseSync({data:t.data,path:t.path,parent:n});if("valid"===s.status)return s;"dirty"!==s.status||e||(e={result:s,ctx:n}),n.common.issues.length&&r.push(n.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;const i=r.map((e=>new Sr(e)));return Nr(t,{code:Ar.invalid_union,unionErrors:i}),Rr}}get options(){return this._def.options}}Ui.create=(e,t)=>new Ui({options:e,typeName:os.ZodUnion,...Kr(t)});const Ri=e=>e instanceof qi?Ri(e.schema):e instanceof Wi?Ri(e.innerType()):e instanceof Hi?[e.value]:e instanceof Di?e.options:e instanceof Vi?Er.objectValues(e.enum):e instanceof Yi?Ri(e._def.innerType):e instanceof xi?[void 0]:e instanceof ki?[null]:e instanceof Gi?[void 0,...Ri(e.unwrap())]:e instanceof Ji?[null,...Ri(e.unwrap())]:e instanceof ts||e instanceof rs?Ri(e.unwrap()):e instanceof Qi?Ri(e._def.innerType):[];class Li extends Wr{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==xr.object)return Nr(t,{code:Ar.invalid_type,expected:xr.object,received:t.parsedType}),Rr;const n=this.discriminator,r=t.data[n],i=this.optionsMap.get(r);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):(Nr(t,{code:Ar.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),Rr)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,n){const r=new Map;for(const n of t){const t=Ri(n.shape[e]);if(!t.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const i of t){if(r.has(i))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(i)}`);r.set(i,n)}}return new Li({typeName:os.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:r,...Kr(n)})}}function Ci(e,t){const n=kr(e),r=kr(t);if(e===t)return{valid:!0,data:e};if(n===xr.object&&r===xr.object){const n=Er.objectKeys(t),r=Er.objectKeys(e).filter((e=>-1!==n.indexOf(e))),i={...e,...t};for(const n of r){const r=Ci(e[n],t[n]);if(!r.valid)return{valid:!1};i[n]=r.data}return{valid:!0,data:i}}if(n===xr.array&&r===xr.array){if(e.length!==t.length)return{valid:!1};const n=[];for(let r=0;r<e.length;r++){const i=Ci(e[r],t[r]);if(!i.valid)return{valid:!1};n.push(i.data)}return{valid:!0,data:n}}return n===xr.date&&r===xr.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class Zi extends Wr{_parse(e){const{status:t,ctx:n}=this._processInputParams(e),r=(e,r)=>{if(Zr(e)||Zr(r))return Rr;const i=Ci(e.value,r.value);return i.valid?(($r(e)||$r(r))&&t.dirty(),{status:t.value,value:i.data}):(Nr(n,{code:Ar.invalid_intersection_types}),Rr)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then((([e,t])=>r(e,t))):r(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}Zi.create=(e,t,n)=>new Zi({left:e,right:t,typeName:os.ZodIntersection,...Kr(n)});class $i extends Wr{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==xr.array)return Nr(n,{code:Ar.invalid_type,expected:xr.array,received:n.parsedType}),Rr;if(n.data.length<this._def.items.length)return Nr(n,{code:Ar.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Rr;!this._def.rest&&n.data.length>this._def.items.length&&(Nr(n,{code:Ar.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const r=[...n.data].map(((e,t)=>{const r=this._def.items[t]||this._def.rest;return r?r._parse(new Dr(n,e,n.path,t)):null})).filter((e=>!!e));return n.common.async?Promise.all(r).then((e=>Ur.mergeArray(t,e))):Ur.mergeArray(t,r)}get items(){return this._def.items}rest(e){return new $i({...this._def,rest:e})}}$i.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new $i({items:e,typeName:os.ZodTuple,rest:null,...Kr(t)})};class Pi extends Wr{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==xr.object)return Nr(n,{code:Ar.invalid_type,expected:xr.object,received:n.parsedType}),Rr;const r=[],i=this._def.keyType,s=this._def.valueType;for(const e in n.data)r.push({key:i._parse(new Dr(n,e,n.path,e)),value:s._parse(new Dr(n,n.data[e],n.path,e)),alwaysSet:e in n.data});return n.common.async?Ur.mergeObjectAsync(t,r):Ur.mergeObjectSync(t,r)}get element(){return this._def.valueType}static create(e,t,n){return new Pi(t instanceof Wr?{keyType:e,valueType:t,typeName:os.ZodRecord,...Kr(n)}:{keyType:yi.create(),valueType:e,typeName:os.ZodRecord,...Kr(t)})}}class ji extends Wr{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==xr.map)return Nr(n,{code:Ar.invalid_type,expected:xr.map,received:n.parsedType}),Rr;const r=this._def.keyType,i=this._def.valueType,s=[...n.data.entries()].map((([e,t],s)=>({key:r._parse(new Dr(n,e,n.path,[s,"key"])),value:i._parse(new Dr(n,t,n.path,[s,"value"]))})));if(n.common.async){const e=new Map;return Promise.resolve().then((async()=>{for(const n of s){const r=await n.key,i=await n.value;if("aborted"===r.status||"aborted"===i.status)return Rr;"dirty"!==r.status&&"dirty"!==i.status||t.dirty(),e.set(r.value,i.value)}return{status:t.value,value:e}}))}{const e=new Map;for(const n of s){const r=n.key,i=n.value;if("aborted"===r.status||"aborted"===i.status)return Rr;"dirty"!==r.status&&"dirty"!==i.status||t.dirty(),e.set(r.value,i.value)}return{status:t.value,value:e}}}}ji.create=(e,t,n)=>new ji({valueType:t,keyType:e,typeName:os.ZodMap,...Kr(n)});class Mi extends Wr{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==xr.set)return Nr(n,{code:Ar.invalid_type,expected:xr.set,received:n.parsedType}),Rr;const r=this._def;null!==r.minSize&&n.data.size<r.minSize.value&&(Nr(n,{code:Ar.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),t.dirty()),null!==r.maxSize&&n.data.size>r.maxSize.value&&(Nr(n,{code:Ar.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),t.dirty());const i=this._def.valueType;function s(e){const n=new Set;for(const r of e){if("aborted"===r.status)return Rr;"dirty"===r.status&&t.dirty(),n.add(r.value)}return{status:t.value,value:n}}const o=[...n.data.values()].map(((e,t)=>i._parse(new Dr(n,e,n.path,t))));return n.common.async?Promise.all(o).then((e=>s(e))):s(o)}min(e,t){return new Mi({...this._def,minSize:{value:e,message:qr.toString(t)}})}max(e,t){return new Mi({...this._def,maxSize:{value:e,message:qr.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}Mi.create=(e,t)=>new Mi({valueType:e,minSize:null,maxSize:null,typeName:os.ZodSet,...Kr(t)});class zi extends Wr{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==xr.function)return Nr(t,{code:Ar.invalid_type,expected:xr.function,received:t.parsedType}),Rr;function n(e,n){return Or({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Tr(),Br].filter((e=>!!e)),issueData:{code:Ar.invalid_arguments,argumentsError:n}})}function r(e,n){return Or({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Tr(),Br].filter((e=>!!e)),issueData:{code:Ar.invalid_return_type,returnTypeError:n}})}const i={errorMap:t.common.contextualErrorMap},s=t.data;if(this._def.returns instanceof Ki){const e=this;return Cr((async function(...t){const o=new Sr([]),a=await e._def.args.parseAsync(t,i).catch((e=>{throw o.addIssue(n(t,e)),o})),c=await Reflect.apply(s,this,a);return await e._def.returns._def.type.parseAsync(c,i).catch((e=>{throw o.addIssue(r(c,e)),o}))}))}{const e=this;return Cr((function(...t){const o=e._def.args.safeParse(t,i);if(!o.success)throw new Sr([n(t,o.error)]);const a=Reflect.apply(s,this,o.data),c=e._def.returns.safeParse(a,i);if(!c.success)throw new Sr([r(a,c.error)]);return c.data}))}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new zi({...this._def,args:$i.create(e).rest(Si.create())})}returns(e){return new zi({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,n){return new zi({args:e||$i.create([]).rest(Si.create()),returns:t||Si.create(),typeName:os.ZodFunction,...Kr(n)})}}class qi extends Wr{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}qi.create=(e,t)=>new qi({getter:e,typeName:os.ZodLazy,...Kr(t)});class Hi extends Wr{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return Nr(t,{received:t.data,code:Ar.invalid_literal,expected:this._def.value}),Rr}return{status:"valid",value:e.data}}get value(){return this._def.value}}function Fi(e,t){return new Di({values:e,typeName:os.ZodEnum,...Kr(t)})}Hi.create=(e,t)=>new Hi({value:e,typeName:os.ZodLiteral,...Kr(t)});class Di extends Wr{constructor(){super(...arguments),Hr.set(this,void 0)}_parse(e){if("string"!=typeof e.data){const t=this._getOrReturnCtx(e),n=this._def.values;return Nr(t,{expected:Er.joinValues(n),received:t.parsedType,code:Ar.invalid_type}),Rr}if(Mr(this,Hr)||zr(this,Hr,new Set(this._def.values)),!Mr(this,Hr).has(e.data)){const t=this._getOrReturnCtx(e),n=this._def.values;return Nr(t,{received:t.data,code:Ar.invalid_enum_value,options:n}),Rr}return Cr(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return Di.create(e,{...this._def,...t})}exclude(e,t=this._def){return Di.create(this.options.filter((t=>!e.includes(t))),{...this._def,...t})}}Hr=new WeakMap,Di.create=Fi;class Vi extends Wr{constructor(){super(...arguments),Fr.set(this,void 0)}_parse(e){const t=Er.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==xr.string&&n.parsedType!==xr.number){const e=Er.objectValues(t);return Nr(n,{expected:Er.joinValues(e),received:n.parsedType,code:Ar.invalid_type}),Rr}if(Mr(this,Fr)||zr(this,Fr,new Set(Er.getValidEnumValues(this._def.values))),!Mr(this,Fr).has(e.data)){const e=Er.objectValues(t);return Nr(n,{received:n.data,code:Ar.invalid_enum_value,options:e}),Rr}return Cr(e.data)}get enum(){return this._def.values}}Fr=new WeakMap,Vi.create=(e,t)=>new Vi({values:e,typeName:os.ZodNativeEnum,...Kr(t)});class Ki extends Wr{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==xr.promise&&!1===t.common.async)return Nr(t,{code:Ar.invalid_type,expected:xr.promise,received:t.parsedType}),Rr;const n=t.parsedType===xr.promise?t.data:Promise.resolve(t.data);return Cr(n.then((e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap}))))}}Ki.create=(e,t)=>new Ki({type:e,typeName:os.ZodPromise,...Kr(t)});class Wi extends Wr{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===os.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:n}=this._processInputParams(e),r=this._def.effect||null,i={addIssue:e=>{Nr(n,e),e.fatal?t.abort():t.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),"preprocess"===r.type){const e=r.transform(n.data,i);if(n.common.async)return Promise.resolve(e).then((async e=>{if("aborted"===t.value)return Rr;const r=await this._def.schema._parseAsync({data:e,path:n.path,parent:n});return"aborted"===r.status?Rr:"dirty"===r.status||"dirty"===t.value?Lr(r.value):r}));{if("aborted"===t.value)return Rr;const r=this._def.schema._parseSync({data:e,path:n.path,parent:n});return"aborted"===r.status?Rr:"dirty"===r.status||"dirty"===t.value?Lr(r.value):r}}if("refinement"===r.type){const e=e=>{const t=r.refinement(e,i);if(n.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===n.common.async){const r=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===r.status?Rr:("dirty"===r.status&&t.dirty(),e(r.value),{status:t.value,value:r.value})}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then((n=>"aborted"===n.status?Rr:("dirty"===n.status&&t.dirty(),e(n.value).then((()=>({status:t.value,value:n.value}))))))}if("transform"===r.type){if(!1===n.common.async){const e=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Pr(e))return e;const s=r.transform(e.value,i);if(s instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:s}}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then((e=>Pr(e)?Promise.resolve(r.transform(e.value,i)).then((e=>({status:t.value,value:e}))):e))}Er.assertNever(r)}}Wi.create=(e,t,n)=>new Wi({schema:e,typeName:os.ZodEffects,effect:t,...Kr(n)}),Wi.createWithPreprocess=(e,t,n)=>new Wi({schema:t,effect:{type:"preprocess",transform:e},typeName:os.ZodEffects,...Kr(n)});class Gi extends Wr{_parse(e){return this._getType(e)===xr.undefined?Cr(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Gi.create=(e,t)=>new Gi({innerType:e,typeName:os.ZodOptional,...Kr(t)});class Ji extends Wr{_parse(e){return this._getType(e)===xr.null?Cr(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ji.create=(e,t)=>new Ji({innerType:e,typeName:os.ZodNullable,...Kr(t)});class Yi extends Wr{_parse(e){const{ctx:t}=this._processInputParams(e);let n=t.data;return t.parsedType===xr.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}Yi.create=(e,t)=>new Yi({innerType:e,typeName:os.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...Kr(t)});class Qi extends Wr{_parse(e){const{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},r=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return jr(r)?r.then((e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new Sr(n.common.issues)},input:n.data})}))):{status:"valid",value:"valid"===r.status?r.value:this._def.catchValue({get error(){return new Sr(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}Qi.create=(e,t)=>new Qi({innerType:e,typeName:os.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...Kr(t)});class Xi extends Wr{_parse(e){if(this._getType(e)!==xr.nan){const t=this._getOrReturnCtx(e);return Nr(t,{code:Ar.invalid_type,expected:xr.nan,received:t.parsedType}),Rr}return{status:"valid",value:e.data}}}Xi.create=e=>new Xi({typeName:os.ZodNaN,...Kr(e)});const es=Symbol("zod_brand");class ts extends Wr{_parse(e){const{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}}class ns extends Wr{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.common.async){return(async()=>{const e=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?Rr:"dirty"===e.status?(t.dirty(),Lr(e.value)):this._def.out._parseAsync({data:e.value,path:n.path,parent:n})})()}{const e=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?Rr:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:n.path,parent:n})}}static create(e,t){return new ns({in:e,out:t,typeName:os.ZodPipeline})}}class rs extends Wr{_parse(e){const t=this._def.innerType._parse(e),n=e=>(Pr(e)&&(e.value=Object.freeze(e.value)),e);return jr(t)?t.then((e=>n(e))):n(t)}unwrap(){return this._def.innerType}}function is(e,t={},n){return e?Ai.create().superRefine(((r,i)=>{var s,o;if(!e(r)){const e="function"==typeof t?t(r):"string"==typeof t?{message:t}:t,a=null===(o=null!==(s=e.fatal)&&void 0!==s?s:n)||void 0===o||o,c="string"==typeof e?{message:e}:e;i.addIssue({code:"custom",...c,fatal:a})}})):Ai.create()}rs.create=(e,t)=>new rs({innerType:e,typeName:os.ZodReadonly,...Kr(t)});const ss={object:Ni.lazycreate};var os;!function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(os||(os={}));const as=yi.create,cs=wi.create,us=Xi.create,ds=vi.create,ls=bi.create,fs=Ei.create,hs=_i.create,ps=xi.create,gs=ki.create,ys=Ai.create,ms=Si.create,ws=Bi.create,vs=Ii.create,bs=Ti.create,Es=Ni.create,_s=Ni.strictCreate,xs=Ui.create,ks=Li.create,As=Zi.create,Ss=$i.create,Bs=Pi.create,Is=ji.create,Ts=Mi.create,Os=zi.create,Ns=qi.create,Us=Hi.create,Rs=Di.create,Ls=Vi.create,Cs=Ki.create,Zs=Wi.create,$s=Gi.create,Ps=Ji.create,js=Wi.createWithPreprocess,Ms=ns.create,zs={string:e=>yi.create({...e,coerce:!0}),number:e=>wi.create({...e,coerce:!0}),boolean:e=>bi.create({...e,coerce:!0}),bigint:e=>vi.create({...e,coerce:!0}),date:e=>Ei.create({...e,coerce:!0})},qs=Rr;var Hs=Object.freeze({__proto__:null,defaultErrorMap:Br,setErrorMap:function(e){Ir=e},getErrorMap:Tr,makeIssue:Or,EMPTY_PATH:[],addIssueToContext:Nr,ParseStatus:Ur,INVALID:Rr,DIRTY:Lr,OK:Cr,isAborted:Zr,isDirty:$r,isValid:Pr,isAsync:jr,get util(){return Er},get objectUtil(){return _r},ZodParsedType:xr,getParsedType:kr,ZodType:Wr,datetimeRegex:hi,ZodString:yi,ZodNumber:wi,ZodBigInt:vi,ZodBoolean:bi,ZodDate:Ei,ZodSymbol:_i,ZodUndefined:xi,ZodNull:ki,ZodAny:Ai,ZodUnknown:Si,ZodNever:Bi,ZodVoid:Ii,ZodArray:Ti,ZodObject:Ni,ZodUnion:Ui,ZodDiscriminatedUnion:Li,ZodIntersection:Zi,ZodTuple:$i,ZodRecord:Pi,ZodMap:ji,ZodSet:Mi,ZodFunction:zi,ZodLazy:qi,ZodLiteral:Hi,ZodEnum:Di,ZodNativeEnum:Vi,ZodPromise:Ki,ZodEffects:Wi,ZodTransformer:Wi,ZodOptional:Gi,ZodNullable:Ji,ZodDefault:Yi,ZodCatch:Qi,ZodNaN:Xi,BRAND:es,ZodBranded:ts,ZodPipeline:ns,ZodReadonly:rs,custom:is,Schema:Wr,ZodSchema:Wr,late:ss,get ZodFirstPartyTypeKind(){return os},coerce:zs,any:ys,array:bs,bigint:ds,boolean:ls,date:fs,discriminatedUnion:ks,effect:Zs,enum:Rs,function:Os,instanceof:(e,t={message:`Input not instance of ${e.name}`})=>is((t=>t instanceof e),t),intersection:As,lazy:Ns,literal:Us,map:Is,nan:us,nativeEnum:Ls,never:ws,null:gs,nullable:Ps,number:cs,object:Es,oboolean:()=>ls().optional(),onumber:()=>cs().optional(),optional:$s,ostring:()=>as().optional(),pipeline:Ms,preprocess:js,promise:Cs,record:Bs,set:Ts,strictObject:_s,string:as,symbol:hs,transformer:Zs,tuple:Ss,undefined:ps,union:xs,unknown:ms,void:vs,NEVER:qs,ZodIssueCode:Ar,quotelessJson:e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),ZodError:Sr});const Fs=Hs.bigint(),Ds=Hs.boolean(),Vs=Hs.date(),Ks=Hs.number(),Ws=Hs.number().max(Number.MAX_SAFE_INTEGER),Gs=Hs.string(),Js=Hs.number().min(5e8).max(Number.MAX_SAFE_INTEGER),Ys=Hs.string().url(),Qs=Hs.any(),Xs=Hs.string().regex(/^[0-9a-fA-F]*$/).refine((e=>e.length%2==0)),eo=Hs.union([Hs.string(),Hs.number(),Hs.boolean(),Hs.null()]),to=Xs.refine((e=>32===e.length)),no=Xs.refine((e=>40===e.length)),ro=Xs.refine((e=>64===e.length)),io=Xs.refine((e=>128===e.length)),so=Xs.refine((e=>66===e.length));var oo={any:Qs,base58:Hs.string().regex(/^[1-9A-HJ-NP-Za-km-z]+$/),base64:Hs.string().regex(/^[a-zA-Z0-9+/]+={0,2}$/),b64url:Hs.string().regex(/^[a-zA-Z0-9\-_]+={0,2}$/),bech32:Hs.string().regex(/^[a-z]+1[023456789acdefghjklmnpqrstuvwxyz]+$/),big:Fs,bool:Ds,date:Vs,hex32:ro,hex16:to,hex20:no,hex64:io,hex:Xs,literal:eo,num:Ks,pubkey:so,str:Gs,stamp:Js,uint:Ws,url:Ys};const ao=oo.str.array(),co=Hs.object({content:oo.str,created_at:oo.stamp,kind:oo.num,pubkey:oo.hex32,tags:ao.array()}),uo=co.extend({id:oo.hex32});var lo={signed:uo.extend({sig:oo.hex64}),tags:ao,template:co,unsigned:uo};const fo=oo.hex16,ho=oo.str,po=oo.str.min(3).max(256);var go,yo={base:oo,event:lo,msg:{envelope:Hs.tuple([po,fo,ho])}};!function(e){e.ok=function(e,t){if(!1===e)throw new Error(t??"Assertion failed!")},e.exists=function(e,t){if(void 0===e)throw new TypeError(t??"Input is undefined!");if(null===e)throw new TypeError(t??"Input is null!")},e.size=function(e,t,n){const r=_e.bytes(e);if(r.length!==t)throw new Error(n??`Invalid byte size: ${r.hex} !== ${t}`);return!0}}(go||(go={}));const mo=()=>Math.floor(Date.now()/1e3);function wo(e){return e instanceof Error?e.message:"string"==typeof e?e:String(e)}var vo=Object.freeze({__proto__:null,get Assert(){return go},now:mo,parse_error:wo,sleep:(e=1e3)=>new Promise((t=>setTimeout(t,e)))});function bo(e,t,n,r){const i=e.created_at??mo(),s=lr(r),o=gr(fr(r,n),t),a={...e,pubkey:s,content:o,created_at:i};return a.tags.push(["p",n]),Eo(r,a)}function Eo(e,t){const n=wr(t),r=hr(e,n);return{...t,id:n,sig:r}}function _o(e){const{id:t,sig:n,...r}=e,i=yo.event.signed.safeParse(e),s=wr(r);return i.success?t!==s?"event id mismatch":pr(t,e.pubkey,n)?null:"invalid event signature":"event failed schema validation"}function xo(e,t){const n=_o(e);if(null!==n)throw new Error(n);if(!br(e,lr(t)))throw new Error("pubkey not in peers list");const r=yr(fr(t,e.pubkey),e.content);return JSON.parse(r)}function ko(e){const t=e.id??mr();return{...e,id:t}}function Ao(e,t,n){try{return JSON.stringify([e,n,t])}catch(e){throw new Error("failed to create message payload")}}function So(e,t){const n=yo.msg.envelope.safeParse(e);if(!n.success)throw new Error("envelope failed schema validation");const[r,i,s]=n.data;return{env:t,data:s,id:i,tag:r}}function Bo(e){if(!yo.base.url.array().safeParse(e).success)throw new Error("invalid relay set: "+e)}function Io(e){if(!yo.base.hex32.safeParse(e).success)throw new Error("invalid secret key: "+e)}var To=Object.freeze({__proto__:null,create_event:bo,create_payload:Ao,decrypt_content:yr,decrypt_payload:xo,encrypt_content:gr,finalize_message:ko,gen_message_id:mr,gen_seckey:function(e){let t=void 0!==e?_e.hex(e).big:_e.random(32).big;return t=Ot(t,gn.CURVE.n),_e.big(t).hex},get_event_id:wr,get_pubkey:lr,get_shared_secret:fr,get_tags:vr,get_unique_items:function(e){const t=new Set;for(const n of e)for(const e of n)t.add(e);return[...t]},is_recipient:br,parse_envelope:So,sign_event:Eo,sign_msg:hr,verify_event:_o,verify_relays:Bo,verify_seckey:Io,verify_sig:pr});class Oo{constructor(){this.eventMap=new Map}getEventHandlers(e){const t=this.eventMap.get(e);if(!t){const t=new Set;return this.eventMap.set(e,t),t}return t}has(e){const t=this.eventMap.get(e);return void 0!==t&&t.size>0}on(e,t){this.getEventHandlers(e).add(t)}once(e,t){const n=r=>{this.off(e,n),t(r)};this.on(e,n)}within(e,t,n){const r=e=>{t(e)};setTimeout((()=>{this.off(e,r)}),n),this.on(e,r)}emit(e,t){const n=[];this.getEventHandlers(e).forEach((e=>{const r=e(t);r instanceof Promise&&n.push(r)})),this.getEventHandlers("*").forEach((r=>{const i=r(e,t);i instanceof Promise&&n.push(i)})),Promise.allSettled(n)}off(e,t){this.getEventHandlers(e).delete(t)}clear(e){this.eventMap.delete(e)}}function No(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function Uo(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function Ro(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}const Lo="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,Co=e=>e instanceof Uint8Array,Zo=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),$o=(e,t)=>e<<32-t|e>>>t;
/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */if(!(68===new Uint8Array(new Uint32Array([287454020]).buffer)[0]))throw new Error("Non little-endian hardware is not supported");function Po(e){if("string"==typeof e&&(e=function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(e)),!Co(e))throw new Error("expected Uint8Array, got "+typeof e);return e}let jo=class{clone(){return this._cloneInto()}};function Mo(e){const t=t=>e().update(Po(t)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function zo(e=32){if(Lo&&"function"==typeof Lo.getRandomValues)return Lo.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}let qo=class extends jo{constructor(e,t,n,r){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Zo(this.buffer)}update(e){Ro(this);const{view:t,buffer:n,blockLen:r}=this,i=(e=Po(e)).length;for(let s=0;s<i;){const o=Math.min(r-this.pos,i-s);if(o!==r)n.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===r&&(this.process(t,0),this.pos=0);else{const t=Zo(e);for(;r<=i-s;s+=r)this.process(t,s)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){Ro(this),function(e,t){Uo(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:r,isLE:i}=this;let{pos:s}=this;t[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>r-s&&(this.process(n,0),s=0);for(let e=s;e<r;e++)t[e]=0;!function(e,t,n,r){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),c=r?4:0,u=r?0:4;e.setUint32(t+c,o,r),e.setUint32(t+u,a,r)}(n,r-8,BigInt(8*this.length),i),this.process(n,0);const o=Zo(e),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=a/4,u=this.get();if(c>u.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<c;e++)o.setUint32(4*e,u[e],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:r,finished:i,destroyed:s,pos:o}=this;return e.length=r,e.pos=o,e.finished=i,e.destroyed=s,r%t&&e.buffer.set(n),e}};const Ho=(e,t,n)=>e&t^e&n^t&n,Fo=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Do=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Vo=new Uint32Array(64);let Ko=class extends qo{constructor(){super(64,32,8,!1),this.A=0|Do[0],this.B=0|Do[1],this.C=0|Do[2],this.D=0|Do[3],this.E=0|Do[4],this.F=0|Do[5],this.G=0|Do[6],this.H=0|Do[7]}get(){const{A:e,B:t,C:n,D:r,E:i,F:s,G:o,H:a}=this;return[e,t,n,r,i,s,o,a]}set(e,t,n,r,i,s,o,a){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|r,this.E=0|i,this.F=0|s,this.G=0|o,this.H=0|a}process(e,t){for(let n=0;n<16;n++,t+=4)Vo[n]=e.getUint32(t,!1);for(let e=16;e<64;e++){const t=Vo[e-15],n=Vo[e-2],r=$o(t,7)^$o(t,18)^t>>>3,i=$o(n,17)^$o(n,19)^n>>>10;Vo[e]=i+Vo[e-7]+r+Vo[e-16]|0}let{A:n,B:r,C:i,D:s,E:o,F:a,G:c,H:u}=this;for(let e=0;e<64;e++){const t=u+($o(o,6)^$o(o,11)^$o(o,25))+((d=o)&a^~d&c)+Fo[e]+Vo[e]|0,l=($o(n,2)^$o(n,13)^$o(n,22))+Ho(n,r,i)|0;u=c,c=a,a=o,o=s+t|0,s=i,i=r,r=n,n=t+l|0}var d;n=n+this.A|0,r=r+this.B|0,i=i+this.C|0,s=s+this.D|0,o=o+this.E|0,a=a+this.F|0,c=c+this.G|0,u=u+this.H|0,this.set(n,r,i,s,o,a,c,u)}roundClean(){Vo.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const Wo=Mo((()=>new Ko)),Go=BigInt(0),Jo=BigInt(1),Yo=BigInt(2),Qo=e=>e instanceof Uint8Array,Xo=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function ea(e){if(!Qo(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=Xo[e[n]];return t}function ta(e){const t=e.toString(16);return 1&t.length?`0${t}`:t}function na(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":`0x${e}`)}function ra(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(t/2);for(let t=0;t<n.length;t++){const r=2*t,i=e.slice(r,r+2),s=Number.parseInt(i,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");n[t]=s}return n}function ia(e){return na(ea(e))}function sa(e){if(!Qo(e))throw new Error("Uint8Array expected");return na(ea(Uint8Array.from(e).reverse()))}function oa(e,t){return ra(e.toString(16).padStart(2*t,"0"))}function aa(e,t){return oa(e,t).reverse()}function ca(e,t,n){let r;if("string"==typeof t)try{r=ra(t)}catch(n){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${n}`)}else{if(!Qo(t))throw new Error(`${e} must be hex string or Uint8Array`);r=Uint8Array.from(t)}const i=r.length;if("number"==typeof n&&i!==n)throw new Error(`${e} expected ${n} bytes, got ${i}`);return r}function ua(...e){const t=new Uint8Array(e.reduce(((e,t)=>e+t.length),0));let n=0;return e.forEach((e=>{if(!Qo(e))throw new Error("Uint8Array expected");t.set(e,n),n+=e.length})),t}const da=e=>(Yo<<BigInt(e-1))-Jo,la=e=>new Uint8Array(e),fa=e=>Uint8Array.from(e);function ha(e,t,n){if("number"!=typeof e||e<2)throw new Error("hashLen must be a number");if("number"!=typeof t||t<2)throw new Error("qByteLen must be a number");if("function"!=typeof n)throw new Error("hmacFn must be a function");let r=la(e),i=la(e),s=0;const o=()=>{r.fill(1),i.fill(0),s=0},a=(...e)=>n(i,r,...e),c=(e=la())=>{i=a(fa([0]),e),r=a(),0!==e.length&&(i=a(fa([1]),e),r=a())},u=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let e=0;const n=[];for(;e<t;){r=a();const t=r.slice();n.push(t),e+=r.length}return ua(...n)};return(e,t)=>{let n;for(o(),c(e);!(n=t(u()));)c();return o(),n}}const pa={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||e instanceof Uint8Array,isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function ga(e,t,n={}){const r=(t,n,r)=>{const i=pa[n];if("function"!=typeof i)throw new Error(`Invalid validator "${n}", expected function`);const s=e[t];if(!(r&&void 0===s||i(s,e)))throw new Error(`Invalid param ${String(t)}=${s} (${typeof s}), expected ${n}`)};for(const[e,n]of Object.entries(t))r(e,n,!1);for(const[e,t]of Object.entries(n))r(e,t,!0);return e}var ya=Object.freeze({__proto__:null,bitGet:function(e,t){return e>>BigInt(t)&Jo},bitLen:function(e){let t;for(t=0;e>Go;e>>=Jo,t+=1);return t},bitMask:da,bitSet:(e,t,n)=>e|(n?Jo:Go)<<BigInt(t),bytesToHex:ea,bytesToNumberBE:ia,bytesToNumberLE:sa,concatBytes:ua,createHmacDrbg:ha,ensureBytes:ca,equalBytes:function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0},hexToBytes:ra,hexToNumber:na,numberToBytesBE:oa,numberToBytesLE:aa,numberToHexUnpadded:ta,numberToVarBytesBE:function(e){return ra(ta(e))},utf8ToBytes:function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))},validateObject:ga});
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ma=BigInt(0),wa=BigInt(1),va=BigInt(2),ba=BigInt(3),Ea=BigInt(4),_a=BigInt(5),xa=BigInt(8);function ka(e,t){const n=e%t;return n>=ma?n:t+n}function Aa(e,t,n){if(n<=ma||t<ma)throw new Error("Expected power/modulo > 0");if(n===wa)return ma;let r=wa;for(;t>ma;)t&wa&&(r=r*e%n),e=e*e%n,t>>=wa;return r}function Sa(e,t,n){let r=e;for(;t-- >ma;)r*=r,r%=n;return r}function Ba(e,t){if(e===ma||t<=ma)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let n=ka(e,t),r=t,i=ma,s=wa;for(;n!==ma;){const e=r%n,t=i-s*(r/n);r=n,n=e,i=s,s=t}if(r!==wa)throw new Error("invert: does not exist");return ka(i,t)}function Ia(e){if(e%Ea===ba){const t=(e+wa)/Ea;return function(e,n){const r=e.pow(n,t);if(!e.eql(e.sqr(r),n))throw new Error("Cannot find square root");return r}}if(e%xa===_a){const t=(e-_a)/xa;return function(e,n){const r=e.mul(n,va),i=e.pow(r,t),s=e.mul(n,i),o=e.mul(e.mul(s,va),i),a=e.mul(s,e.sub(o,e.ONE));if(!e.eql(e.sqr(a),n))throw new Error("Cannot find square root");return a}}return function(e){const t=(e-wa)/va;let n,r,i;for(n=e-wa,r=0;n%va===ma;n/=va,r++);for(i=va;i<e&&Aa(i,t,e)!==e-wa;i++);if(1===r){const t=(e+wa)/Ea;return function(e,n){const r=e.pow(n,t);if(!e.eql(e.sqr(r),n))throw new Error("Cannot find square root");return r}}const s=(n+wa)/va;return function(e,o){if(e.pow(o,t)===e.neg(e.ONE))throw new Error("Cannot find square root");let a=r,c=e.pow(e.mul(e.ONE,i),n),u=e.pow(o,s),d=e.pow(o,n);for(;!e.eql(d,e.ONE);){if(e.eql(d,e.ZERO))return e.ZERO;let t=1;for(let n=e.sqr(d);t<a&&!e.eql(n,e.ONE);t++)n=e.sqr(n);const n=e.pow(c,wa<<BigInt(a-t-1));c=e.sqr(n),u=e.mul(u,n),d=e.mul(d,c),a=t}return u}}(e)}BigInt(9),BigInt(16);const Ta=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Oa(e,t){const n=void 0!==t?t:e.toString(2).length;return{nBitLength:n,nByteLength:Math.ceil(n/8)}}function Na(e){if("bigint"!=typeof e)throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function Ua(e){const t=Na(e);return t+Math.ceil(t/2)}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const Ra=BigInt(0),La=BigInt(1);function Ca(e){return ga(e.Fp,Ta.reduce(((e,t)=>(e[t]="function",e)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"})),ga(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Oa(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const{bytesToNumberBE:Za,hexToBytes:$a}=ya,Pa={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(e){const{Err:t}=Pa;if(e.length<2||2!==e[0])throw new t("Invalid signature integer tag");const n=e[1],r=e.subarray(2,n+2);if(!n||r.length!==n)throw new t("Invalid signature integer: wrong length");if(128&r[0])throw new t("Invalid signature integer: negative");if(0===r[0]&&!(128&r[1]))throw new t("Invalid signature integer: unnecessary leading zero");return{d:Za(r),l:e.subarray(n+2)}},toSig(e){const{Err:t}=Pa,n="string"==typeof e?$a(e):e;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||48!=n[0])throw new t("Invalid signature tag");if(n[1]!==r-2)throw new t("Invalid signature: incorrect length");const{d:i,l:s}=Pa._parseInt(n.subarray(2)),{d:o,l:a}=Pa._parseInt(s);if(a.length)throw new t("Invalid signature: left bytes after parsing");return{r:i,s:o}},hexFromSig(e){const t=e=>8&Number.parseInt(e[0],16)?"00"+e:e,n=e=>{const t=e.toString(16);return 1&t.length?`0${t}`:t},r=t(n(e.s)),i=t(n(e.r)),s=r.length/2,o=i.length/2,a=n(s),c=n(o);return`30${n(o+s+4)}02${c}${i}02${a}${r}`}},ja=BigInt(0),Ma=BigInt(1);BigInt(2);const za=BigInt(3);function qa(e){const t=function(e){const t=Ca(e);ga(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:i}=t;if(n){if(!r.eql(i,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof n||"bigint"!=typeof n.beta||"function"!=typeof n.splitScalar)throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:n}=t,r=t.toBytes||((e,t,r)=>{const i=t.toAffine();return ua(Uint8Array.from([4]),n.toBytes(i.x),n.toBytes(i.y))}),i=t.fromBytes||(e=>{const t=e.subarray(1);return{x:n.fromBytes(t.subarray(0,n.BYTES)),y:n.fromBytes(t.subarray(n.BYTES,2*n.BYTES))}});function s(e){const{a:r,b:i}=t,s=n.sqr(e),o=n.mul(s,e);return n.add(n.add(o,n.mul(e,r)),i)}if(!n.eql(n.sqr(t.Gy),s(t.Gx)))throw new Error("bad generator point: equation left != right");function o(e){return"bigint"==typeof e&&ja<e&&e<t.n}function a(e){if(!o(e))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(e){const{allowedPrivateKeyLengths:n,nByteLength:r,wrapPrivateKey:i,n:s}=t;if(n&&"bigint"!=typeof e){if(e instanceof Uint8Array&&(e=ea(e)),"string"!=typeof e||!n.includes(e.length))throw new Error("Invalid key");e=e.padStart(2*r,"0")}let o;try{o="bigint"==typeof e?e:ia(ca("private key",e,r))}catch(t){throw new Error(`private key must be ${r} bytes, hex or bigint, not ${typeof e}`)}return i&&(o=ka(o,s)),a(o),o}const u=new Map;function d(e){if(!(e instanceof l))throw new Error("ProjectivePoint expected")}class l{constructor(e,t,r){if(this.px=e,this.py=t,this.pz=r,null==e||!n.isValid(e))throw new Error("x required");if(null==t||!n.isValid(t))throw new Error("y required");if(null==r||!n.isValid(r))throw new Error("z required")}static fromAffine(e){const{x:t,y:r}=e||{};if(!e||!n.isValid(t)||!n.isValid(r))throw new Error("invalid affine point");if(e instanceof l)throw new Error("projective point not allowed");const i=e=>n.eql(e,n.ZERO);return i(t)&&i(r)?l.ZERO:new l(t,r,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){const t=n.invertBatch(e.map((e=>e.pz)));return e.map(((e,n)=>e.toAffine(t[n]))).map(l.fromAffine)}static fromHex(e){const t=l.fromAffine(i(ca("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return l.BASE.multiply(c(e))}_setWindowSize(e){this._WINDOW_SIZE=e,u.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:e,y:r}=this.toAffine();if(!n.isValid(e)||!n.isValid(r))throw new Error("bad point: x or y not FE");const i=n.sqr(r),o=s(e);if(!n.eql(i,o))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:e}=this.toAffine();if(n.isOdd)return!n.isOdd(e);throw new Error("Field doesn't support isOdd")}equals(e){d(e);const{px:t,py:r,pz:i}=this,{px:s,py:o,pz:a}=e,c=n.eql(n.mul(t,a),n.mul(s,i)),u=n.eql(n.mul(r,a),n.mul(o,i));return c&&u}negate(){return new l(this.px,n.neg(this.py),this.pz)}double(){const{a:e,b:r}=t,i=n.mul(r,za),{px:s,py:o,pz:a}=this;let c=n.ZERO,u=n.ZERO,d=n.ZERO,f=n.mul(s,s),h=n.mul(o,o),p=n.mul(a,a),g=n.mul(s,o);return g=n.add(g,g),d=n.mul(s,a),d=n.add(d,d),c=n.mul(e,d),u=n.mul(i,p),u=n.add(c,u),c=n.sub(h,u),u=n.add(h,u),u=n.mul(c,u),c=n.mul(g,c),d=n.mul(i,d),p=n.mul(e,p),g=n.sub(f,p),g=n.mul(e,g),g=n.add(g,d),d=n.add(f,f),f=n.add(d,f),f=n.add(f,p),f=n.mul(f,g),u=n.add(u,f),p=n.mul(o,a),p=n.add(p,p),f=n.mul(p,g),c=n.sub(c,f),d=n.mul(p,h),d=n.add(d,d),d=n.add(d,d),new l(c,u,d)}add(e){d(e);const{px:r,py:i,pz:s}=this,{px:o,py:a,pz:c}=e;let u=n.ZERO,f=n.ZERO,h=n.ZERO;const p=t.a,g=n.mul(t.b,za);let y=n.mul(r,o),m=n.mul(i,a),w=n.mul(s,c),v=n.add(r,i),b=n.add(o,a);v=n.mul(v,b),b=n.add(y,m),v=n.sub(v,b),b=n.add(r,s);let E=n.add(o,c);return b=n.mul(b,E),E=n.add(y,w),b=n.sub(b,E),E=n.add(i,s),u=n.add(a,c),E=n.mul(E,u),u=n.add(m,w),E=n.sub(E,u),h=n.mul(p,b),u=n.mul(g,w),h=n.add(u,h),u=n.sub(m,h),h=n.add(m,h),f=n.mul(u,h),m=n.add(y,y),m=n.add(m,y),w=n.mul(p,w),b=n.mul(g,b),m=n.add(m,w),w=n.sub(y,w),w=n.mul(p,w),b=n.add(b,w),y=n.mul(m,b),f=n.add(f,y),y=n.mul(E,b),u=n.mul(v,u),u=n.sub(u,y),y=n.mul(v,m),h=n.mul(E,h),h=n.add(h,y),new l(u,f,h)}subtract(e){return this.add(e.negate())}is0(){return this.equals(l.ZERO)}wNAF(e){return h.wNAFCached(this,u,e,(e=>{const t=n.invertBatch(e.map((e=>e.pz)));return e.map(((e,n)=>e.toAffine(t[n]))).map(l.fromAffine)}))}multiplyUnsafe(e){const r=l.ZERO;if(e===ja)return r;if(a(e),e===Ma)return this;const{endo:i}=t;if(!i)return h.unsafeLadder(this,e);let{k1neg:s,k1:o,k2neg:c,k2:u}=i.splitScalar(e),d=r,f=r,p=this;for(;o>ja||u>ja;)o&Ma&&(d=d.add(p)),u&Ma&&(f=f.add(p)),p=p.double(),o>>=Ma,u>>=Ma;return s&&(d=d.negate()),c&&(f=f.negate()),f=new l(n.mul(f.px,i.beta),f.py,f.pz),d.add(f)}multiply(e){a(e);let r,i,s=e;const{endo:o}=t;if(o){const{k1neg:e,k1:t,k2neg:a,k2:c}=o.splitScalar(s);let{p:u,f:d}=this.wNAF(t),{p:f,f:p}=this.wNAF(c);u=h.constTimeNegate(e,u),f=h.constTimeNegate(a,f),f=new l(n.mul(f.px,o.beta),f.py,f.pz),r=u.add(f),i=d.add(p)}else{const{p:e,f:t}=this.wNAF(s);r=e,i=t}return l.normalizeZ([r,i])[0]}multiplyAndAddUnsafe(e,t,n){const r=l.BASE,i=(e,t)=>t!==ja&&t!==Ma&&e.equals(r)?e.multiply(t):e.multiplyUnsafe(t),s=i(this,t).add(i(e,n));return s.is0()?void 0:s}toAffine(e){const{px:t,py:r,pz:i}=this,s=this.is0();null==e&&(e=s?n.ONE:n.inv(i));const o=n.mul(t,e),a=n.mul(r,e),c=n.mul(i,e);if(s)return{x:n.ZERO,y:n.ZERO};if(!n.eql(c,n.ONE))throw new Error("invZ was invalid");return{x:o,y:a}}isTorsionFree(){const{h:e,isTorsionFree:n}=t;if(e===Ma)return!0;if(n)return n(l,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:e,clearCofactor:n}=t;return e===Ma?this:n?n(l,this):this.multiplyUnsafe(t.h)}toRawBytes(e=!0){return this.assertValidity(),r(l,this,e)}toHex(e=!0){return ea(this.toRawBytes(e))}}l.BASE=new l(t.Gx,t.Gy,n.ONE),l.ZERO=new l(n.ZERO,n.ONE,n.ZERO);const f=t.nBitLength,h=function(e,t){const n=(e,t)=>{const n=t.negate();return e?n:t},r=e=>({windows:Math.ceil(t/e)+1,windowSize:2**(e-1)});return{constTimeNegate:n,unsafeLadder(t,n){let r=e.ZERO,i=t;for(;n>Ra;)n&La&&(r=r.add(i)),i=i.double(),n>>=La;return r},precomputeWindow(e,t){const{windows:n,windowSize:i}=r(t),s=[];let o=e,a=o;for(let e=0;e<n;e++){a=o,s.push(a);for(let e=1;e<i;e++)a=a.add(o),s.push(a);o=a.double()}return s},wNAF(t,i,s){const{windows:o,windowSize:a}=r(t);let c=e.ZERO,u=e.BASE;const d=BigInt(2**t-1),l=2**t,f=BigInt(t);for(let e=0;e<o;e++){const t=e*a;let r=Number(s&d);s>>=f,r>a&&(r-=l,s+=La);const o=t,h=t+Math.abs(r)-1,p=e%2!=0,g=r<0;0===r?u=u.add(n(p,i[o])):c=c.add(n(g,i[h]))}return{p:c,f:u}},wNAFCached(e,t,n,r){const i=e._WINDOW_SIZE||1;let s=t.get(e);return s||(s=this.precomputeWindow(e,i),1!==i&&t.set(e,r(s))),this.wNAF(i,s,n)}}}(l,t.endo?Math.ceil(f/2):f);return{CURVE:t,ProjectivePoint:l,normPrivateKeyToScalar:c,weierstrassEquation:s,isWithinCurveOrder:o}}function Ha(e){const t=function(e){const t=Ca(e);return ga(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:n,n:r}=t,i=n.BYTES+1,s=2*n.BYTES+1;function o(e){return ka(e,r)}function a(e){return Ba(e,r)}const{ProjectivePoint:c,normPrivateKeyToScalar:u,weierstrassEquation:d,isWithinCurveOrder:l}=qa({...t,toBytes(e,t,r){const i=t.toAffine(),s=n.toBytes(i.x),o=ua;return r?o(Uint8Array.from([t.hasEvenY()?2:3]),s):o(Uint8Array.from([4]),s,n.toBytes(i.y))},fromBytes(e){const t=e.length,r=e[0],o=e.subarray(1);if(t!==i||2!==r&&3!==r){if(t===s&&4===r){return{x:n.fromBytes(o.subarray(0,n.BYTES)),y:n.fromBytes(o.subarray(n.BYTES,2*n.BYTES))}}throw new Error(`Point of length ${t} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}{const e=ia(o);if(!function(e){return ja<e&&e<n.ORDER}(e))throw new Error("Point is not on curve");const t=d(e);let i=n.sqrt(t);return!(1&~r)!==((i&Ma)===Ma)&&(i=n.neg(i)),{x:e,y:i}}}}),f=e=>ea(oa(e,t.nByteLength));function h(e){return e>r>>Ma}const p=(e,t,n)=>ia(e.slice(t,n));class g{constructor(e,t,n){this.r=e,this.s=t,this.recovery=n,this.assertValidity()}static fromCompact(e){const n=t.nByteLength;return e=ca("compactSignature",e,2*n),new g(p(e,0,n),p(e,n,2*n))}static fromDER(e){const{r:t,s:n}=Pa.toSig(ca("DER",e));return new g(t,n)}assertValidity(){if(!l(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!l(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(e){return new g(this.r,this.s,e)}recoverPublicKey(e){const{r:r,s:i,recovery:s}=this,u=v(ca("msgHash",e));if(null==s||![0,1,2,3].includes(s))throw new Error("recovery id invalid");const d=2===s||3===s?r+t.n:r;if(d>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const l=1&s?"03":"02",h=c.fromHex(l+f(d)),p=a(d),g=o(-u*p),y=o(i*p),m=c.BASE.multiplyAndAddUnsafe(h,g,y);if(!m)throw new Error("point at infinify");return m.assertValidity(),m}hasHighS(){return h(this.s)}normalizeS(){return this.hasHighS()?new g(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return ra(this.toDERHex())}toDERHex(){return Pa.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return ra(this.toCompactHex())}toCompactHex(){return f(this.r)+f(this.s)}}const y={isValidPrivateKey(e){try{return u(e),!0}catch(e){return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const e=Ua(t.n);return function(e,t,n=!1){const r=e.length,i=Na(t),s=Ua(t);if(r<16||r<s||r>1024)throw new Error(`expected ${s}-1024 bytes of input, got ${r}`);const o=ka(n?ia(e):sa(e),t-wa)+wa;return n?aa(o,i):oa(o,i)}(t.randomBytes(e),t.n)},precompute:(e=8,t=c.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)};function m(e){const t=e instanceof Uint8Array,n="string"==typeof e,r=(t||n)&&e.length;return t?r===i||r===s:n?r===2*i||r===2*s:e instanceof c}const w=t.bits2int||function(e){const n=ia(e),r=8*e.length-t.nBitLength;return r>0?n>>BigInt(r):n},v=t.bits2int_modN||function(e){return o(w(e))},b=da(t.nBitLength);function E(e){if("bigint"!=typeof e)throw new Error("bigint expected");if(!(ja<=e&&e<b))throw new Error(`bigint expected < 2^${t.nBitLength}`);return oa(e,t.nByteLength)}function _(e,r,i=x){if(["recovered","canonical"].some((e=>e in i)))throw new Error("sign() legacy options not supported");const{hash:s,randomBytes:d}=t;let{lowS:f,prehash:p,extraEntropy:y}=i;null==f&&(f=!0),e=ca("msgHash",e),p&&(e=ca("prehashed msgHash",s(e)));const m=v(e),b=u(r),_=[E(b),E(m)];if(null!=y){const e=!0===y?d(n.BYTES):y;_.push(ca("extraEntropy",e))}const k=ua(..._),A=m;return{seed:k,k2sig:function(e){const t=w(e);if(!l(t))return;const n=a(t),r=c.BASE.multiply(t).toAffine(),i=o(r.x);if(i===ja)return;const s=o(n*o(A+i*b));if(s===ja)return;let u=(r.x===i?0:2)|Number(r.y&Ma),d=s;return f&&h(s)&&(d=function(e){return h(e)?o(-e):e}(s),u^=1),new g(i,d,u)}}}const x={lowS:t.lowS,prehash:!1},k={lowS:t.lowS,prehash:!1};return c.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function(e,t=!0){return c.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t,n=!0){if(m(e))throw new Error("first arg must be private key");if(!m(t))throw new Error("second arg must be public key");return c.fromHex(t).multiply(u(e)).toRawBytes(n)},sign:function(e,n,r=x){const{seed:i,k2sig:s}=_(e,n,r),o=t;return ha(o.hash.outputLen,o.nByteLength,o.hmac)(i,s)},verify:function(e,n,r,i=k){const s=e;if(n=ca("msgHash",n),r=ca("publicKey",r),"strict"in i)throw new Error("options.strict was renamed to lowS");const{lowS:u,prehash:d}=i;let l,f;try{if("string"==typeof s||s instanceof Uint8Array)try{l=g.fromDER(s)}catch(e){if(!(e instanceof Pa.Err))throw e;l=g.fromCompact(s)}else{if("object"!=typeof s||"bigint"!=typeof s.r||"bigint"!=typeof s.s)throw new Error("PARSE");{const{r:e,s:t}=s;l=new g(e,t)}}f=c.fromHex(r)}catch(e){if("PARSE"===e.message)throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(u&&l.hasHighS())return!1;d&&(n=t.hash(n));const{r:h,s:p}=l,y=v(n),m=a(p),w=o(y*m),b=o(h*m),E=c.BASE.multiplyAndAddUnsafe(f,w,b)?.toAffine();return!!E&&o(E.x)===h},ProjectivePoint:c,Signature:g,utils:y}}BigInt(4);let Fa=class extends jo{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,function(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");No(e.outputLen),No(e.blockLen)}(e);const n=Po(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,i=new Uint8Array(r);i.set(n.length>r?e.create().update(n).digest():n);for(let e=0;e<i.length;e++)i[e]^=54;this.iHash.update(i),this.oHash=e.create();for(let e=0;e<i.length;e++)i[e]^=106;this.oHash.update(i),i.fill(0)}update(e){return Ro(this),this.iHash.update(e),this}digestInto(e){Ro(this),Uo(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:r,destroyed:i,blockLen:s,outputLen:o}=this;return e.finished=r,e.destroyed=i,e.blockLen=s,e.outputLen=o,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const Da=(e,t,n)=>new Fa(e,t).update(n).digest();
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
function Va(e){return{hash:e,hmac:(t,...n)=>Da(e,t,function(...e){const t=new Uint8Array(e.reduce(((e,t)=>e+t.length),0));let n=0;return e.forEach((e=>{if(!Co(e))throw new Error("Uint8Array expected");t.set(e,n),n+=e.length})),t}(...n)),randomBytes:zo}}Da.create=(e,t)=>new Fa(e,t);
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const Ka=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Wa=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Ga=BigInt(1),Ja=BigInt(2),Ya=(e,t)=>(e+t/Ja)/t;function Qa(e){const t=Ka,n=BigInt(3),r=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),u=e*e*e%t,d=u*u*e%t,l=Sa(d,n,t)*d%t,f=Sa(l,n,t)*d%t,h=Sa(f,Ja,t)*u%t,p=Sa(h,i,t)*h%t,g=Sa(p,s,t)*p%t,y=Sa(g,a,t)*g%t,m=Sa(y,c,t)*y%t,w=Sa(m,a,t)*g%t,v=Sa(w,n,t)*d%t,b=Sa(v,o,t)*p%t,E=Sa(b,r,t)*u%t,_=Sa(E,Ja,t);if(!Xa.eql(Xa.sqr(_),e))throw new Error("Cannot find square root");return _}const Xa=function(e,t,n=!1,r={}){if(e<=ma)throw new Error(`Expected Field ORDER > 0, got ${e}`);const{nBitLength:i,nByteLength:s}=Oa(e,t);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=Ia(e),a=Object.freeze({ORDER:e,BITS:i,BYTES:s,MASK:da(i),ZERO:ma,ONE:wa,create:t=>ka(t,e),isValid:t=>{if("bigint"!=typeof t)throw new Error("Invalid field element: expected bigint, got "+typeof t);return ma<=t&&t<e},is0:e=>e===ma,isOdd:e=>(e&wa)===wa,neg:t=>ka(-t,e),eql:(e,t)=>e===t,sqr:t=>ka(t*t,e),add:(t,n)=>ka(t+n,e),sub:(t,n)=>ka(t-n,e),mul:(t,n)=>ka(t*n,e),pow:(e,t)=>function(e,t,n){if(n<ma)throw new Error("Expected power > 0");if(n===ma)return e.ONE;if(n===wa)return t;let r=e.ONE,i=t;for(;n>ma;)n&wa&&(r=e.mul(r,i)),i=e.sqr(i),n>>=wa;return r}(a,e,t),div:(t,n)=>ka(t*Ba(n,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>Ba(t,e),sqrt:r.sqrt||(e=>o(a,e)),invertBatch:e=>function(e,t){const n=new Array(t.length),r=t.reduce(((t,r,i)=>e.is0(r)?t:(n[i]=t,e.mul(t,r))),e.ONE),i=e.inv(r);return t.reduceRight(((t,r,i)=>e.is0(r)?t:(n[i]=e.mul(t,n[i]),e.mul(t,r))),i),n}(a,e),cmov:(e,t,n)=>n?t:e,toBytes:e=>n?aa(e,s):oa(e,s),fromBytes:e=>{if(e.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${e.length}`);return n?sa(e):ia(e)}});return Object.freeze(a)}(Ka,void 0,void 0,{sqrt:Qa}),ec=function(e,t){const n=t=>Ha({...e,...Va(t)});return Object.freeze({...n(t),create:n})}({a:BigInt(0),b:BigInt(7),Fp:Xa,n:Wa,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=Wa,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Ga*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=n,o=BigInt("0x100000000000000000000000000000000"),a=Ya(s*e,t),c=Ya(-r*e,t);let u=ka(e-a*n-c*i,t),d=ka(-a*r-c*s,t);const l=u>o,f=d>o;if(l&&(u=t-u),f&&(d=t-d),u>o||d>o)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:l,k1:u,k2neg:f,k2:d}}}},Wo),tc=BigInt(0),nc=e=>"bigint"==typeof e&&tc<e&&e<Ka,rc={};function ic(e,...t){let n=rc[e];if(void 0===n){const t=Wo(Uint8Array.from(e,(e=>e.charCodeAt(0))));n=ua(t,t),rc[e]=n}return Wo(ua(n,...t))}const sc=e=>e.toRawBytes(!0).slice(1),oc=e=>oa(e,32),ac=e=>ka(e,Ka),cc=e=>ka(e,Wa),uc=ec.ProjectivePoint;function dc(e){let t=ec.utils.normPrivateKeyToScalar(e),n=uc.fromPrivateKey(t);return{scalar:n.hasEvenY()?t:cc(-t),bytes:sc(n)}}function lc(e){if(!nc(e))throw new Error("bad x: need 0 < x < p");const t=ac(e*e);let n=Qa(ac(t*e+BigInt(7)));n%Ja!==tc&&(n=ac(-n));const r=new uc(e,n,Ga);return r.assertValidity(),r}function fc(...e){return cc(ia(ic("BIP0340/challenge",...e)))}function hc(e){return dc(e).bytes}function pc(e,t,n=zo(32)){const r=ca("message",e),{bytes:i,scalar:s}=dc(t),o=ca("auxRand",n,32),a=oc(s^ia(ic("BIP0340/aux",o))),c=ic("BIP0340/nonce",a,i,r),u=cc(ia(c));if(u===tc)throw new Error("sign failed: k is zero");const{bytes:d,scalar:l}=dc(u),f=fc(d,i,r),h=new Uint8Array(64);if(h.set(d,0),h.set(oc(cc(l+f*s)),32),!gc(h,r,i))throw new Error("sign: Invalid signature produced");return h}function gc(e,t,n){const r=ca("signature",e,64),i=ca("message",t),s=ca("publicKey",n,32);try{const e=lc(ia(s)),t=ia(r.subarray(0,32));if(!nc(t))return!1;const n=ia(r.subarray(32,64));if(!("bigint"==typeof(u=n)&&tc<u&&u<Wa))return!1;const d=fc(oc(t),sc(e),i),l=(o=e,a=n,c=cc(-d),uc.BASE.multiplyAndAddUnsafe(o,a,c));return!(!l||!l.hasEvenY()||l.toAffine().x!==t)}catch(e){return!1}var o,a,c,u}const yc=(()=>({getPublicKey:hc,sign:pc,verify:gc,utils:{randomPrivateKey:ec.utils.randomPrivateKey,lift_x:lc,pointToBytes:sc,numberToBytesBE:oa,bytesToNumberBE:ia,taggedHash:ic,mod:ka}}))(),mc="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,wc=e=>e instanceof Uint8Array,vc=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),bc=(e,t)=>e<<32-t|e>>>t;if(!(68===new Uint8Array(new Uint32Array([287454020]).buffer)[0]))throw new Error("Non little-endian hardware is not supported");const Ec=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function _c(e){if(!wc(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=Ec[e[n]];return t}function xc(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(t/2);for(let t=0;t<n.length;t++){const r=2*t,i=e.slice(r,r+2),s=Number.parseInt(i,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");n[t]=s}return n}function kc(e){if("string"==typeof e&&(e=function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(e)),!wc(e))throw new Error("expected Uint8Array, got "+typeof e);return e}function Ac(...e){const t=new Uint8Array(e.reduce(((e,t)=>e+t.length),0));let n=0;return e.forEach((e=>{if(!wc(e))throw new Error("Uint8Array expected");t.set(e,n),n+=e.length})),t}class Sc{clone(){return this._cloneInto()}}function Bc(e){const t=t=>e().update(kc(t)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function Ic(e=32){if(mc&&"function"==typeof mc.getRandomValues)return mc.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}function Tc(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function Oc(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}const Nc={number:Tc,bool:function(e){if("boolean"!=typeof e)throw new Error(`Expected boolean, not ${e}`)},bytes:Oc,hash:function(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");Tc(e.outputLen),Tc(e.blockLen)},exists:function(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")},output:function(e,t){Oc(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}};class Uc extends Sc{constructor(e,t,n,r){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=vc(this.buffer)}update(e){Nc.exists(this);const{view:t,buffer:n,blockLen:r}=this,i=(e=kc(e)).length;for(let s=0;s<i;){const o=Math.min(r-this.pos,i-s);if(o!==r)n.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===r&&(this.process(t,0),this.pos=0);else{const t=vc(e);for(;r<=i-s;s+=r)this.process(t,s)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){Nc.exists(this),Nc.output(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:r,isLE:i}=this;let{pos:s}=this;t[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>r-s&&(this.process(n,0),s=0);for(let e=s;e<r;e++)t[e]=0;!function(e,t,n,r){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),c=r?4:0,u=r?0:4;e.setUint32(t+c,o,r),e.setUint32(t+u,a,r)}(n,r-8,BigInt(8*this.length),i),this.process(n,0);const o=vc(e),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=a/4,u=this.get();if(c>u.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<c;e++)o.setUint32(4*e,u[e],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:r,finished:i,destroyed:s,pos:o}=this;return e.length=r,e.pos=o,e.finished=i,e.destroyed=s,r%t&&e.buffer.set(n),e}}const Rc=(e,t,n)=>e&t^e&n^t&n,Lc=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Cc=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Zc=new Uint32Array(64);class $c extends Uc{constructor(){super(64,32,8,!1),this.A=0|Cc[0],this.B=0|Cc[1],this.C=0|Cc[2],this.D=0|Cc[3],this.E=0|Cc[4],this.F=0|Cc[5],this.G=0|Cc[6],this.H=0|Cc[7]}get(){const{A:e,B:t,C:n,D:r,E:i,F:s,G:o,H:a}=this;return[e,t,n,r,i,s,o,a]}set(e,t,n,r,i,s,o,a){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|r,this.E=0|i,this.F=0|s,this.G=0|o,this.H=0|a}process(e,t){for(let n=0;n<16;n++,t+=4)Zc[n]=e.getUint32(t,!1);for(let e=16;e<64;e++){const t=Zc[e-15],n=Zc[e-2],r=bc(t,7)^bc(t,18)^t>>>3,i=bc(n,17)^bc(n,19)^n>>>10;Zc[e]=i+Zc[e-7]+r+Zc[e-16]|0}let{A:n,B:r,C:i,D:s,E:o,F:a,G:c,H:u}=this;for(let e=0;e<64;e++){const t=u+(bc(o,6)^bc(o,11)^bc(o,25))+((d=o)&a^~d&c)+Lc[e]+Zc[e]|0,l=(bc(n,2)^bc(n,13)^bc(n,22))+Rc(n,r,i)|0;u=c,c=a,a=o,o=s+t|0,s=i,i=r,r=n,n=t+l|0}var d;n=n+this.A|0,r=r+this.B|0,i=i+this.C|0,s=s+this.D|0,o=o+this.E|0,a=a+this.F|0,c=c+this.G|0,u=u+this.H|0,this.set(n,r,i,s,o,a,c,u)}roundClean(){Zc.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class Pc extends $c{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const jc=Bc((()=>new $c));
/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */
function Mc(e){if(!Number.isSafeInteger(e))throw new Error(`Wrong integer: ${e}`)}function zc(...e){const t=(e,t)=>n=>e(t(n)),n=Array.from(e).reverse().reduce(((e,n)=>e?t(e,n.encode):n.encode),void 0),r=e.reduce(((e,n)=>e?t(e,n.decode):n.decode),void 0);return{encode:n,decode:r}}function qc(e){return{encode:t=>{if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw new Error("alphabet.encode input should be an array of numbers");return t.map((t=>{if(Mc(t),t<0||t>=e.length)throw new Error(`Digit index outside alphabet: ${t} (alphabet: ${e.length})`);return e[t]}))},decode:t=>{if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw new Error("alphabet.decode input should be array of strings");return t.map((t=>{if("string"!=typeof t)throw new Error(`alphabet.decode: not string element=${t}`);const n=e.indexOf(t);if(-1===n)throw new Error(`Unknown letter: "${t}". Allowed: ${e}`);return n}))}}}function Hc(e=""){if("string"!=typeof e)throw new Error("join separator should be string");return{encode:t=>{if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw new Error("join.encode input should be array of strings");for(let e of t)if("string"!=typeof e)throw new Error(`join.encode: non-string input=${e}`);return t.join(e)},decode:t=>{if("string"!=typeof t)throw new Error("join.decode input should be string");return t.split(e)}}}function Fc(e,t="="){if(Mc(e),"string"!=typeof t)throw new Error("padding chr should be string");return{encode(n){if(!Array.isArray(n)||n.length&&"string"!=typeof n[0])throw new Error("padding.encode input should be array of strings");for(let e of n)if("string"!=typeof e)throw new Error(`padding.encode: non-string input=${e}`);for(;n.length*e%8;)n.push(t);return n},decode(n){if(!Array.isArray(n)||n.length&&"string"!=typeof n[0])throw new Error("padding.encode input should be array of strings");for(let e of n)if("string"!=typeof e)throw new Error(`padding.decode: non-string input=${e}`);let r=n.length;if(r*e%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;r>0&&n[r-1]===t;r--)if(!((r-1)*e%8))throw new Error("Invalid padding: string has too much padding");return n.slice(0,r)}}}function Dc(e){if("function"!=typeof e)throw new Error("normalize fn should be function");return{encode:e=>e,decode:t=>e(t)}}function Vc(e,t,n){if(t<2)throw new Error(`convertRadix: wrong from=${t}, base cannot be less than 2`);if(n<2)throw new Error(`convertRadix: wrong to=${n}, base cannot be less than 2`);if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let r=0;const i=[],s=Array.from(e);for(s.forEach((e=>{if(Mc(e),e<0||e>=t)throw new Error(`Wrong integer: ${e}`)}));;){let e=0,o=!0;for(let i=r;i<s.length;i++){const a=s[i],c=t*e+a;if(!Number.isSafeInteger(c)||t*e/t!==e||c-a!=t*e)throw new Error("convertRadix: carry overflow");if(e=c%n,s[i]=Math.floor(c/n),!Number.isSafeInteger(s[i])||s[i]*n+e!==c)throw new Error("convertRadix: carry overflow");o&&(s[i]?o=!1:r=i)}if(i.push(e),o)break}for(let t=0;t<e.length-1&&0===e[t];t++)i.push(0);return i.reverse()}Bc((()=>new Pc));const Kc=(e,t)=>t?Kc(t,e%t):e,Wc=(e,t)=>e+(t-Kc(e,t));function Gc(e,t,n,r){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(Wc(t,n)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${n} carryBits=${Wc(t,n)}`);let i=0,s=0;const o=2**n-1,a=[];for(const r of e){if(Mc(r),r>=2**t)throw new Error(`convertRadix2: invalid data word=${r} from=${t}`);if(i=i<<t|r,s+t>32)throw new Error(`convertRadix2: carry overflow pos=${s} from=${t}`);for(s+=t;s>=n;s-=n)a.push((i>>s-n&o)>>>0);i&=2**s-1}if(i=i<<n-s&o,!r&&s>=t)throw new Error("Excess padding");if(!r&&i)throw new Error(`Non-zero padding: ${i}`);return r&&s>0&&a.push(i>>>0),a}function Jc(e,t=!1){if(Mc(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(Wc(8,e)>32||Wc(e,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!(n instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return Gc(Array.from(n),8,e,!t)},decode:n=>{if(!Array.isArray(n)||n.length&&"number"!=typeof n[0])throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(Gc(n,e,8,t))}}}function Yc(e){if("function"!=typeof e)throw new Error("unsafeWrapper fn should be function");return function(...t){try{return e.apply(null,t)}catch(e){}}}const Qc=zc(Jc(4),qc("0123456789ABCDEF"),Hc("")),Xc=zc(Jc(5),qc("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),Fc(5),Hc(""));zc(Jc(5),qc("0123456789ABCDEFGHIJKLMNOPQRSTUV"),Fc(5),Hc("")),zc(Jc(5),qc("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),Hc(""),Dc((e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1"))));const eu=zc(Jc(6),qc("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),Fc(6),Hc("")),tu=zc(Jc(6),qc("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),Fc(6),Hc("")),nu=e=>zc(function(e){return Mc(e),{encode:t=>{if(!(t instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return Vc(Array.from(t),256,e)},decode:t=>{if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw new Error("radix.decode input should be array of strings");return Uint8Array.from(Vc(t,e,256))}}}(58),qc(e),Hc("")),ru=nu("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");nu("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),nu("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const iu=[0,2,3,5,6,7,9,10,11],su={encode(e){let t="";for(let n=0;n<e.length;n+=8){const r=e.subarray(n,n+8);t+=ru.encode(r).padStart(iu[r.length],"1")}return t},decode(e){let t=[];for(let n=0;n<e.length;n+=11){const r=e.slice(n,n+11),i=iu.indexOf(r.length),s=ru.decode(r);for(let e=0;e<s.length-i;e++)if(0!==s[e])throw new Error("base58xmr: wrong padding");t=t.concat(Array.from(s.slice(s.length-i)))}return Uint8Array.from(t)}},ou=zc(qc("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),Hc("")),au=[996825010,642813549,513874426,1027748829,705979059];function cu(e){const t=e>>25;let n=(33554431&e)<<5;for(let e=0;e<au.length;e++)1==(t>>e&1)&&(n^=au[e]);return n}function uu(e,t,n=1){const r=e.length;let i=1;for(let t=0;t<r;t++){const n=e.charCodeAt(t);if(n<33||n>126)throw new Error(`Invalid prefix (${e})`);i=cu(i)^n>>5}i=cu(i);for(let t=0;t<r;t++)i=cu(i)^31&e.charCodeAt(t);for(let e of t)i=cu(i)^e;for(let e=0;e<6;e++)i=cu(i);return i^=n,ou.encode(Gc([i%2**30],30,5,!1))}function du(e){const t="bech32"===e?1:734539939,n=Jc(5),r=n.decode,i=n.encode,s=Yc(r);function o(e,n=90){if("string"!=typeof e)throw new Error("bech32.decode input should be string, not "+typeof e);if(e.length<8||!1!==n&&e.length>n)throw new TypeError(`Wrong string length: ${e.length} (${e}). Expected (8..${n})`);const r=e.toLowerCase();if(e!==r&&e!==e.toUpperCase())throw new Error("String must be lowercase or uppercase");const i=(e=r).lastIndexOf("1");if(0===i||-1===i)throw new Error('Letter "1" must be present between prefix and data only');const s=e.slice(0,i),o=e.slice(i+1);if(o.length<6)throw new Error("Data must be at least 6 characters long");const a=ou.decode(o).slice(0,-6),c=uu(s,a,t);if(!o.endsWith(c))throw new Error(`Invalid checksum in ${e}: expected "${c}"`);return{prefix:s,words:a}}return{encode:function(e,n,r=90){if("string"!=typeof e)throw new Error("bech32.encode prefix should be string, not "+typeof e);if(!Array.isArray(n)||n.length&&"number"!=typeof n[0])throw new Error("bech32.encode words should be array of numbers, not "+typeof n);const i=e.length+7+n.length;if(!1!==r&&i>r)throw new TypeError(`Length ${i} exceeds limit ${r}`);return`${e=e.toLowerCase()}1${ou.encode(n)}${uu(e,n,t)}`},decode:o,decodeToBytes:function(e){const{prefix:t,words:n}=o(e,!1);return{prefix:t,words:n,bytes:r(n)}},decodeUnsafe:Yc(o),fromWords:r,fromWordsUnsafe:s,toWords:i}}const lu=du("bech32");du("bech32m");const fu={encode:e=>(new TextDecoder).decode(e),decode:e=>(new TextEncoder).encode(e)},hu={utf8:fu,hex:zc(Jc(4),qc("0123456789abcdef"),Hc(""),Dc((e=>{if("string"!=typeof e||e.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()}))),base16:Qc,base32:Xc,base64:eu,base64url:tu,base58:ru,base58xmr:su};function pu(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}function gu(e){if("boolean"!=typeof e)throw new Error(`boolean expected, not ${e}`)}function yu(e,...t){if(!((n=e)instanceof Uint8Array||null!=n&&"object"==typeof n&&"Uint8Array"===n.constructor.name))throw new Error("Uint8Array expected");var n;if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}
/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */Object.keys(hu).join(", ");const mu=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4));if(!(68===new Uint8Array(new Uint32Array([287454020]).buffer)[0]))throw new Error("Non little-endian hardware is not supported");const wu=16;function vu(e){return e<<1^283&-(e>>7)}function bu(e,t){let n=0;for(;t>0;t>>=1)n^=e&-(1&t),e=vu(e);return n}const Eu=(()=>{let e=new Uint8Array(256);for(let t=0,n=1;t<256;t++,n^=vu(n))e[t]=n;const t=new Uint8Array(256);t[0]=99;for(let n=0;n<255;n++){let r=e[255-n];r|=r<<8,t[e[n]]=255&(r^r>>4^r>>5^r>>6^r>>7^99)}return t})(),_u=Eu.map(((e,t)=>Eu.indexOf(t))),xu=e=>e<<8|e>>>24;function ku(e,t){if(256!==e.length)throw new Error("Wrong sbox length");const n=new Uint32Array(256).map(((n,r)=>t(e[r]))),r=n.map(xu),i=r.map(xu),s=i.map(xu),o=new Uint32Array(65536),a=new Uint32Array(65536),c=new Uint16Array(65536);for(let t=0;t<256;t++)for(let u=0;u<256;u++){const d=256*t+u;o[d]=n[t]^r[u],a[d]=i[t]^s[u],c[d]=e[t]<<8|e[u]}return{sbox:e,sbox2:c,T0:n,T1:r,T2:i,T3:s,T01:o,T23:a}}const Au=ku(Eu,(e=>bu(e,3)<<24|e<<16|e<<8|bu(e,2))),Su=ku(_u,(e=>bu(e,11)<<24|bu(e,13)<<16|bu(e,9)<<8|bu(e,14))),Bu=(()=>{const e=new Uint8Array(16);for(let t=0,n=1;t<16;t++,n=vu(n))e[t]=n;return e})();function Iu(e){yu(e);const t=e.length;if(![16,24,32].includes(t))throw new Error(`aes: wrong key size: should be 16, 24 or 32, got: ${t}`);const{sbox2:n}=Au,r=mu(e),i=r.length,s=e=>Ou(n,e,e,e,e),o=new Uint32Array(t+28);o.set(r);for(let e=i;e<o.length;e++){let t=o[e-1];e%i==0?t=s((a=t)<<24|a>>>8)^Bu[e/i-1]:i>6&&e%i==4&&(t=s(t)),o[e]=o[e-i]^t}var a;return o}function Tu(e,t,n,r,i,s){return e[n<<8&65280|r>>>8&255]^t[i>>>8&65280|s>>>24&255]}function Ou(e,t,n,r,i){return e[255&t|65280&n]|e[r>>>16&255|i>>>16&65280]<<16}function Nu(e,t,n,r,i){const{sbox2:s,T01:o,T23:a}=Au;let c=0;t^=e[c++],n^=e[c++],r^=e[c++],i^=e[c++];const u=e.length/4-2;for(let s=0;s<u;s++){const s=e[c++]^Tu(o,a,t,n,r,i),u=e[c++]^Tu(o,a,n,r,i,t),d=e[c++]^Tu(o,a,r,i,t,n),l=e[c++]^Tu(o,a,i,t,n,r);t=s,n=u,r=d,i=l}return{s0:e[c++]^Ou(s,t,n,r,i),s1:e[c++]^Ou(s,n,r,i,t),s2:e[c++]^Ou(s,r,i,t,n),s3:e[c++]^Ou(s,i,t,n,r)}}function Uu(e,t,n,r,i){const{sbox2:s,T01:o,T23:a}=Su;let c=0;t^=e[c++],n^=e[c++],r^=e[c++],i^=e[c++];const u=e.length/4-2;for(let s=0;s<u;s++){const s=e[c++]^Tu(o,a,t,i,r,n),u=e[c++]^Tu(o,a,n,t,i,r),d=e[c++]^Tu(o,a,r,n,t,i),l=e[c++]^Tu(o,a,i,r,n,t);t=s,n=u,r=d,i=l}return{s0:e[c++]^Ou(s,t,i,r,n),s1:e[c++]^Ou(s,n,t,i,r),s2:e[c++]^Ou(s,r,n,t,i),s3:e[c++]^Ou(s,i,r,n,t)}}function Ru(e,t){if(!t)return new Uint8Array(e);if(yu(t),t.length<e)throw new Error(`aes: wrong destination length, expected at least ${e}, got: ${t.length}`);return t}const Lu=(Cu={blockSize:16,nonceLength:16},Zu=function(e,t,n={}){yu(e),yu(t,16);const r=!n.disablePadding;return{encrypt:(n,i)=>{const s=Iu(e),{b:o,o:a,out:c}=function(e,t,n){let r=e.length;const i=r%wu;if(!t&&0!==i)throw new Error("aec/(cbc-ecb): unpadded plaintext with disabled padding");const s=mu(e);if(t){let e=wu-i;e||(e=wu),r+=e}const o=Ru(r,n);return{b:s,o:mu(o),out:o}}(n,r,i),u=mu(t);let d=u[0],l=u[1],f=u[2],h=u[3],p=0;for(;p+4<=o.length;)d^=o[p+0],l^=o[p+1],f^=o[p+2],h^=o[p+3],({s0:d,s1:l,s2:f,s3:h}=Nu(s,d,l,f,h)),a[p++]=d,a[p++]=l,a[p++]=f,a[p++]=h;if(r){const e=function(e){const t=new Uint8Array(16),n=mu(t);t.set(e);const r=wu-e.length;for(let e=wu-r;e<wu;e++)t[e]=r;return n}(n.subarray(4*p));d^=e[0],l^=e[1],f^=e[2],h^=e[3],({s0:d,s1:l,s2:f,s3:h}=Nu(s,d,l,f,h)),a[p++]=d,a[p++]=l,a[p++]=f,a[p++]=h}return s.fill(0),c},decrypt:(n,i)=>{!function(e){if(yu(e),e.length%wu!=0)throw new Error("aes/(cbc-ecb).decrypt ciphertext should consist of blocks with size 16")}(n);const s=function(e){const t=Iu(e),n=t.slice(),r=t.length,{sbox2:i}=Au,{T0:s,T1:o,T2:a,T3:c}=Su;for(let e=0;e<r;e+=4)for(let i=0;i<4;i++)n[e+i]=t[r-e-4+i];t.fill(0);for(let e=4;e<r-4;e++){const t=n[e],r=Ou(i,t,t,t,t);n[e]=s[255&r]^o[r>>>8&255]^a[r>>>16&255]^c[r>>>24]}return n}(e),o=mu(t),a=Ru(n.length,i),c=mu(n),u=mu(a);let d=o[0],l=o[1],f=o[2],h=o[3];for(let e=0;e+4<=c.length;){const t=d,n=l,r=f,i=h;d=c[e+0],l=c[e+1],f=c[e+2],h=c[e+3];const{s0:o,s1:a,s2:p,s3:g}=Uu(s,d,l,f,h);u[e++]=o^t,u[e++]=a^n,u[e++]=p^r,u[e++]=g^i}return s.fill(0),function(e,t){if(!t)return e;const n=e.length;if(!n)throw new Error("aes/pcks5: empty ciphertext not allowed");const r=e[n-1];if(r<=0||r>16)throw new Error(`aes/pcks5: wrong padding byte: ${r}`);const i=e.subarray(0,-r);for(let t=0;t<r;t++)if(e[n-t-1]!==r)throw new Error("aes/pcks5: wrong padding");return i}(a,r)}}},Object.assign(Zu,Cu),Zu);var Cu,Zu;const $u=e=>Uint8Array.from(e.split("").map((e=>e.charCodeAt(0)))),Pu=$u("expand 16-byte k"),ju=$u("expand 32-byte k"),Mu=mu(Pu),zu=mu(ju);function qu(e,t){return e<<t|e>>>32-t}function Hu(e){return e.byteOffset%4==0}zu.slice();const Fu=2**32-1,Du=new Uint32Array;function Vu(e,t){const{allowShortKeys:n,extendNonceFn:r,counterLength:i,counterRight:s,rounds:o}=function(e,t){if(null==t||"object"!=typeof t)throw new Error("options must be defined");return Object.assign(e,t)}({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},t);if("function"!=typeof e)throw new Error("core must be a function");return pu(i),pu(o),gu(s),gu(n),(t,a,c,u,d=0)=>{yu(t),yu(a),yu(c);const l=c.length;if(u||(u=new Uint8Array(l)),yu(u),pu(d),d<0||d>=Fu)throw new Error("arx: counter overflow");if(u.length<l)throw new Error(`arx: output (${u.length}) is shorter than data (${l})`);const f=[];let h,p,g=t.length;if(32===g)h=t.slice(),f.push(h),p=zu;else{if(16!==g||!n)throw new Error(`arx: invalid 32-byte key, got length=${g}`);h=new Uint8Array(32),h.set(t),h.set(t,16),p=Mu,f.push(h)}Hu(a)||(a=a.slice(),f.push(a));const y=mu(h);if(r){if(24!==a.length)throw new Error("arx: extended nonce must be 24 bytes");r(p,y,mu(a.subarray(0,16)),y),a=a.subarray(16)}const m=16-i;if(m!==a.length)throw new Error(`arx: nonce must be ${m} or 16 bytes`);if(12!==m){const e=new Uint8Array(12);e.set(a,s?0:12-a.length),a=e,f.push(a)}const w=mu(a);for(!function(e,t,n,r,i,s,o,a){const c=i.length,u=new Uint8Array(64),d=mu(u),l=Hu(i)&&Hu(s),f=l?mu(i):Du,h=l?mu(s):Du;for(let p=0;p<c;o++){if(e(t,n,r,d,o,a),o>=Fu)throw new Error("arx: counter overflow");const g=Math.min(64,c-p);if(l&&64===g){const e=p/4;if(p%4!=0)throw new Error("arx: invalid block position");for(let t,n=0;n<16;n++)t=e+n,h[t]=f[t]^d[n];p+=64}else{for(let e,t=0;t<g;t++)e=p+t,s[e]=i[e]^u[t];p+=g}}}(e,p,y,w,c,u,d,o);f.length>0;)f.pop().fill(0);return u}}function Ku(e,t,n,r,i,s=20){let o=e[0],a=e[1],c=e[2],u=e[3],d=t[0],l=t[1],f=t[2],h=t[3],p=t[4],g=t[5],y=t[6],m=t[7],w=i,v=n[0],b=n[1],E=n[2],_=o,x=a,k=c,A=u,S=d,B=l,I=f,T=h,O=p,N=g,U=y,R=m,L=w,C=v,Z=b,$=E;for(let e=0;e<s;e+=2)_=_+S|0,L=qu(L^_,16),O=O+L|0,S=qu(S^O,12),_=_+S|0,L=qu(L^_,8),O=O+L|0,S=qu(S^O,7),x=x+B|0,C=qu(C^x,16),N=N+C|0,B=qu(B^N,12),x=x+B|0,C=qu(C^x,8),N=N+C|0,B=qu(B^N,7),k=k+I|0,Z=qu(Z^k,16),U=U+Z|0,I=qu(I^U,12),k=k+I|0,Z=qu(Z^k,8),U=U+Z|0,I=qu(I^U,7),A=A+T|0,$=qu($^A,16),R=R+$|0,T=qu(T^R,12),A=A+T|0,$=qu($^A,8),R=R+$|0,T=qu(T^R,7),_=_+B|0,$=qu($^_,16),U=U+$|0,B=qu(B^U,12),_=_+B|0,$=qu($^_,8),U=U+$|0,B=qu(B^U,7),x=x+I|0,L=qu(L^x,16),R=R+L|0,I=qu(I^R,12),x=x+I|0,L=qu(L^x,8),R=R+L|0,I=qu(I^R,7),k=k+T|0,C=qu(C^k,16),O=O+C|0,T=qu(T^O,12),k=k+T|0,C=qu(C^k,8),O=O+C|0,T=qu(T^O,7),A=A+S|0,Z=qu(Z^A,16),N=N+Z|0,S=qu(S^N,12),A=A+S|0,Z=qu(Z^A,8),N=N+Z|0,S=qu(S^N,7);let P=0;r[P++]=o+_|0,r[P++]=a+x|0,r[P++]=c+k|0,r[P++]=u+A|0,r[P++]=d+S|0,r[P++]=l+B|0,r[P++]=f+I|0,r[P++]=h+T|0,r[P++]=p+O|0,r[P++]=g+N|0,r[P++]=y+U|0,r[P++]=m+R|0,r[P++]=w+L|0,r[P++]=v+C|0,r[P++]=b+Z|0,r[P++]=E+$|0}const Wu=Vu(Ku,{counterRight:!1,counterLength:4,allowShortKeys:!1});class Gu extends Sc{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,Nc.hash(e);const n=kc(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,i=new Uint8Array(r);i.set(n.length>r?e.create().update(n).digest():n);for(let e=0;e<i.length;e++)i[e]^=54;this.iHash.update(i),this.oHash=e.create();for(let e=0;e<i.length;e++)i[e]^=106;this.oHash.update(i),i.fill(0)}update(e){return Nc.exists(this),this.iHash.update(e),this}digestInto(e){Nc.exists(this),Nc.bytes(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:r,destroyed:i,blockLen:s,outputLen:o}=this;return e.finished=r,e.destroyed=i,e.blockLen=s,e.outputLen=o,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Ju=(e,t,n)=>new Gu(e,t).update(n).digest();Ju.create=(e,t)=>new Gu(e,t);const Yu=new Uint8Array([0]),Qu=new Uint8Array;var Xu=Object.defineProperty,ed=(e,t)=>{for(var n in t)Xu(e,n,{get:t[n],enumerable:!0})},td=Symbol("verified");function nd(e){if(!(e instanceof Object))return!1;if("number"!=typeof e.kind)return!1;if("string"!=typeof e.content)return!1;if("number"!=typeof e.created_at)return!1;if("string"!=typeof e.pubkey)return!1;if(!e.pubkey.match(/^[a-f0-9]{64}$/))return!1;if(!Array.isArray(e.tags))return!1;for(let t=0;t<e.tags.length;t++){let n=e.tags[t];if(!Array.isArray(n))return!1;for(let e=0;e<n.length;e++)if("object"==typeof n[e])return!1}return!0}ed({},{Queue:()=>dd,QueueNode:()=>ud,binarySearch:()=>cd,insertEventIntoAscendingList:()=>ad,insertEventIntoDescendingList:()=>od,normalizeURL:()=>sd,utf8Decoder:()=>rd,utf8Encoder:()=>id});var rd=new TextDecoder("utf-8"),id=new TextEncoder;function sd(e){-1===e.indexOf("://")&&(e="wss://"+e);let t=new URL(e);return t.pathname=t.pathname.replace(/\/+/g,"/"),t.pathname.endsWith("/")&&(t.pathname=t.pathname.slice(0,-1)),("80"===t.port&&"ws:"===t.protocol||"443"===t.port&&"wss:"===t.protocol)&&(t.port=""),t.searchParams.sort(),t.hash="",t.toString()}function od(e,t){const[n,r]=cd(e,(e=>t.id===e.id?0:t.created_at===e.created_at?-1:e.created_at-t.created_at));return r||e.splice(n,0,t),e}function ad(e,t){const[n,r]=cd(e,(e=>t.id===e.id?0:t.created_at===e.created_at?-1:t.created_at-e.created_at));return r||e.splice(n,0,t),e}function cd(e,t){let n=0,r=e.length-1;for(;n<=r;){const i=Math.floor((n+r)/2),s=t(e[i]);if(0===s)return[i,!0];s<0?r=i-1:n=i+1}return[n,!1]}var ud=class{value;next=null;prev=null;constructor(e){this.value=e}},dd=class{first;last;constructor(){this.first=null,this.last=null}enqueue(e){const t=new ud(e);return this.last?this.last===this.first?(this.last=t,this.last.prev=this.first,this.first.next=t):(t.prev=this.last,this.last.next=t,this.last=t):(this.first=t,this.last=t),!0}dequeue(){if(!this.first)return null;if(this.first===this.last){const e=this.first;return this.first=null,this.last=null,e.value}const e=this.first;return this.first=e.next,e.value}};function ld(e){return _c(jc(id.encode(function(e){if(!nd(e))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,e.pubkey,e.created_at,e.kind,e.tags,e.content])}(e))))}var fd=new class{generateSecretKey(){return yc.utils.randomPrivateKey()}getPublicKey(e){return _c(yc.getPublicKey(e))}finalizeEvent(e,t){const n=e;return n.pubkey=_c(yc.getPublicKey(t)),n.id=ld(n),n.sig=_c(yc.sign(ld(n),t)),n[td]=!0,n}verifyEvent(e){if("boolean"==typeof e[td])return e[td];const t=ld(e);if(t!==e.id)return e[td]=!1,!1;try{const n=yc.verify(e.sig,t,e.pubkey);return e[td]=n,n}catch(t){return e[td]=!1,!1}}},hd=fd.generateSecretKey,pd=fd.getPublicKey,gd=fd.finalizeEvent,yd=fd.verifyEvent;function md(e){return 1e3<=e&&e<1e4||[1,2,4,5,6,7,8,16,40,41,42,43,44].includes(e)}function wd(e){return[0,3].includes(e)||1e4<=e&&e<2e4}function vd(e){return 2e4<=e&&e<3e4}function bd(e){return 3e4<=e&&e<4e4}function Ed(e){return md(e)?"regular":wd(e)?"replaceable":vd(e)?"ephemeral":bd(e)?"parameterized":"unknown"}function _d(e,t){const n=t instanceof Array?t:[t];return nd(e)&&n.includes(e.kind)||!1}ed({},{Application:()=>Ll,BadgeAward:()=>Nd,BadgeDefinition:()=>Bl,BlockedRelaysList:()=>cl,BookmarkList:()=>sl,Bookmarksets:()=>kl,Calendar:()=>zl,CalendarEventRSVP:()=>ql,ChannelCreation:()=>Cd,ChannelHideMessage:()=>Pd,ChannelMessage:()=>$d,ChannelMetadata:()=>Zd,ChannelMuteUser:()=>jd,ClassifiedListing:()=>$l,ClientAuth:()=>yl,CommunitiesList:()=>ol,CommunityDefinition:()=>Dl,CommunityPostApproval:()=>Wd,Contacts:()=>Sd,CreateOrUpdateProduct:()=>Ol,CreateOrUpdateStall:()=>Tl,Curationsets:()=>Al,Date:()=>jl,DirectMessageRelaysList:()=>fl,DraftClassifiedListing:()=>Pl,DraftLong:()=>Ul,Emojisets:()=>Rl,EncryptedDirectMessage:()=>Bd,EventDeletion:()=>Id,FileMetadata:()=>qd,FileServerPreference:()=>hl,Followsets:()=>El,GenericRepost:()=>Ld,Genericlists:()=>_l,GiftWrap:()=>zd,HTTPAuth:()=>bl,Handlerinformation:()=>Fl,Handlerrecommendation:()=>Hl,Highlights:()=>tl,InterestsList:()=>dl,Interestsets:()=>Il,JobFeedback:()=>Yd,JobRequest:()=>Gd,JobResult:()=>Jd,Label:()=>Kd,LightningPubRPC:()=>gl,LiveChatMessage:()=>Hd,LiveEvent:()=>Cl,LongFormArticle:()=>Nl,Metadata:()=>xd,Mutelist:()=>nl,NWCWalletInfo:()=>pl,NWCWalletRequest:()=>ml,NWCWalletResponse:()=>wl,NostrConnect:()=>vl,OpenTimestamps:()=>Md,Pinlist:()=>rl,PrivateDirectMessage:()=>Rd,ProblemTracker:()=>Fd,ProfileBadges:()=>Sl,PublicChatsList:()=>al,Reaction:()=>Od,RecommendRelay:()=>Ad,RelayList:()=>il,Relaysets:()=>xl,Report:()=>Dd,Reporting:()=>Vd,Repost:()=>Td,Seal:()=>Ud,SearchRelaysList:()=>ul,ShortTextNote:()=>kd,Time:()=>Ml,UserEmojiList:()=>ll,UserStatuses:()=>Zl,Zap:()=>el,ZapGoal:()=>Qd,ZapRequest:()=>Xd,classifyKind:()=>Ed,isEphemeralKind:()=>vd,isKind:()=>_d,isParameterizedReplaceableKind:()=>bd,isRegularKind:()=>md,isReplaceableKind:()=>wd});var xd=0,kd=1,Ad=2,Sd=3,Bd=4,Id=5,Td=6,Od=7,Nd=8,Ud=13,Rd=14,Ld=16,Cd=40,Zd=41,$d=42,Pd=43,jd=44,Md=1040,zd=1059,qd=1063,Hd=1311,Fd=1971,Dd=1984,Vd=1984,Kd=1985,Wd=4550,Gd=5999,Jd=6999,Yd=7e3,Qd=9041,Xd=9734,el=9735,tl=9802,nl=1e4,rl=10001,il=10002,sl=10003,ol=10004,al=10005,cl=10006,ul=10007,dl=10015,ll=10030,fl=10050,hl=10096,pl=13194,gl=21e3,yl=22242,ml=23194,wl=23195,vl=24133,bl=27235,El=3e4,_l=30001,xl=30002,kl=30003,Al=30004,Sl=30008,Bl=30009,Il=30015,Tl=30017,Ol=30018,Nl=30023,Ul=30024,Rl=30030,Ll=30078,Cl=30311,Zl=30315,$l=30402,Pl=30403,jl=31922,Ml=31923,zl=31924,ql=31925,Hl=31989,Fl=31990,Dl=34550;function Vl(e,t){if(e.ids&&-1===e.ids.indexOf(t.id))return!1;if(e.kinds&&-1===e.kinds.indexOf(t.kind))return!1;if(e.authors&&-1===e.authors.indexOf(t.pubkey))return!1;for(let n in e)if("#"===n[0]){let r=e[`#${n.slice(1)}`];if(r&&!t.tags.find((([e,t])=>e===n.slice(1)&&-1!==r.indexOf(t))))return!1}return!(e.since&&t.created_at<e.since)&&!(e.until&&t.created_at>e.until)}function Kl(e,t){let n=t.length+3,r=e.indexOf(`"${t}":`)+n,i=e.slice(r).indexOf('"')+r+1;return e.slice(i,i+64)}function Wl(e,t){let n=t.length,r=e.indexOf(`"${t}":`)+n+3,i=e.slice(r),s=Math.min(i.indexOf(","),i.indexOf("}"));return parseInt(i.slice(0,s),10)}function Gl(e){let t=e.slice(0,22).indexOf('"EVENT"');if(-1===t)return null;let n=e.slice(t+7+1).indexOf('"');if(-1===n)return null;let r=t+7+1+n,i=e.slice(r+1,80).indexOf('"');if(-1===i)return null;let s=r+1+i;return e.slice(r+1,s)}function Jl(e,t){return t===Kl(e,"id")}function Yl(e,t){return t===Kl(e,"pubkey")}function Ql(e,t){return t===Wl(e,"kind")}ed({},{getHex64:()=>Kl,getInt:()=>Wl,getSubscriptionId:()=>Gl,matchEventId:()=>Jl,matchEventKind:()=>Ql,matchEventPubkey:()=>Yl});function Xl(e,t){return{kind:yl,created_at:Math.floor(Date.now()/1e3),tags:[["relay",e],["challenge",t]],content:""}}async function ef(){return new Promise((e=>{const t=new MessageChannel,n=()=>{t.port1.removeEventListener("message",n),e()};t.port1.addEventListener("message",n),t.port2.postMessage(0),t.port1.start()}))}ed({},{makeAuthEvent:()=>Xl});var tf,nf=e=>(e[td]=!0,!0),rf=class{url;_connected=!1;onclose=null;onnotice=e=>console.debug(`NOTICE from ${this.url}: ${e}`);_onauth=null;baseEoseTimeout=4400;connectionTimeout=4400;publishTimeout=4400;openSubs=new Map;connectionTimeoutHandle;connectionPromise;openCountRequests=new Map;openEventPublishes=new Map;ws;incomingMessageQueue=new dd;queueRunning=!1;challenge;serial=0;verifyEvent;_WebSocket;constructor(e,t){this.url=sd(e),this.verifyEvent=t.verifyEvent,this._WebSocket=t.websocketImplementation||WebSocket}static async connect(e,t){const n=new rf(e,t);return await n.connect(),n}closeAllSubscriptions(e){for(let[t,n]of this.openSubs)n.close(e);this.openSubs.clear();for(let[t,n]of this.openEventPublishes)n.reject(new Error(e));this.openEventPublishes.clear();for(let[t,n]of this.openCountRequests)n.reject(new Error(e));this.openCountRequests.clear()}get connected(){return this._connected}async connect(){return this.connectionPromise||(this.challenge=void 0,this.connectionPromise=new Promise(((e,t)=>{this.connectionTimeoutHandle=setTimeout((()=>{t("connection timed out"),this.connectionPromise=void 0,this.onclose?.(),this.closeAllSubscriptions("relay connection timed out")}),this.connectionTimeout);try{this.ws=new this._WebSocket(this.url)}catch(e){return void t(e)}this.ws.onopen=()=>{clearTimeout(this.connectionTimeoutHandle),this._connected=!0,e()},this.ws.onerror=e=>{t(e.message||"websocket error"),this._connected&&(this._connected=!1,this.connectionPromise=void 0,this.onclose?.(),this.closeAllSubscriptions("relay connection errored"))},this.ws.onclose=async()=>{this._connected&&(this._connected=!1,this.connectionPromise=void 0,this.onclose?.(),this.closeAllSubscriptions("relay connection closed"))},this.ws.onmessage=this._onmessage.bind(this)}))),this.connectionPromise}async runQueue(){for(this.queueRunning=!0;!1!==this.handleNext();)await ef();this.queueRunning=!1}handleNext(){const e=this.incomingMessageQueue.dequeue();if(!e)return!1;const t=Gl(e);if(t){const n=this.openSubs.get(t);if(!n)return;const r=Kl(e,"id"),i=n.alreadyHaveEvent?.(r);if(n.receivedEvent?.(this,r),i)return}try{let t=JSON.parse(e);switch(t[0]){case"EVENT":{const e=this.openSubs.get(t[1]),n=t[2];return void(this.verifyEvent(n)&&function(e,t){for(let n=0;n<e.length;n++)if(Vl(e[n],t))return!0;return!1}(e.filters,n)&&e.onevent(n))}case"COUNT":{const e=t[1],n=t[2],r=this.openCountRequests.get(e);return void(r&&(r.resolve(n.count),this.openCountRequests.delete(e)))}case"EOSE":{const e=this.openSubs.get(t[1]);if(!e)return;return void e.receivedEose()}case"OK":{const e=t[1],n=t[2],r=t[3],i=this.openEventPublishes.get(e);return void(i&&(n?i.resolve(r):i.reject(new Error(r)),this.openEventPublishes.delete(e)))}case"CLOSED":{const e=t[1],n=this.openSubs.get(e);if(!n)return;return n.closed=!0,void n.close(t[2])}case"NOTICE":return void this.onnotice(t[1]);case"AUTH":return this.challenge=t[1],void this._onauth?.(t[1])}}catch(e){return}}async send(e){if(!this.connectionPromise)throw new Error("sending on closed connection");this.connectionPromise.then((()=>{this.ws?.send(e)}))}async auth(e){if(!this.challenge)throw new Error("can't perform auth, no challenge was received");const t=await e(Xl(this.url,this.challenge)),n=new Promise(((e,n)=>{this.openEventPublishes.set(t.id,{resolve:e,reject:n})}));return this.send('["AUTH",'+JSON.stringify(t)+"]"),n}async publish(e){const t=new Promise(((t,n)=>{this.openEventPublishes.set(e.id,{resolve:t,reject:n})}));return this.send('["EVENT",'+JSON.stringify(e)+"]"),setTimeout((()=>{const t=this.openEventPublishes.get(e.id);t&&(t.reject(new Error("publish timed out")),this.openEventPublishes.delete(e.id))}),this.publishTimeout),t}async count(e,t){this.serial++;const n=t?.id||"count:"+this.serial,r=new Promise(((e,t)=>{this.openCountRequests.set(n,{resolve:e,reject:t})}));return this.send('["COUNT","'+n+'",'+JSON.stringify(e).substring(1)),r}subscribe(e,t){const n=this.prepareSubscription(e,t);return n.fire(),n}prepareSubscription(e,t){this.serial++;const n=t.id||"sub:"+this.serial,r=new sf(this,n,e,t);return this.openSubs.set(n,r),r}close(){this.closeAllSubscriptions("relay connection closed by us"),this._connected=!1,this.ws?.close()}_onmessage(e){this.incomingMessageQueue.enqueue(e.data),this.queueRunning||this.runQueue()}},sf=class{relay;id;closed=!1;eosed=!1;filters;alreadyHaveEvent;receivedEvent;onevent;oneose;onclose;eoseTimeout;eoseTimeoutHandle;constructor(e,t,n,r){this.relay=e,this.filters=n,this.id=t,this.alreadyHaveEvent=r.alreadyHaveEvent,this.receivedEvent=r.receivedEvent,this.eoseTimeout=r.eoseTimeout||e.baseEoseTimeout,this.oneose=r.oneose,this.onclose=r.onclose,this.onevent=r.onevent||(e=>{console.warn(`onevent() callback not defined for subscription '${this.id}' in relay ${this.relay.url}. event received:`,e)})}fire(){this.relay.send('["REQ","'+this.id+'",'+JSON.stringify(this.filters).substring(1)),this.eoseTimeoutHandle=setTimeout(this.receivedEose.bind(this),this.eoseTimeout)}receivedEose(){this.eosed||(clearTimeout(this.eoseTimeoutHandle),this.eosed=!0,this.oneose?.())}close(e="closed by caller"){!this.closed&&this.relay.connected&&(this.relay.send('["CLOSE",'+JSON.stringify(this.id)+"]"),this.closed=!0),this.relay.openSubs.delete(this.id),this.onclose?.(e)}},of=class{relays=new Map;seenOn=new Map;trackRelays=!1;verifyEvent;trustedRelayURLs=new Set;_WebSocket;constructor(e){this.verifyEvent=e.verifyEvent,this._WebSocket=e.websocketImplementation}async ensureRelay(e,t){e=sd(e);let n=this.relays.get(e);return n||(n=new rf(e,{verifyEvent:this.trustedRelayURLs.has(e)?nf:this.verifyEvent,websocketImplementation:this._WebSocket}),t?.connectionTimeout&&(n.connectionTimeout=t.connectionTimeout),this.relays.set(e,n)),await n.connect(),n}close(e){e.map(sd).forEach((e=>{this.relays.get(e)?.close()}))}subscribeMany(e,t,n){return this.subscribeManyMap(Object.fromEntries(e.map((e=>[e,t]))),n)}subscribeManyMap(e,t){this.trackRelays&&(t.receivedEvent=(e,t)=>{let n=this.seenOn.get(t);n||(n=new Set,this.seenOn.set(t,n)),n.add(e)});const n=new Set,r=[],i=Object.keys(e).length,s=[];let o=e=>{s[e]=!0,s.filter((e=>e)).length===i&&(t.oneose?.(),o=()=>{})};const a=[];let c=(e,n)=>{o(e),a[e]=n,a.filter((e=>e)).length===i&&(t.onclose?.(a),c=()=>{})};const u=e=>{if(t.alreadyHaveEvent?.(e))return!0;const r=n.has(e);return n.add(e),r},d=Promise.all(Object.entries(e).map((async(e,n,i)=>{if(i.indexOf(e)!==n)return void c(n,"duplicate url");let s,[a,d]=e;a=sd(a);try{s=await this.ensureRelay(a,{connectionTimeout:t.maxWait?Math.max(.8*t.maxWait,t.maxWait-1e3):void 0})}catch(e){return void c(n,e?.message||String(e))}let l=s.subscribe(d,{...t,oneose:()=>o(n),onclose:e=>c(n,e),alreadyHaveEvent:u,eoseTimeout:t.maxWait});r.push(l)})));return{async close(){await d,r.forEach((e=>{e.close()}))}}}subscribeManyEose(e,t,n){const r=this.subscribeMany(e,t,{...n,oneose(){r.close()}});return r}async querySync(e,t,n){return new Promise((async r=>{const i=[];this.subscribeManyEose(e,[t],{...n,onevent(e){i.push(e)},onclose(e){r(i)}})}))}async get(e,t,n){t.limit=1;const r=await this.querySync(e,t,n);return r.sort(((e,t)=>t.created_at-e.created_at)),r[0]||null}publish(e,t){return e.map(sd).map((async(e,n,r)=>{if(r.indexOf(e)!==n)return Promise.reject("duplicate url");let i=await this.ensureRelay(e);return i.publish(t).then((e=>{if(this.trackRelays){let e=this.seenOn.get(t.id);e||(e=new Set,this.seenOn.set(t.id,e)),e.add(i)}return e}))}))}listConnectionStatus(){const e=new Map;return this.relays.forEach(((t,n)=>e.set(n,t.connected))),e}destroy(){this.relays.forEach((e=>e.close())),this.relays=new Map}};try{tf=WebSocket}catch{}var af=class extends of{constructor(){super({verifyEvent:yd,websocketImplementation:tf})}};ed({},{BECH32_REGEX:()=>df,Bech32MaxSize:()=>uf,NostrTypeGuard:()=>cf,decode:()=>lf,encodeBytes:()=>mf,naddrEncode:()=>bf,neventEncode:()=>vf,noteEncode:()=>gf,nprofileEncode:()=>wf,npubEncode:()=>pf,nsecEncode:()=>hf});var cf={isNProfile:e=>/^nprofile1[a-z\d]+$/.test(e||""),isNEvent:e=>/^nevent1[a-z\d]+$/.test(e||""),isNAddr:e=>/^naddr1[a-z\d]+$/.test(e||""),isNSec:e=>/^nsec1[a-z\d]{58}$/.test(e||""),isNPub:e=>/^npub1[a-z\d]{58}$/.test(e||""),isNote:e=>/^note1[a-z\d]+$/.test(e||""),isNcryptsec:e=>/^ncryptsec1[a-z\d]+$/.test(e||"")},uf=5e3,df=/[\x21-\x7E]{1,83}1[023456789acdefghjklmnpqrstuvwxyz]{6,}/;function lf(e){let{prefix:t,words:n}=lu.decode(e,uf),r=new Uint8Array(lu.fromWords(n));switch(t){case"nprofile":{let e=ff(r);if(!e[0]?.[0])throw new Error("missing TLV 0 for nprofile");if(32!==e[0][0].length)throw new Error("TLV 0 should be 32 bytes");return{type:"nprofile",data:{pubkey:_c(e[0][0]),relays:e[1]?e[1].map((e=>rd.decode(e))):[]}}}case"nevent":{let e=ff(r);if(!e[0]?.[0])throw new Error("missing TLV 0 for nevent");if(32!==e[0][0].length)throw new Error("TLV 0 should be 32 bytes");if(e[2]&&32!==e[2][0].length)throw new Error("TLV 2 should be 32 bytes");if(e[3]&&4!==e[3][0].length)throw new Error("TLV 3 should be 4 bytes");return{type:"nevent",data:{id:_c(e[0][0]),relays:e[1]?e[1].map((e=>rd.decode(e))):[],author:e[2]?.[0]?_c(e[2][0]):void 0,kind:e[3]?.[0]?parseInt(_c(e[3][0]),16):void 0}}}case"naddr":{let e=ff(r);if(!e[0]?.[0])throw new Error("missing TLV 0 for naddr");if(!e[2]?.[0])throw new Error("missing TLV 2 for naddr");if(32!==e[2][0].length)throw new Error("TLV 2 should be 32 bytes");if(!e[3]?.[0])throw new Error("missing TLV 3 for naddr");if(4!==e[3][0].length)throw new Error("TLV 3 should be 4 bytes");return{type:"naddr",data:{identifier:rd.decode(e[0][0]),pubkey:_c(e[2][0]),kind:parseInt(_c(e[3][0]),16),relays:e[1]?e[1].map((e=>rd.decode(e))):[]}}}case"nsec":return{type:t,data:r};case"npub":case"note":return{type:t,data:_c(r)};default:throw new Error(`unknown prefix ${t}`)}}function ff(e){let t={},n=e;for(;n.length>0;){let e=n[0],r=n[1],i=n.slice(2,2+r);if(n=n.slice(2+r),i.length<r)throw new Error(`not enough data to read on TLV ${e}`);t[e]=t[e]||[],t[e].push(i)}return t}function hf(e){return mf("nsec",e)}function pf(e){return mf("npub",xc(e))}function gf(e){return mf("note",xc(e))}function yf(e,t){let n=lu.toWords(t);return lu.encode(e,n,uf)}function mf(e,t){return yf(e,t)}function wf(e){let t=Ef({0:[xc(e.pubkey)],1:(e.relays||[]).map((e=>id.encode(e)))});return yf("nprofile",t)}function vf(e){let t;void 0!==e.kind&&(t=function(e){const t=new Uint8Array(4);return t[0]=e>>24&255,t[1]=e>>16&255,t[2]=e>>8&255,t[3]=255&e,t}(e.kind));let n=Ef({0:[xc(e.id)],1:(e.relays||[]).map((e=>id.encode(e))),2:e.author?[xc(e.author)]:[],3:t?[new Uint8Array(t)]:[]});return yf("nevent",n)}function bf(e){let t=new ArrayBuffer(4);new DataView(t).setUint32(0,e.kind,!1);let n=Ef({0:[id.encode(e.identifier)],1:(e.relays||[]).map((e=>id.encode(e))),2:[xc(e.pubkey)],3:[new Uint8Array(t)]});return yf("naddr",n)}function Ef(e){let t=[];return Object.entries(e).reverse().forEach((([e,n])=>{n.forEach((n=>{let r=new Uint8Array(n.length+2);r.set([parseInt(e)],0),r.set([n.length],1),r.set(n,2),t.push(r)}))})),Ac(...t)}async function _f(e,t,n){const r=e instanceof Uint8Array?_c(e):e,i=kf(ec.getSharedSecret(r,"02"+t));let s=Uint8Array.from(Ic(16)),o=id.encode(n),a=Lu(i,s).encrypt(o);return`${eu.encode(new Uint8Array(a))}?iv=${eu.encode(new Uint8Array(s.buffer))}`}async function xf(e,t,n){const r=e instanceof Uint8Array?_c(e):e;let[i,s]=n.split("?iv="),o=kf(ec.getSharedSecret(r,"02"+t)),a=eu.decode(s),c=eu.decode(i),u=Lu(o,a).decrypt(c);return rd.decode(u)}function kf(e){return e.slice(1,33)}ed({},{decrypt:()=>xf,encrypt:()=>_f});ed({},{NIP05_REGEX:()=>Sf,isNip05:()=>Bf,isValid:()=>Nf,queryProfile:()=>Of,searchDomain:()=>Tf,useFetchImplementation:()=>If});var Af,Sf=/^(?:([\w.+-]+)@)?([\w_-]+(\.[\w_-]+)+)$/,Bf=e=>Sf.test(e||"");try{Af=fetch}catch(e){}function If(e){Af=e}async function Tf(e,t=""){try{const n=`https://${e}/.well-known/nostr.json?name=${t}`,r=await Af(n,{redirect:"manual"});if(200!==r.status)throw Error("Wrong response code");return(await r.json()).names}catch(e){return{}}}async function Of(e){const t=e.match(Sf);if(!t)return null;const[,n="_",r]=t;try{const e=`https://${r}/.well-known/nostr.json?name=${n}`,t=await Af(e,{redirect:"manual"});if(200!==t.status)throw Error("Wrong response code");const i=await t.json(),s=i.names[n];return s?{pubkey:s,relays:i.relays?.[s]}:null}catch(e){return null}}async function Nf(e,t){const n=await Of(t);return!!n&&n.pubkey===e}function Uf(e){const t={reply:void 0,root:void 0,mentions:[],profiles:[],quotes:[]};let n,r;for(let i=e.tags.length-1;i>=0;i--){const s=e.tags[i];if("e"===s[0]&&s[1]){const[e,i,o,a,c]=s,u={id:i,relays:o?[o]:[],author:c};if("root"===a){t.root=u;continue}if("reply"===a){t.reply=u;continue}if("mention"===a){t.mentions.push(u);continue}n?r=u:n=u,t.mentions.push(u)}else{if("q"===s[0]&&s[1]){const[e,n,r]=s;t.quotes.push({id:n,relays:r?[r]:[]})}"p"===s[0]&&s[1]&&t.profiles.push({pubkey:s[1],relays:s[2]?[s[2]]:[]})}}return t.root||(t.root=r||n||t.reply),t.reply||(t.reply=n||t.root),[t.reply,t.root].forEach((e=>{if(!e)return;let n=t.mentions.indexOf(e);if(-1!==n&&t.mentions.splice(n,1),e.author){let n=t.profiles.find((t=>t.pubkey===e.author));n&&n.relays&&(e.relays||(e.relays=[]),n.relays.forEach((t=>{-1===e.relays?.indexOf(t)&&e.relays.push(t)})),n.relays=e.relays)}})),t.mentions.forEach((e=>{if(e.author){let n=t.profiles.find((t=>t.pubkey===e.author));n&&n.relays&&(e.relays||(e.relays=[]),n.relays.forEach((t=>{-1===e.relays.indexOf(t)&&e.relays.push(t)})),n.relays=e.relays)}})),t}ed({},{parse:()=>Uf});function Rf(e){}async function Lf(e){return await(await fetch(e.replace("ws://","http://").replace("wss://","https://"),{headers:{Accept:"application/nostr+json"}})).json()}ed({},{fetchRelayInformation:()=>Lf,useFetchImplementation:()=>Rf});function Cf(e){let t=0;for(let n=0;n<64;n+=8){const r=parseInt(e.substring(n,n+8),16);if(0!==r){t+=Math.clz32(r);break}t+=32}return t}function Zf(e,t){let n=0;const r=e,i=["nonce",n.toString(),t.toString()];for(r.tags.push(i);;){const e=Math.floor((new Date).getTime()/1e3);if(e!==r.created_at&&(n=0,r.created_at=e),i[1]=(++n).toString(),r.id=$f(r),Cf(r.id)>=t)break}return r}function $f(e){return _c(jc(id.encode(JSON.stringify([0,e.pubkey,e.created_at,e.kind,e.tags,e.content]))))}ed({},{fastEventHash:()=>$f,getPow:()=>Cf,minePow:()=>Zf});function Pf(e,t,n,r){return gd({kind:Td,tags:[...e.tags??[],["e",t.id,n],["p",t.pubkey]],content:""===e.content?"":JSON.stringify(t),created_at:e.created_at},r)}function jf(e){if(e.kind!==Td)return;let t,n;for(let r=e.tags.length-1;r>=0&&(void 0===t||void 0===n);r--){const i=e.tags[r];i.length>=2&&("e"===i[0]&&void 0===t?t=i:"p"===i[0]&&void 0===n&&(n=i))}return void 0!==t?{id:t[1],relays:[t[2],n?.[2]].filter((e=>"string"==typeof e)),author:n?.[1]}:void 0}function Mf(e,{skipVerification:t}={}){const n=jf(e);if(void 0===n||""===e.content)return;let r;try{r=JSON.parse(e.content)}catch(e){return}return r.id===n.id&&(t||yd(r))?r:void 0}ed({},{finishRepostEvent:()=>Pf,getRepostedEvent:()=>Mf,getRepostedEventPointer:()=>jf});ed({},{NOSTR_URI_REGEX:()=>zf,parse:()=>Hf,test:()=>qf});var zf=new RegExp(`nostr:(${df.source})`);function qf(e){return"string"==typeof e&&new RegExp(`^${zf.source}$`).test(e)}function Hf(e){const t=e.match(new RegExp(`^${zf.source}$`));if(!t)throw new Error(`Invalid Nostr URI: ${e}`);return{uri:t[0],value:t[1],decoded:lf(t[1])}}function Ff(e,t,n){const r=t.tags.filter((e=>e.length>=2&&("e"===e[0]||"p"===e[0])));return gd({...e,kind:Od,tags:[...e.tags??[],...r,["e",t.id],["p",t.pubkey]],content:e.content??"+"},n)}function Df(e){if(e.kind!==Od)return;let t,n;for(let r=e.tags.length-1;r>=0&&(void 0===t||void 0===n);r--){const i=e.tags[r];i.length>=2&&("e"===i[0]&&void 0===t?t=i:"p"===i[0]&&void 0===n&&(n=i))}return void 0!==t&&void 0!==n?{id:t[1],relays:[t[2],n[2]].filter((e=>void 0!==e)),author:n[1]}:void 0}ed({},{finishReactionEvent:()=>Ff,getReactedEventPointer:()=>Df});ed({},{matchAll:()=>Kf,regex:()=>Vf,replaceAll:()=>Wf});var Vf=()=>new RegExp(`\\b${zf.source}\\b`,"g");function*Kf(e){const t=e.matchAll(Vf());for(const e of t)try{const[t,n]=e;yield{uri:t,value:n,decoded:lf(n),start:e.index,end:e.index+t.length}}catch(e){}}function Wf(e,t){return e.replaceAll(Vf(),((e,n)=>t({uri:e,value:n,decoded:lf(n)})))}ed({},{channelCreateEvent:()=>Gf,channelHideMessageEvent:()=>Qf,channelMessageEvent:()=>Yf,channelMetadataEvent:()=>Jf,channelMuteUserEvent:()=>Xf});var Gf=(e,t)=>{let n;if("object"==typeof e.content)n=JSON.stringify(e.content);else{if("string"!=typeof e.content)return;n=e.content}return gd({kind:Cd,tags:[...e.tags??[]],content:n,created_at:e.created_at},t)},Jf=(e,t)=>{let n;if("object"==typeof e.content)n=JSON.stringify(e.content);else{if("string"!=typeof e.content)return;n=e.content}return gd({kind:Zd,tags:[["e",e.channel_create_event_id],...e.tags??[]],content:n,created_at:e.created_at},t)},Yf=(e,t)=>{const n=[["e",e.channel_create_event_id,e.relay_url,"root"]];return e.reply_to_channel_message_event_id&&n.push(["e",e.reply_to_channel_message_event_id,e.relay_url,"reply"]),gd({kind:$d,tags:[...n,...e.tags??[]],content:e.content,created_at:e.created_at},t)},Qf=(e,t)=>{let n;if("object"==typeof e.content)n=JSON.stringify(e.content);else{if("string"!=typeof e.content)return;n=e.content}return gd({kind:Pd,tags:[["e",e.channel_message_event_id],...e.tags??[]],content:n,created_at:e.created_at},t)},Xf=(e,t)=>{let n;if("object"==typeof e.content)n=JSON.stringify(e.content);else{if("string"!=typeof e.content)return;n=e.content}return gd({kind:jd,tags:[["p",e.pubkey_to_mute],...e.tags??[]],content:n,created_at:e.created_at},t)};ed({},{EMOJI_SHORTCODE_REGEX:()=>eh,matchAll:()=>nh,regex:()=>th,replaceAll:()=>rh});var eh=/:(\w+):/,th=()=>new RegExp(`\\B${eh.source}\\B`,"g");function*nh(e){const t=e.matchAll(th());for(const e of t)try{const[t,n]=e;yield{shortcode:t,name:n,start:e.index,end:e.index+t.length}}catch(e){}}function rh(e,t){return e.replaceAll(th(),((e,n)=>t({shortcode:e,name:n})))}var ih;ed({},{useFetchImplementation:()=>sh,validateGithub:()=>oh});try{ih=fetch}catch{}function sh(e){ih=e}async function oh(e,t,n){try{return await(await ih(`https://gist.github.com/${t}/${n}/raw`)).text()===`Verifying that I control the following Nostr public key: ${e}`}catch(e){return!1}}ed({},{decrypt:()=>gh,encrypt:()=>ph,getConversationKey:()=>uh,v2:()=>yh});var ah=1,ch=65535;function uh(e,t){const n=ec.getSharedSecret(e,"02"+t).subarray(1,33);return function(e,t,n){return Nc.hash(e),Ju(e,kc(n),kc(t))}(jc,n,"nip44-v2")}function dh(e,t){const n=function(e,t,n,r=32){if(Nc.hash(e),Nc.number(r),r>255*e.outputLen)throw new Error("Length should be <= 255*HashLen");const i=Math.ceil(r/e.outputLen);void 0===n&&(n=Qu);const s=new Uint8Array(i*e.outputLen),o=Ju.create(e,t),a=o._cloneInto(),c=new Uint8Array(o.outputLen);for(let t=0;t<i;t++)Yu[0]=t+1,a.update(0===t?Qu:c).update(n).update(Yu).digestInto(c),s.set(c,e.outputLen*t),o._cloneInto(a);return o.destroy(),a.destroy(),c.fill(0),Yu.fill(0),s.slice(0,r)}(jc,e,t,76);return{chacha_key:n.subarray(0,32),chacha_nonce:n.subarray(32,44),hmac_key:n.subarray(44,76)}}function lh(e){if(!Number.isSafeInteger(e)||e<1)throw new Error("expected positive integer");if(e<=32)return 32;const t=1<<Math.floor(Math.log2(e-1))+1,n=t<=256?32:t/8;return n*(Math.floor((e-1)/n)+1)}function fh(e){const t=id.encode(e),n=t.length,r=function(e){if(!Number.isSafeInteger(e)||e<ah||e>ch)throw new Error("invalid plaintext size: must be between 1 and 65535 bytes");const t=new Uint8Array(2);return new DataView(t.buffer).setUint16(0,e,!1),t}(n);return Ac(r,t,new Uint8Array(lh(n)-n))}function hh(e,t,n){if(32!==n.length)throw new Error("AAD associated data must be 32 bytes");const r=Ac(n,t);return Ju(jc,e,r)}function ph(e,t,n=Ic(32)){const{chacha_key:r,chacha_nonce:i,hmac_key:s}=dh(t,n),o=fh(e),a=Wu(r,i,o),c=hh(s,a,n);return eu.encode(Ac(new Uint8Array([2]),n,a,c))}function gh(e,t){const{nonce:n,ciphertext:r,mac:i}=function(e){if("string"!=typeof e)throw new Error("payload must be a valid string");const t=e.length;if(t<132||t>87472)throw new Error("invalid payload length: "+t);if("#"===e[0])throw new Error("unknown encryption version");let n;try{n=eu.decode(e)}catch(e){throw new Error("invalid base64: "+e.message)}const r=n.length;if(r<99||r>65603)throw new Error("invalid data length: "+r);const i=n[0];if(2!==i)throw new Error("unknown encryption version "+i);return{nonce:n.subarray(1,33),ciphertext:n.subarray(33,-32),mac:n.subarray(-32)}}(e),{chacha_key:s,chacha_nonce:o,hmac_key:a}=dh(t,n);if(!function(e,t){if(e.length!==t.length)return!1;let n=0;for(let r=0;r<e.length;r++)n|=e[r]^t[r];return 0===n}(hh(a,r,n),i))throw new Error("invalid MAC");return function(e){const t=new DataView(e.buffer).getUint16(0),n=e.subarray(2,2+t);if(t<ah||t>ch||n.length!==t||e.length!==2+lh(t))throw new Error("invalid padding");return rd.decode(n)}(Wu(s,o,r))}var yh={utils:{getConversationKey:uh,calcPaddedLen:lh},encrypt:ph,decrypt:gh};function mh(e){const{pathname:t,searchParams:n}=new URL(e),r=t,i=n.get("relay"),s=n.get("secret");if(!r||!i||!s)throw new Error("invalid connection string");return{pubkey:r,relay:i,secret:s}}async function wh(e,t,n){const r={method:"pay_invoice",params:{invoice:n}},i=await _f(t,e,JSON.stringify(r)),s={kind:ml,created_at:Math.round(Date.now()/1e3),content:i,tags:[["p",e]]};return gd(s,t)}ed({},{makeNwcRequestEvent:()=>wh,parseConnectionString:()=>mh});var vh;ed({},{getZapEndpoint:()=>Eh,makeZapReceipt:()=>kh,makeZapRequest:()=>_h,useFetchImplementation:()=>bh,validateZapRequest:()=>xh});try{vh=fetch}catch{}function bh(e){vh=e}async function Eh(e){try{let t="",{lud06:n,lud16:r}=JSON.parse(e.content);if(n){let{words:e}=lu.decode(n,1e3),r=lu.fromWords(e);t=rd.decode(r)}else{if(!r)return null;{let[e,n]=r.split("@");t=new URL(`/.well-known/lnurlp/${e}`,`https://${n}`).toString()}}let i=await vh(t),s=await i.json();if(s.allowsNostr&&s.nostrPubkey)return s.callback}catch(e){}return null}function _h({profile:e,event:t,amount:n,relays:r,comment:i=""}){if(!n)throw new Error("amount not given");if(!e)throw new Error("profile not given");let s={kind:9734,created_at:Math.round(Date.now()/1e3),content:i,tags:[["p",e],["amount",n.toString()],["relays",...r]]};return t&&s.tags.push(["e",t]),s}function xh(e){let t;try{t=JSON.parse(e)}catch(e){return"Invalid zap request JSON."}if(!nd(t))return"Zap request is not a valid Nostr event.";if(!yd(t))return"Invalid signature on zap request.";let n=t.tags.find((([e,t])=>"p"===e&&t));if(!n)return"Zap request doesn't have a 'p' tag.";if(!n[1].match(/^[a-f0-9]{64}$/))return"Zap request 'p' tag is not valid hex.";let r=t.tags.find((([e,t])=>"e"===e&&t));return r&&!r[1].match(/^[a-f0-9]{64}$/)?"Zap request 'e' tag is not valid hex.":t.tags.find((([e,t])=>"relays"===e&&t))?null:"Zap request doesn't have a 'relays' tag."}function kh({zapRequest:e,preimage:t,bolt11:n,paidAt:r}){let i=JSON.parse(e),s=i.tags.filter((([e])=>"e"===e||"p"===e||"a"===e)),o={kind:9735,created_at:Math.round(r.getTime()/1e3),content:"",tags:[...s,["P",i.pubkey],["bolt11",n],["description",e]]};return t&&o.tags.push(["preimage",t]),o}ed({},{createRumor:()=>Oh,createSeal:()=>Nh,createWrap:()=>Uh,unwrapEvent:()=>Ch,unwrapManyEvents:()=>Zh,wrapEvent:()=>Rh,wrapManyEvents:()=>Lh});var Ah=()=>Math.round(Date.now()/1e3),Sh=()=>Math.round(Ah()-172800*Math.random()),Bh=(e,t)=>uh(e,t),Ih=(e,t,n)=>ph(JSON.stringify(e),Bh(t,n)),Th=(e,t)=>JSON.parse(gh(e.content,Bh(t,e.pubkey)));function Oh(e,t){const n={created_at:Ah(),content:"",tags:[],...e,pubkey:pd(t)};return n.id=ld(n),n}function Nh(e,t,n){return gd({kind:Ud,content:Ih(e,t,n),created_at:Sh(),tags:[]},t)}function Uh(e,t){const n=hd();return gd({kind:zd,content:Ih(e,n,t),created_at:Sh(),tags:[["p",t]]},n)}function Rh(e,t,n){return Uh(Nh(Oh(e,t),t,n),n)}function Lh(e,t,n){if(!n||0===n.length)throw new Error("At least one recipient is required.");const r=pd(t),i=[Rh(e,t,r)];return n.forEach((n=>{i.push(Rh(e,t,n))})),i}function Ch(e,t){const n=Th(e,t);return Th(n,t)}function Zh(e,t){let n=[];return e.forEach((e=>{n.push(Ch(e,t))})),n.sort(((e,t)=>e.created_at-t.created_at)),n}ed({},{getToken:()=>Ph,hashPayload:()=>Dh,unpackEventFromToken:()=>Mh,validateEvent:()=>Kh,validateEventKind:()=>qh,validateEventMethodTag:()=>Fh,validateEventPayloadTag:()=>Vh,validateEventTimestamp:()=>zh,validateEventUrlTag:()=>Hh,validateToken:()=>jh});var $h="Nostr ";async function Ph(e,t,n,r=!1,i){const s={kind:bl,tags:[["u",e],["method",t]],created_at:Math.round((new Date).getTime()/1e3),content:""};i&&s.tags.push(["payload",Dh(i)]);const o=await n(s);return(r?$h:"")+eu.encode(id.encode(JSON.stringify(o)))}async function jh(e,t,n){const r=await Mh(e).catch((e=>{throw e}));return await Kh(r,t,n).catch((e=>{throw e}))}async function Mh(e){if(!e)throw new Error("Missing token");e=e.replace($h,"");const t=rd.decode(eu.decode(e));if(!t||0===t.length||!t.startsWith("{"))throw new Error("Invalid token");return JSON.parse(t)}function zh(e){return!!e.created_at&&Math.round((new Date).getTime()/1e3)-e.created_at<60}function qh(e){return e.kind===bl}function Hh(e,t){const n=e.tags.find((e=>"u"===e[0]));return!!n&&(n.length>0&&n[1]===t)}function Fh(e,t){const n=e.tags.find((e=>"method"===e[0]));return!!n&&(n.length>0&&n[1].toLowerCase()===t.toLowerCase())}function Dh(e){return _c(jc(id.encode(JSON.stringify(e))))}function Vh(e,t){const n=e.tags.find((e=>"payload"===e[0]));if(!n)return!1;const r=Dh(t);return n.length>0&&n[1]===r}async function Kh(e,t,n,r){if(!yd(e))throw new Error("Invalid nostr event, signature invalid");if(!qh(e))throw new Error("Invalid nostr event, kind invalid");if(!zh(e))throw new Error("Invalid nostr event, created_at timestamp invalid");if(!Hh(e,t))throw new Error("Invalid nostr event, url tag invalid");if(!Fh(e,n))throw new Error("Invalid nostr event, method tag invalid");if(Boolean(r)&&"object"==typeof r&&Object.keys(r).length>0&&!Vh(e,r))throw new Error("Invalid nostr event, payload tag does not match request body hash");return!0}function Wh(e,t={}){return{...e.config.filter,...t}}return e.CONST=t,e.Lib=To,e.NostrNode=class extends Oo{constructor(e,t,n={}){super(),this._inbox={event:new Oo,id:new Oo,peer:new Oo,tag:new Oo},this._sub=null,this._handler=e=>{try{const t=So(xo(e,this._seckey.hex),e);this.emit("message",t),this.inbox.id.emit(t.id,t),this.inbox.peer.emit(t.env.pubkey,t),this.inbox.tag.emit(t.tag,t)}catch(t){this.emit("bounced",[e.id,wo(t)])}},this._publish=async(e,t,n)=>{const r=n?.cache??new Map,i=function(e,t={}){let{created_at:n=mo(),tags:r=[],...i}=t;const s=e.config.envelope;return r=[...s.tags??[],...t.tags??[]],{...s,...i,created_at:n,tags:r}}(this,n),s=bo(i,Ao(e.tag,e.data,e.id),t,this._seckey.hex),o={...e,env:s},a=this._pool.publish(this.relays,s);return this._inbox.event.emit("published",o),Promise.all(a).then((n=>{const i=this.relays.filter((e=>!n.includes(e))),s=e.id,a=n.length>0,c={acks:n,fails:i,ok:a,peer_pk:t,data:o};return r.set(t,c),this._inbox.event.emit("settled",{...c,msg_id:s}),{...c,ok:a,msg_id:s}}))},Bo(e),Io(t),this._seckey=new _e(t),this._pubkey=lr(this._seckey.hex),this._config=function(e={}){const t={envelope:{kind:20004,tags:[]},filter:{kinds:[20004],since:mo()},req_timeout:5e3,since_offset:5,start_delay:2e3},n={...t.envelope,...e.envelope},r={...t.filter,...e.filter};return{...t,envelope:n,filter:r}}(n),this._filter=Wh(this,n.filter),this._pool=new af,this._relays=e,this.emit("info",["filter:",JSON.stringify(this.filter,null,2)])}_subscribe(e,t=this.config.req_timeout,n=mr()){return this._filter=Wh(this,e),this.filter["#p"]=[...this.filter["#p"]??[],this.pubkey],this._sub=this._pool.subscribeMany(this.relays,[this._filter],{id:n,oneose:()=>this.emit("subscribed",[n,this.filter]),onevent:this._handler}),new Promise((e=>{const r=setTimeout((()=>e("timeout")),t);this.within("subscribed",(([t])=>{var i;t===n&&(i=null,clearTimeout(r),e(i))}),t)}))}get config(){return this._config}get filter(){return this._filter}get inbox(){return this._inbox}get pubkey(){return this._pubkey}get relays(){return this._relays}async broadcast(e,t,n){const r=new Map,i=ko(e),s=t.map((e=>this._publish(i,e,n)));return Promise.all(s).then((e=>{const n={ok:e.every((e=>e.ok)),cache:r,msg_id:i.id,peers:t};return e.forEach((e=>r.set(e.peer_pk,e))),this.emit("broadcast",n),{...n}}))}async connect(e=this.config.req_timeout){const t=await this._subscribe(this._filter,e);if(null!==t)throw new Error(t);return this.emit("ready",this),this}async close(){null!==this._sub&&this._sub.close(),void 0!==this._pool.close&&this._pool.close(this.relays),this.emit("close",this)}async request(e,t,n){const r=ko(e),i=this.subscribe({id:r.id,peers:[t]},n);return this.publish(r,t,n),i}async multicast(e,t,n={}){const r=ko(e),i=this.subscribe({id:r.id,peers:t},n),s=this.broadcast(r,t,n);return Promise.all([i,s]).then((([e,t])=>({sub:e,pub:t})))}async publish(e,t,n){const r=ko(e);return this._publish(r,t,n)}async subscribe(e,t){const n=function(e,t={}){const n=t.timeout??e.config.req_timeout;return{...t,timeout:n}}(this,t);return new Promise((t=>{const{timeout:r,threshold:i}=n,{id:s,peers:o=[],tag:a}=e,c=new Set,u=new Set,d=setTimeout((()=>l(!1,"timeout")),r),l=(e,n)=>{clearTimeout(d);const r={ok:e,authors:Array.from(c),inbox:Array.from(u),peers:o,reason:n};this.emit("resolved",r),t({...r})};this.within("message",(e=>{(e=>"string"==typeof s&&s!==e.id||"string"==typeof a&&a!==e.tag||o.length>0&&!o.includes(e.env.pubkey))(e)||(c.add(e.env.pubkey),u.add(e)),"number"==typeof i&&c.size>=i&&l(!0,"threshold"),Array.isArray(o)&&o.every((e=>c.has(e)))&&l(!0,"complete")}),r)}))}async update(e){return null!==this._sub&&this._sub.close(),this._subscribe(e)}},e.Schema=yo,e.Util=vo,e}({});
//# sourceMappingURL=script.js.map
