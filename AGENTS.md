# Repository Guidelines

## Project Structure & Module Organization
- `src/` houses the TypeScript sources. `cli.tsx` boots the Ink CLI, `App.tsx` routes commands, `components/` holds UI fragments, and `keyset/` manages key material flows.
- `dist/` is generated by `tsup`; never edit it directly—rebuild instead.
- `llm/` captures prompt context and automation notes used by agents. Keep these files in sync with UX or protocol changes.
- `tmp-shares/` and `temp_password.txt` are volatile fixtures. Rotate or ignore them locally and avoid committing real secrets.

## Build, Test, and Development Commands
- `npm run dev` — runs the CLI through `tsx` with rapid reload for interactive development.
- `npm run build` — bundles `src/cli.tsx` via `tsup`, targeting Node 18 and emitting `dist/cli.js` with the executable banner.
- `npm run start` — executes the compiled binary exactly as end users will.
- `npm run typecheck` / `npm test` — strict TypeScript verification; required before submitting changes.

## Coding Style & Naming Conventions
- TypeScript + ESM (`module: NodeNext`) with React/Ink function components; prefer hooks over classes.
- Keep 2-space indentation, single quotes, and trailing commas. Let your editor format code consistently; no repo-level formatter ships here.
- Use `PascalCase` for components (e.g., `Intro.tsx`), `camelCase` for helpers, and lowercase for CLI flags to match runtime output.
- When a module grows past ~150 lines, extract shared logic into `src/components/` or `src/keyset/`.

## Testing Guidelines
- Automated coverage currently relies on the type checker. Do not skip `npm run typecheck`.
- For logic-heavy additions, add unit tests using Node's built-in `node:test` or a lightweight runner such as `vitest`; colocate specs beside the module with a `.test.ts` suffix or under `src/__tests__/`.
- Document manual verification steps in your PR (e.g., `npm run dev -- intro`, `npm run start -- --help`) so reviewers can reproduce CLI flows.

## Commit & Pull Request Guidelines
- Write imperative, present-tense commit subjects ("Add passphrase prompt"), and keep each commit focused.
- Reference related GitHub issues in PR descriptions, include a concise summary, and paste the output of key commands or screenshots of the terminal UI.
- Flag updates to `llm/` context explicitly in the PR body so agent maintainers can review semantic changes.

## Security & Configuration Tips
- Require Node.js 18 or newer; run `nvm use 18` (or equivalent) before installing dependencies.
- Clear sensitive artifacts before sharing branches, and treat `temp_password.txt` as a placeholder example only.
